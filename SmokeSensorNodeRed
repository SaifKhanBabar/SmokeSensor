[
    {
        "id": "3c929b2d01870438",
        "type": "tab",
        "label": "RESPONSE SERVER",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d4dafd656daaf99a",
        "type": "tab",
        "label": "ENERGY METER",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d579ed5898a52b4f",
        "type": "tab",
        "label": "EMCH-SIGNAL",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7e1c6603448a60d2",
        "type": "tab",
        "label": "EMCH-SEND DATA TO MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d9a17ff77e288b13",
        "type": "tab",
        "label": "EMCH1-QUEUE",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "501238405e29cec3",
        "type": "tab",
        "label": "EMCH2-QUEUE",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "448540c6f18cdaa5",
        "type": "tab",
        "label": "SMOKE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "8cb11014cf5190b7",
        "type": "tab",
        "label": "SMOKE-SEND DATA TO MQTT",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7ff09422b123e39e",
        "type": "tab",
        "label": "SMOKE-QUEUE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "89d7652b77b92b2b",
        "type": "tab",
        "label": "CT-SIGNAL",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e35140c4f71a9479",
        "type": "tab",
        "label": "CT-SEND DATA TO MQTT",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c75d39e13962320f",
        "type": "tab",
        "label": "CT-QUEUE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c06c5b4f567b90fc",
        "type": "tab",
        "label": "CH-SIGNAL",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6babdaf49ed1a5d7",
        "type": "tab",
        "label": "CH-SEND DATA TO MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c00de09a8dc825d9",
        "type": "tab",
        "label": "CH-QUEUE",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4ee4d39fa351df70",
        "type": "ui_group",
        "name": "Nodered Program Reference",
        "tab": "a2b78632faf42f60",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false
    },
    {
        "id": "8f47a73cc311edee",
        "type": "s7 endpoint",
        "transport": "iso-on-tcp",
        "address": "192.168.0.1",
        "port": "102",
        "rack": "0",
        "slot": "1",
        "localtsaphi": "01",
        "localtsaplo": "00",
        "remotetsaphi": "01",
        "remotetsaplo": "00",
        "connmode": "rack-slot",
        "adapter": "",
        "busaddr": "2",
        "cycletime": "3000",
        "timeout": "2000",
        "name": "HVAC-GMI-CH",
        "vartable": [
            {
                "addr": "IW100",
                "name": "T1-CH"
            },
            {
                "addr": "IW98",
                "name": "T2-CH"
            },
            {
                "addr": "IW96",
                "name": "T3-CH"
            },
            {
                "addr": "IW112",
                "name": "F1-CH"
            },
            {
                "addr": "IW114",
                "name": "F2-CH"
            },
            {
                "addr": "IW116",
                "name": "F3-CH"
            },
            {
                "addr": "DB2,R0",
                "name": "DB_F1"
            },
            {
                "addr": "DB2,R4",
                "name": "DB_F2"
            },
            {
                "addr": "DB2,R8",
                "name": "DB_F3"
            },
            {
                "addr": "DB2,R12",
                "name": "T11-TEMP3"
            },
            {
                "addr": "DB2,R16",
                "name": "T12-TEMP2"
            },
            {
                "addr": "DB2,R20",
                "name": "T13-TEMP1"
            }
        ]
    },
    {
        "id": "a2b78632faf42f60",
        "type": "ui_tab",
        "name": "Project Dashboard",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "cae3ee372a6dd05c",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "1b736ae5138d84a2",
        "type": "mqtt-broker",
        "name": "local server",
        "broker": "218.208.86.106",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "bfb847bf3311ba0d",
        "type": "modbus-client",
        "name": "",
        "clienttype": "serial",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB0",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "9600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": true,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true
    },
    {
        "id": "7c76682efeda9319",
        "type": "ui_group",
        "name": "CURRENT",
        "tab": "d771c85c9ef06bbb",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f6103ae08cc93582",
        "type": "ui_group",
        "name": "INJECT BUTTON",
        "tab": "d771c85c9ef06bbb",
        "order": 1,
        "disp": true,
        "width": 6,
        "collapse": true,
        "className": ""
    },
    {
        "id": "af236e5eacede2f5",
        "type": "ui_group",
        "name": "VOLT",
        "tab": "d771c85c9ef06bbb",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8c8a40928d19ad2e",
        "type": "ui_group",
        "name": "ENERGY",
        "tab": "d771c85c9ef06bbb",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e063e749d897f9e5",
        "type": "ui_group",
        "name": "POWER/H",
        "tab": "d771c85c9ef06bbb",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "d771c85c9ef06bbb",
        "type": "ui_tab",
        "name": "CH",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "121f64b67d4c0157",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.0.13",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3a120e71bc3f848e",
        "type": "s7 endpoint",
        "transport": "iso-on-tcp",
        "address": "192.168.0.2",
        "port": "102",
        "rack": "0",
        "slot": "1",
        "localtsaphi": "01",
        "localtsaplo": "00",
        "remotetsaphi": "01",
        "remotetsaplo": "00",
        "connmode": "rack-slot",
        "adapter": "",
        "busaddr": "2",
        "cycletime": "1000",
        "timeout": "2000",
        "name": "HVAC-GMI-CT",
        "vartable": [
            {
                "addr": "IW106",
                "name": "T1-CT"
            },
            {
                "addr": "IW104",
                "name": "T2-CT"
            },
            {
                "addr": "IW102",
                "name": "T3-CT"
            },
            {
                "addr": "IW100",
                "name": "T4-CT"
            },
            {
                "addr": "IW98",
                "name": "T5-CT"
            },
            {
                "addr": "IW96",
                "name": "T6-CT"
            },
            {
                "addr": "DB3,R0",
                "name": "T14-TEMP6"
            },
            {
                "addr": "DB3,R4",
                "name": "T15-TEMP5"
            },
            {
                "addr": "DB3,R8",
                "name": "T16-TEMP4"
            },
            {
                "addr": "DB3,R12",
                "name": "T17-TEMP3"
            },
            {
                "addr": "DB3,R16",
                "name": "T18-TEMP2"
            },
            {
                "addr": "DB3,R20",
                "name": "T19-TEMP1"
            }
        ]
    },
    {
        "id": "e30813b8c45029e4",
        "type": "mqtt-broker",
        "name": "mosquitto temp .250",
        "broker": "192.168.0.250",
        "port": "1884",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "6284b34075bfddaa",
        "type": "mqtt in",
        "z": "3c929b2d01870438",
        "d": true,
        "name": "SERVER RESPONSE - REPLY",
        "topic": "gmi/messerver/response",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "1b736ae5138d84a2",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 290,
        "y": 840,
        "wires": [
            [
                "7383a04ab31ba58f"
            ]
        ]
    },
    {
        "id": "ff7e54700a5a6569",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 640,
        "wires": []
    },
    {
        "id": "109f8c6183503e7a",
        "type": "comment",
        "z": "3c929b2d01870438",
        "name": "CHECK RESPONSE DATA PACKAGE AND STATUS CODE FROM SERVER RESPONSE",
        "info": "",
        "x": 870,
        "y": 860,
        "wires": []
    },
    {
        "id": "a8c645dcdf8f02d2",
        "type": "function",
        "z": "3c929b2d01870438",
        "name": "",
        "func": "msg.response = msg.payload.data.data;\nmsg.status_code = msg.response.status_code\n//msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 900,
        "wires": [
            [
                "971aefbff6810a5f",
                "48a5dbba8b0f3021",
                "529da0862d40c630"
            ]
        ]
    },
    {
        "id": "971aefbff6810a5f",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 960,
        "wires": []
    },
    {
        "id": "48a5dbba8b0f3021",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1730,
        "y": 520,
        "wires": [
            [
                "30e4d658c5da613c"
            ]
        ]
    },
    {
        "id": "7383a04ab31ba58f",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 780,
        "wires": []
    },
    {
        "id": "f8a6f6fe028af03d",
        "type": "change",
        "z": "3c929b2d01870438",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "status_code",
                "pt": "msg",
                "to": "response.status_code",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 580,
        "wires": [
            [
                "ff7e54700a5a6569"
            ]
        ]
    },
    {
        "id": "4575d5fb0bfa812f",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "response.status_code",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 750,
        "y": 560,
        "wires": [
            [
                "f8a6f6fe028af03d"
            ],
            [
                "35a4f57365d9b3a0"
            ]
        ]
    },
    {
        "id": "35a4f57365d9b3a0",
        "type": "change",
        "z": "3c929b2d01870438",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "response.status_code",
                "pt": "msg",
                "to": "200",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 950,
        "y": 620,
        "wires": [
            [
                "f8a6f6fe028af03d"
            ]
        ]
    },
    {
        "id": "298ead46b07fa032",
        "type": "delay",
        "z": "3c929b2d01870438",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 550,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "1240f47c3c2a7d70",
        "type": "comment",
        "z": "3c929b2d01870438",
        "name": "[README]REMOVE THE SWITCH AND SET NODE (2  NEW NODE) AFTER DEV TEAM HAS ADD THE 200 RESPONSE CODE",
        "info": "",
        "x": 1130,
        "y": 500,
        "wires": []
    },
    {
        "id": "30e4d658c5da613c",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "CH-SR",
        "mode": "link",
        "links": [
            "25710db50e109909",
            "54116074d25e4257",
            "575101a99e115dac",
            "8cd3b49a759c9ad2",
            "d36aeaebbb674b7c"
        ],
        "x": 1895,
        "y": 520,
        "wires": []
    },
    {
        "id": "3af59347d67156a0",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH1-KWH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2490,
        "y": 460,
        "wires": []
    },
    {
        "id": "111f8df6a977c0bd",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que102",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2270,
        "y": 500,
        "wires": [
            [
                "af7216bfab4ca2b0",
                "3af59347d67156a0"
            ]
        ]
    },
    {
        "id": "af7216bfab4ca2b0",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "18b083b1b5dcd01a",
            "8d2bb507c4cfec78"
        ],
        "x": 2435,
        "y": 500,
        "wires": []
    },
    {
        "id": "8cd3b49a759c9ad2",
        "type": "link in",
        "z": "3c929b2d01870438",
        "name": "LINK IN CH-SR",
        "links": [
            "30e4d658c5da613c"
        ],
        "x": 2105,
        "y": 500,
        "wires": [
            [
                "111f8df6a977c0bd",
                "a7d6564f89a29d32",
                "391b9222be4df916",
                "fdc3d06c09d9e787",
                "fa4e0585abf4ce5f"
            ]
        ]
    },
    {
        "id": "aa1f48fa59acd83b",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH1-KW",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2480,
        "y": 620,
        "wires": []
    },
    {
        "id": "a7d6564f89a29d32",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que104",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2270,
        "y": 660,
        "wires": [
            [
                "0adb19f055b26b0f",
                "aa1f48fa59acd83b"
            ]
        ]
    },
    {
        "id": "0adb19f055b26b0f",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "23b4cc1a79a1744c",
            "d716a20cc42fbe02"
        ],
        "x": 2435,
        "y": 660,
        "wires": []
    },
    {
        "id": "857960bc8edb1d0e",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH1-VOLT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2490,
        "y": 700,
        "wires": []
    },
    {
        "id": "391b9222be4df916",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que105",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2270,
        "y": 740,
        "wires": [
            [
                "3c06593ae4f99e65",
                "857960bc8edb1d0e"
            ]
        ]
    },
    {
        "id": "3c06593ae4f99e65",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "0e6d329e7e73b65e",
            "81b177414b6b83ee"
        ],
        "x": 2435,
        "y": 740,
        "wires": []
    },
    {
        "id": "3ca61b4bfc9cc1a4",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH1-CURRENT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2500,
        "y": 780,
        "wires": []
    },
    {
        "id": "fdc3d06c09d9e787",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que106",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2270,
        "y": 820,
        "wires": [
            [
                "e17fe287c5aee9dc",
                "3ca61b4bfc9cc1a4"
            ]
        ]
    },
    {
        "id": "e17fe287c5aee9dc",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "0cec4c0965b882b7",
            "ee54313004379b61"
        ],
        "x": 2435,
        "y": 820,
        "wires": []
    },
    {
        "id": "e9def8b75e733a80",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH2-KWH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3170,
        "y": 460,
        "wires": []
    },
    {
        "id": "cab64fe1ed7dcd1e",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que107",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2950,
        "y": 500,
        "wires": [
            [
                "ab8abdbae905f467",
                "e9def8b75e733a80"
            ]
        ]
    },
    {
        "id": "ab8abdbae905f467",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "3e2af192a5dd5944"
        ],
        "x": 3115,
        "y": 500,
        "wires": []
    },
    {
        "id": "884c58320ea2a579",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH2-KW",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3160,
        "y": 620,
        "wires": []
    },
    {
        "id": "301bd29ea28587c0",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que109",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2950,
        "y": 660,
        "wires": [
            [
                "bc354ef06db31172",
                "884c58320ea2a579"
            ]
        ]
    },
    {
        "id": "bc354ef06db31172",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "0ffe8d71ed85995c"
        ],
        "x": 3115,
        "y": 660,
        "wires": []
    },
    {
        "id": "1d047f38fe53d039",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH2-VOLT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3170,
        "y": 700,
        "wires": []
    },
    {
        "id": "ffd27628dd017605",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que110",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2950,
        "y": 740,
        "wires": [
            [
                "411a0f887e29f91d",
                "1d047f38fe53d039"
            ]
        ]
    },
    {
        "id": "411a0f887e29f91d",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "ef1bc53b5ac5921f"
        ],
        "x": 3115,
        "y": 740,
        "wires": []
    },
    {
        "id": "80120e3871e00fe7",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH2-CURRENT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3180,
        "y": 780,
        "wires": []
    },
    {
        "id": "5f44d5703e975165",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que111",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2950,
        "y": 820,
        "wires": [
            [
                "bc5caf72dcefcc69",
                "80120e3871e00fe7"
            ]
        ]
    },
    {
        "id": "bc5caf72dcefcc69",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "29578444b4f836cd"
        ],
        "x": 3115,
        "y": 820,
        "wires": []
    },
    {
        "id": "70b9feaeb97d3f21",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH3-KWH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3830,
        "y": 460,
        "wires": []
    },
    {
        "id": "b9eca6c40a2285a8",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que112",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3610,
        "y": 500,
        "wires": [
            [
                "18b4f86bdda1ff27",
                "70b9feaeb97d3f21"
            ]
        ]
    },
    {
        "id": "18b4f86bdda1ff27",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "db48c62983b2d6e0"
        ],
        "x": 3775,
        "y": 500,
        "wires": []
    },
    {
        "id": "bb21dcc3cfa5e01e",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH3-KW",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3820,
        "y": 620,
        "wires": []
    },
    {
        "id": "856d99581feacf50",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que114",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3610,
        "y": 660,
        "wires": [
            [
                "52e7ed5b87b4c103",
                "bb21dcc3cfa5e01e"
            ]
        ]
    },
    {
        "id": "52e7ed5b87b4c103",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "d7199650463b7823"
        ],
        "x": 3775,
        "y": 660,
        "wires": []
    },
    {
        "id": "548b228b3e10e055",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH3-VOLT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3830,
        "y": 700,
        "wires": []
    },
    {
        "id": "6ac71ca14f93fa72",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que115",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3610,
        "y": 740,
        "wires": [
            [
                "8883960d9bd042d2",
                "548b228b3e10e055"
            ]
        ]
    },
    {
        "id": "8883960d9bd042d2",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "42a70c98977ef910"
        ],
        "x": 3775,
        "y": 740,
        "wires": []
    },
    {
        "id": "6e354a5f99bfc8c0",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH3-CURRENT",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3840,
        "y": 780,
        "wires": []
    },
    {
        "id": "6b913381ed62cccb",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que116",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3610,
        "y": 820,
        "wires": [
            [
                "6b20ed32609090ed",
                "6e354a5f99bfc8c0"
            ]
        ]
    },
    {
        "id": "6b20ed32609090ed",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "6ec45a1a4c8646bc"
        ],
        "x": 3775,
        "y": 820,
        "wires": []
    },
    {
        "id": "575101a99e115dac",
        "type": "link in",
        "z": "3c929b2d01870438",
        "name": "LINK IN CH-SR",
        "links": [
            "30e4d658c5da613c"
        ],
        "x": 3425,
        "y": 500,
        "wires": [
            [
                "b9eca6c40a2285a8",
                "856d99581feacf50",
                "6ac71ca14f93fa72",
                "6b913381ed62cccb",
                "4c2878d77fa03565"
            ]
        ]
    },
    {
        "id": "16e0159d639a6620",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH1-RTH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2480,
        "y": 540,
        "wires": []
    },
    {
        "id": "fa4e0585abf4ce5f",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que103",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2270,
        "y": 580,
        "wires": [
            [
                "4510ce6dd17e0245",
                "16e0159d639a6620"
            ]
        ]
    },
    {
        "id": "4510ce6dd17e0245",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "19445a0cbcc2f407"
        ],
        "x": 2435,
        "y": 580,
        "wires": []
    },
    {
        "id": "1ebd3153f924447b",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH2-RTH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3160,
        "y": 540,
        "wires": []
    },
    {
        "id": "5d95fd883a4e9db2",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que108",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2950,
        "y": 580,
        "wires": [
            [
                "4bc266052ff459bc",
                "1ebd3153f924447b"
            ]
        ]
    },
    {
        "id": "4bc266052ff459bc",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "99714d2132e2c90c"
        ],
        "x": 3115,
        "y": 580,
        "wires": []
    },
    {
        "id": "29a5e5f53f47352a",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH3-RTH",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3820,
        "y": 540,
        "wires": []
    },
    {
        "id": "4c2878d77fa03565",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que113",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3610,
        "y": 580,
        "wires": [
            [
                "17a85b62a45a92c9",
                "29a5e5f53f47352a"
            ]
        ]
    },
    {
        "id": "17a85b62a45a92c9",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "58fd2c2e5c76301c"
        ],
        "x": 3775,
        "y": 580,
        "wires": []
    },
    {
        "id": "5df071d37e3afa50",
        "type": "mqtt in",
        "z": "3c929b2d01870438",
        "name": "SERVER RESPONSE - REPLY",
        "topic": "gmi/messerver/response1",
        "qos": "1",
        "datatype": "auto-detect",
        "broker": "121f64b67d4c0157",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 190,
        "y": 900,
        "wires": [
            [
                "1cc990c600b2c301",
                "c4026ed65cbb6126",
                "1eedf36d1d47a392"
            ]
        ]
    },
    {
        "id": "1cc990c600b2c301",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 1020,
        "wires": []
    },
    {
        "id": "1eedf36d1d47a392",
        "type": "json",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 610,
        "y": 900,
        "wires": [
            [
                "a8c645dcdf8f02d2",
                "64920d48408ceb45"
            ]
        ]
    },
    {
        "id": "64920d48408ceb45",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 960,
        "wires": []
    },
    {
        "id": "529da0862d40c630",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1110,
        "y": 1520,
        "wires": [
            [
                "d7b2ef84a79231f8",
                "87106d6e711e432f"
            ]
        ]
    },
    {
        "id": "d7b2ef84a79231f8",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 1580,
        "wires": []
    },
    {
        "id": "87106d6e711e432f",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que18",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1290,
        "y": 1520,
        "wires": [
            [
                "e52e25df0929ef57",
                "d111c34299988fc2",
                "7008bf6a2ea07405"
            ]
        ]
    },
    {
        "id": "e52e25df0929ef57",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "8da11419ed11fa5c",
            "032f4bfcad220951"
        ],
        "x": 1455,
        "y": 1520,
        "wires": []
    },
    {
        "id": "d111c34299988fc2",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "PLANT-SMOKE2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 1480,
        "wires": []
    },
    {
        "id": "25710db50e109909",
        "type": "link in",
        "z": "3c929b2d01870438",
        "name": "LINK IN CH-SR",
        "links": [
            "30e4d658c5da613c"
        ],
        "x": 2755,
        "y": 500,
        "wires": [
            [
                "cab64fe1ed7dcd1e",
                "5d95fd883a4e9db2",
                "301bd29ea28587c0",
                "ffd27628dd017605",
                "5f44d5703e975165"
            ]
        ]
    },
    {
        "id": "bbff0aea758396b3",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que12",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1060,
        "wires": [
            [
                "ba519f7ae798e85a",
                "4e108cef6a605d30"
            ]
        ]
    },
    {
        "id": "4e108cef6a605d30",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "b2a7bb547ea8db06",
            "2572a6c696fc0451"
        ],
        "x": 3135,
        "y": 1060,
        "wires": []
    },
    {
        "id": "ba519f7ae798e85a",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1020,
        "wires": []
    },
    {
        "id": "03590ce5ff1a9aa4",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1100,
        "wires": []
    },
    {
        "id": "095625cc31180701",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1180,
        "wires": []
    },
    {
        "id": "9922868f69591e2b",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1260,
        "wires": []
    },
    {
        "id": "6b4b917492c8df81",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1340,
        "wires": []
    },
    {
        "id": "fb3ce870a77f6ea1",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CT-TEMP6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 1420,
        "wires": []
    },
    {
        "id": "54116074d25e4257",
        "type": "link in",
        "z": "3c929b2d01870438",
        "name": "LINK IN CT-SR",
        "links": [
            "421273c2aeb403d3",
            "30e4d658c5da613c"
        ],
        "x": 2795,
        "y": 1060,
        "wires": [
            [
                "bbff0aea758396b3",
                "7be11e053a31506d",
                "45d3d958e8f726c6",
                "0a00490dd577fef5",
                "a2c58876084e7c6b",
                "000769b8a0269196"
            ]
        ]
    },
    {
        "id": "7be11e053a31506d",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que13",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1140,
        "wires": [
            [
                "2c5ebbd6d5885721",
                "03590ce5ff1a9aa4"
            ]
        ]
    },
    {
        "id": "2c5ebbd6d5885721",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "ab0ad6ce658f6d14",
            "c89164b679634881"
        ],
        "x": 3135,
        "y": 1140,
        "wires": []
    },
    {
        "id": "45d3d958e8f726c6",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que14",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1220,
        "wires": [
            [
                "1f4024a3a9858ebb",
                "095625cc31180701"
            ]
        ]
    },
    {
        "id": "1f4024a3a9858ebb",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "9ac044dcd9b95341",
            "dfb0e0b0cb306fa8"
        ],
        "x": 3135,
        "y": 1220,
        "wires": []
    },
    {
        "id": "0a00490dd577fef5",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que15",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1300,
        "wires": [
            [
                "ed372ab2c3a10788",
                "9922868f69591e2b"
            ]
        ]
    },
    {
        "id": "ed372ab2c3a10788",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "cb5ff5955f11c5f5",
            "dcac45177a47c016"
        ],
        "x": 3135,
        "y": 1300,
        "wires": []
    },
    {
        "id": "a2c58876084e7c6b",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que16",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1380,
        "wires": [
            [
                "601293bafe763d5e",
                "6b4b917492c8df81"
            ]
        ]
    },
    {
        "id": "601293bafe763d5e",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "22c57ed78ed79049",
            "a7f2972025c2b92c"
        ],
        "x": 3135,
        "y": 1380,
        "wires": []
    },
    {
        "id": "000769b8a0269196",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que17",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2970,
        "y": 1460,
        "wires": [
            [
                "43ec8aa16aa9500c",
                "fb3ce870a77f6ea1"
            ]
        ]
    },
    {
        "id": "43ec8aa16aa9500c",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "links": [
            "66eeb7a3085874f0",
            "ef4019d88c70a709"
        ],
        "x": 3135,
        "y": 1460,
        "wires": []
    },
    {
        "id": "c4026ed65cbb6126",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "JSON",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 960,
        "wires": [
            [
                "78627db974ffb096"
            ],
            []
        ]
    },
    {
        "id": "78627db974ffb096",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 1000,
        "wires": []
    },
    {
        "id": "fee6c6f7db736fcb",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que1",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1100,
        "wires": [
            [
                "050a5d4e0bdab5c7",
                "901b6ed2bc63917a"
            ]
        ]
    },
    {
        "id": "050a5d4e0bdab5c7",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "97e8bfc7efbd127a",
            "32f3a108e4bf2ba6"
        ],
        "x": 2475,
        "y": 1100,
        "wires": []
    },
    {
        "id": "636e6042a87fca85",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que2",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1180,
        "wires": [
            [
                "b908080bec515f64",
                "02c3d13b66857b3c"
            ]
        ]
    },
    {
        "id": "b908080bec515f64",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "7170b0e8042b66ab",
            "ddad3cf199ebc47a"
        ],
        "x": 2475,
        "y": 1180,
        "wires": []
    },
    {
        "id": "69ef3937744c2b0e",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que3",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1260,
        "wires": [
            [
                "bca862e180818a48",
                "10132931f2e32c49"
            ]
        ]
    },
    {
        "id": "bca862e180818a48",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "166b94a6abc67d8b",
            "8207b6efaea82b4e"
        ],
        "x": 2475,
        "y": 1260,
        "wires": []
    },
    {
        "id": "901b6ed2bc63917a",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-TEMP1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1060,
        "wires": []
    },
    {
        "id": "02c3d13b66857b3c",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-TEMP2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1140,
        "wires": []
    },
    {
        "id": "10132931f2e32c49",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-TEMP3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1220,
        "wires": []
    },
    {
        "id": "d36aeaebbb674b7c",
        "type": "link in",
        "z": "3c929b2d01870438",
        "name": "LINK IN CH-SR",
        "links": [
            "30e4d658c5da613c"
        ],
        "x": 2115,
        "y": 1100,
        "wires": [
            [
                "fee6c6f7db736fcb",
                "636e6042a87fca85",
                "69ef3937744c2b0e",
                "77940a2aa69fcec3",
                "89a5ce4c39e48a55",
                "07c58e7d16975b94"
            ]
        ]
    },
    {
        "id": "2cb3d9a566402b2a",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-FLOW1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1340,
        "wires": []
    },
    {
        "id": "4da452019cb748dd",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-FLOW2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1420,
        "wires": []
    },
    {
        "id": "ad207f3095f7ba54",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "CH-FLOW3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2530,
        "y": 1500,
        "wires": []
    },
    {
        "id": "77940a2aa69fcec3",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que9",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1380,
        "wires": [
            [
                "9242208ed543c5e0",
                "2cb3d9a566402b2a"
            ]
        ]
    },
    {
        "id": "9242208ed543c5e0",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "65dff56f2d0294bb",
            "67896cebea62e5c3"
        ],
        "x": 2475,
        "y": 1380,
        "wires": []
    },
    {
        "id": "89a5ce4c39e48a55",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que10",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1460,
        "wires": [
            [
                "450d282160ce6985",
                "4da452019cb748dd"
            ]
        ]
    },
    {
        "id": "450d282160ce6985",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "49d9ba9b0ef3dd83",
            "9d55ebfd1922d6fb"
        ],
        "x": 2475,
        "y": 1460,
        "wires": []
    },
    {
        "id": "07c58e7d16975b94",
        "type": "switch",
        "z": "3c929b2d01870438",
        "name": "",
        "property": "response.msg_no",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "msg_no_que11",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2310,
        "y": 1540,
        "wires": [
            [
                "6bd829edd82ac25f",
                "ad207f3095f7ba54"
            ]
        ]
    },
    {
        "id": "6bd829edd82ac25f",
        "type": "link out",
        "z": "3c929b2d01870438",
        "name": "from 2",
        "mode": "link",
        "links": [
            "11beea8124be3b2b",
            "fc14514f6b56e0bc"
        ],
        "x": 2475,
        "y": 1540,
        "wires": []
    },
    {
        "id": "7008bf6a2ea07405",
        "type": "debug",
        "z": "3c929b2d01870438",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 1580,
        "wires": []
    },
    {
        "id": "af4f9407.dcec68",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 390,
        "y": 80,
        "wires": []
    },
    {
        "id": "9effd7e1.bb6eb8",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "amp",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 330,
        "y": 160,
        "wires": [
            [
                "af4f9407.dcec68",
                "66acacd17fcf1451"
            ],
            []
        ]
    },
    {
        "id": "9fc7d670.e7d558",
        "type": "inject",
        "z": "d4dafd656daaf99a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 80,
        "wires": [
            [
                "a75183e215a8f8b5"
            ]
        ]
    },
    {
        "id": "66acacd17fcf1451",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.001};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.001};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.001};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 160,
        "wires": [
            [
                "288916fa9d626e13"
            ],
            [
                "3af1f536ba64ad21"
            ],
            [
                "ba1e858c53adb24b",
                "b72f9394f887b7fc"
            ]
        ]
    },
    {
        "id": "288916fa9d626e13",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 750,
        "y": 120,
        "wires": []
    },
    {
        "id": "3af1f536ba64ad21",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 750,
        "y": 160,
        "wires": []
    },
    {
        "id": "ba1e858c53adb24b",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 750,
        "y": 200,
        "wires": []
    },
    {
        "id": "3616721c956c607d",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "hart",
        "func": "var id=msg.payload;\n\n    var msg1 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 0 , \n    'quantity': 6 \n    })};\n    \n    var msg2 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 8 , \n    'quantity': 6 \n    })};\n    \n    var msg3 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 22 , \n    'quantity': 6 \n    })};\n    \n    var msg4 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 48 , \n    'quantity': 4 \n    })};\n \n    \nreturn [msg1,msg2,msg3,msg4];\n\n\n\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 130,
        "y": 180,
        "wires": [
            [
                "9effd7e1.bb6eb8"
            ],
            [
                "b9ce6d9b24c244db"
            ],
            [
                "458acd135652dfcd"
            ],
            [
                "7afc9f4073ea62d8"
            ]
        ]
    },
    {
        "id": "6659fa0df27415ae",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg1={payload:Number(Int2Float32((msg.payload.data[0]<<16) + msg.payload.data[1]).toFixed(2))};   \nvar msg2={payload:Number(Int2Float32((msg.payload.data[2]<<16) + msg.payload.data[3]).toFixed(2))};   \nvar msg3={payload:Number(Int2Float32((msg.payload.data[4]<<16) + msg.payload.data[5]).toFixed(2))};   \nvar msg4={payload:Number(Int2Float32((msg.payload.data[6]<<16) + msg.payload.data[7]).toFixed(2))};\nvar msg5={payload:Number(Int2Float32((msg.payload.data[8]<<16) + msg.payload.data[9]).toFixed(2))};\n\n\nreturn [msg1,msg2,msg3,msg4,msg5];\n\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 800,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "a75183e215a8f8b5",
        "type": "ui_button",
        "z": "d4dafd656daaf99a",
        "name": "",
        "group": "f6103ae08cc93582",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "INJECT CH1",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 130,
        "y": 120,
        "wires": [
            [
                "3616721c956c607d"
            ]
        ]
    },
    {
        "id": "236e19f113222d93",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 390,
        "y": 240,
        "wires": []
    },
    {
        "id": "b9ce6d9b24c244db",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "volt",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 310,
        "y": 320,
        "wires": [
            [
                "236e19f113222d93",
                "3f03a538cae06310"
            ],
            []
        ]
    },
    {
        "id": "3f03a538cae06310",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:Number((((msg.payload[0]<<16) + msg.payload[1])*0.1).toFixed(2))};   //A\nvar msg1={payload:Number((((msg.payload[2]<<16) + msg.payload[3])*0.1).toFixed(2))};   //A\nvar msg2={payload:Number((((msg.payload[4]<<16) + msg.payload[5])*0.1).toFixed(2))};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 320,
        "wires": [
            [
                "ecd1e2cabc5da012"
            ],
            [
                "9126cff33057ebf9"
            ],
            [
                "58a1873bfeb2e574",
                "71f8ab186494fc31"
            ]
        ]
    },
    {
        "id": "ecd1e2cabc5da012",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 280,
        "wires": []
    },
    {
        "id": "9126cff33057ebf9",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 320,
        "wires": []
    },
    {
        "id": "58a1873bfeb2e574",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 360,
        "wires": []
    },
    {
        "id": "d9363504416dbeeb",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 390,
        "y": 400,
        "wires": []
    },
    {
        "id": "458acd135652dfcd",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 310,
        "y": 480,
        "wires": [
            [
                "d9363504416dbeeb",
                "42ebcc7b95f40507"
            ],
            []
        ]
    },
    {
        "id": "42ebcc7b95f40507",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.1};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.1};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.1};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 480,
        "wires": [
            [
                "28df2e0f56d6630a"
            ],
            [
                "4058c00fb2f0bb82"
            ],
            [
                "b7d938c4d499decb",
                "793bd314c6afd8b6"
            ]
        ]
    },
    {
        "id": "28df2e0f56d6630a",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 440,
        "wires": []
    },
    {
        "id": "4058c00fb2f0bb82",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 480,
        "wires": []
    },
    {
        "id": "b7d938c4d499decb",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 730,
        "y": 520,
        "wires": []
    },
    {
        "id": "eeae92ea6b639bdf",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 370,
        "y": 560,
        "wires": []
    },
    {
        "id": "7afc9f4073ea62d8",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power / hour",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 310,
        "y": 640,
        "wires": [
            [
                "eeae92ea6b639bdf",
                "c142c2e3a8d672b6"
            ],
            []
        ]
    },
    {
        "id": "c142c2e3a8d672b6",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "msg.payload=Number(((\n    (msg.payload[0]<<48) +\n    (msg.payload[1]<<32) +\n    (msg.payload[2]<<16) +\n    msg.payload[3])*0.1).toFixed(2));  //A\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 640,
        "wires": [
            [
                "9150a2c967c0c9c8",
                "7624a79a2e1438e8",
                "605639c86985daf3"
            ]
        ]
    },
    {
        "id": "9150a2c967c0c9c8",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "e063e749d897f9e5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ENERGY IMPORT",
        "format": "{{msg.payload}} kWh",
        "layout": "row-spread",
        "className": "",
        "x": 750,
        "y": 640,
        "wires": []
    },
    {
        "id": "b72f9394f887b7fc",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM1-amp",
        "mode": "link",
        "links": [
            "e273c8352e193049"
        ],
        "x": 715,
        "y": 240,
        "wires": []
    },
    {
        "id": "71f8ab186494fc31",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM1-volt",
        "mode": "link",
        "links": [
            "3f0c7eaf81c06864"
        ],
        "x": 705,
        "y": 400,
        "wires": []
    },
    {
        "id": "793bd314c6afd8b6",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM1-kw",
        "mode": "link",
        "links": [
            "4ecbc2724b84ce57"
        ],
        "x": 695,
        "y": 560,
        "wires": []
    },
    {
        "id": "605639c86985daf3",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM1-kwh",
        "mode": "link",
        "links": [
            "ec9de39a3e43bb05"
        ],
        "x": 675,
        "y": 740,
        "wires": []
    },
    {
        "id": "7624a79a2e1438e8",
        "type": "debug",
        "z": "d4dafd656daaf99a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 700,
        "wires": []
    },
    {
        "id": "ef02103313f1dc44",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 1330,
        "y": 80,
        "wires": []
    },
    {
        "id": "52928ffb49a6863a",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "amp",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 1270,
        "y": 160,
        "wires": [
            [
                "ef02103313f1dc44",
                "efbd4c70a53ac5ae"
            ],
            []
        ]
    },
    {
        "id": "d9a31993b258b36b",
        "type": "inject",
        "z": "d4dafd656daaf99a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2",
        "payloadType": "num",
        "x": 1070,
        "y": 80,
        "wires": [
            [
                "2c74ff989cac3df2"
            ]
        ]
    },
    {
        "id": "efbd4c70a53ac5ae",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.001};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.001};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.001};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 160,
        "wires": [
            [
                "9029b9916fafc619"
            ],
            [
                "9277083e53e25308"
            ],
            [
                "ca22555b2ff5fb09",
                "a2bab2a2c9d82baf"
            ]
        ]
    },
    {
        "id": "9029b9916fafc619",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 1690,
        "y": 120,
        "wires": []
    },
    {
        "id": "9277083e53e25308",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 1690,
        "y": 160,
        "wires": []
    },
    {
        "id": "ca22555b2ff5fb09",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 1690,
        "y": 200,
        "wires": []
    },
    {
        "id": "247ad8736f801f1c",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "hart",
        "func": "var id=msg.payload;\n\n    var msg1 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 0 , \n    'quantity': 6 \n    })};\n    \n    var msg2 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 8 , \n    'quantity': 6 \n    })};\n    \n    var msg3 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 22 , \n    'quantity': 6 \n    })};\n    \n    var msg4 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 48 , \n    'quantity': 4 \n    })};\n \n    \nreturn [msg1,msg2,msg3,msg4];\n\n\n\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 180,
        "wires": [
            [
                "52928ffb49a6863a"
            ],
            [
                "bbaa3cc03aadd2ab"
            ],
            [
                "9d9e1ae213bbf159"
            ],
            [
                "746d19594bf60389"
            ]
        ]
    },
    {
        "id": "ebd6b9b7893aab6e",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg1={payload:Number(Int2Float32((msg.payload.data[0]<<16) + msg.payload.data[1]).toFixed(2))};   \nvar msg2={payload:Number(Int2Float32((msg.payload.data[2]<<16) + msg.payload.data[3]).toFixed(2))};   \nvar msg3={payload:Number(Int2Float32((msg.payload.data[4]<<16) + msg.payload.data[5]).toFixed(2))};   \nvar msg4={payload:Number(Int2Float32((msg.payload.data[6]<<16) + msg.payload.data[7]).toFixed(2))};\nvar msg5={payload:Number(Int2Float32((msg.payload.data[8]<<16) + msg.payload.data[9]).toFixed(2))};\n\n\nreturn [msg1,msg2,msg3,msg4,msg5];\n\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 980,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "2c74ff989cac3df2",
        "type": "ui_button",
        "z": "d4dafd656daaf99a",
        "name": "",
        "group": "f6103ae08cc93582",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "INJECT CH2",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1070,
        "y": 120,
        "wires": [
            [
                "247ad8736f801f1c"
            ]
        ]
    },
    {
        "id": "d7ed4c073dec7935",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 1330,
        "y": 240,
        "wires": []
    },
    {
        "id": "bbaa3cc03aadd2ab",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "volt",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 1250,
        "y": 320,
        "wires": [
            [
                "d7ed4c073dec7935",
                "d8e05ed38dc63752"
            ],
            []
        ]
    },
    {
        "id": "d8e05ed38dc63752",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:Number((((msg.payload[0]<<16) + msg.payload[1])*0.1).toFixed(2))};   //A\nvar msg1={payload:Number((((msg.payload[2]<<16) + msg.payload[3])*0.1).toFixed(2))};   //A\nvar msg2={payload:Number((((msg.payload[4]<<16) + msg.payload[5])*0.1).toFixed(2))};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 320,
        "wires": [
            [
                "86d29516b1bacc07"
            ],
            [
                "ecd359513f34bb57"
            ],
            [
                "956225a9125fdb2b",
                "edb46c2a55a13b8d"
            ]
        ]
    },
    {
        "id": "86d29516b1bacc07",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 280,
        "wires": []
    },
    {
        "id": "ecd359513f34bb57",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 320,
        "wires": []
    },
    {
        "id": "956225a9125fdb2b",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 360,
        "wires": []
    },
    {
        "id": "c65e0e0e9ebd6f78",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 1330,
        "y": 400,
        "wires": []
    },
    {
        "id": "9d9e1ae213bbf159",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 1250,
        "y": 480,
        "wires": [
            [
                "c65e0e0e9ebd6f78",
                "4b32ae219e79f8ae"
            ],
            []
        ]
    },
    {
        "id": "4b32ae219e79f8ae",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.1};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.1};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.1};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 480,
        "wires": [
            [
                "9f0d492eb036b3c8"
            ],
            [
                "8a109525e15b6586"
            ],
            [
                "759d58e754422e62",
                "9d9dc7e0948e1458"
            ]
        ]
    },
    {
        "id": "9f0d492eb036b3c8",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 440,
        "wires": []
    },
    {
        "id": "8a109525e15b6586",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 480,
        "wires": []
    },
    {
        "id": "759d58e754422e62",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 1670,
        "y": 520,
        "wires": []
    },
    {
        "id": "1acf1ac3d85ba5bf",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 1310,
        "y": 560,
        "wires": []
    },
    {
        "id": "746d19594bf60389",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power / hour",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 1250,
        "y": 640,
        "wires": [
            [
                "1acf1ac3d85ba5bf",
                "febd423b35d3d230"
            ],
            []
        ]
    },
    {
        "id": "febd423b35d3d230",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "msg.payload=Number(((\n    (msg.payload[0]<<48) +\n    (msg.payload[1]<<32) +\n    (msg.payload[2]<<16) +\n    msg.payload[3])*0.1).toFixed(2));  //A\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 640,
        "wires": [
            [
                "426a39f4f646ac4f",
                "f2b44b6803034cda",
                "52d57d4824f35843"
            ]
        ]
    },
    {
        "id": "426a39f4f646ac4f",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "e063e749d897f9e5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ENERGY IMPORT",
        "format": "{{msg.payload}} kWh",
        "layout": "row-spread",
        "className": "",
        "x": 1690,
        "y": 640,
        "wires": []
    },
    {
        "id": "a2bab2a2c9d82baf",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM2-amp",
        "mode": "link",
        "links": [
            "c4b630113635954d"
        ],
        "x": 1655,
        "y": 240,
        "wires": []
    },
    {
        "id": "edb46c2a55a13b8d",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM2-volt",
        "mode": "link",
        "links": [
            "5a3e6d391a5dd2d0"
        ],
        "x": 1645,
        "y": 400,
        "wires": []
    },
    {
        "id": "9d9dc7e0948e1458",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM2-kw",
        "mode": "link",
        "links": [
            "08a6f0fe5eb7018e"
        ],
        "x": 1635,
        "y": 560,
        "wires": []
    },
    {
        "id": "52d57d4824f35843",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM2-kwh",
        "mode": "link",
        "links": [
            "9fc854ff3a2b3e01"
        ],
        "x": 1615,
        "y": 740,
        "wires": []
    },
    {
        "id": "f2b44b6803034cda",
        "type": "debug",
        "z": "d4dafd656daaf99a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 700,
        "wires": []
    },
    {
        "id": "f4fb5a3f36044549",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 2250,
        "y": 80,
        "wires": []
    },
    {
        "id": "85dd61df98e2349f",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "amp",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 2190,
        "y": 160,
        "wires": [
            [
                "f4fb5a3f36044549",
                "a18e0a97b3e61622"
            ],
            []
        ]
    },
    {
        "id": "a72c7626fadbeb9b",
        "type": "inject",
        "z": "d4dafd656daaf99a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "600",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3",
        "payloadType": "num",
        "x": 1990,
        "y": 80,
        "wires": [
            [
                "04e3139ed958d125"
            ]
        ]
    },
    {
        "id": "a18e0a97b3e61622",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.001};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.001};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.001};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2440,
        "y": 160,
        "wires": [
            [
                "0defaace676fc86d"
            ],
            [
                "3e5676651a4f907b"
            ],
            [
                "ad904aaecd383b8a",
                "d97c07aea90f0b71"
            ]
        ]
    },
    {
        "id": "0defaace676fc86d",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 2610,
        "y": 120,
        "wires": []
    },
    {
        "id": "3e5676651a4f907b",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 2610,
        "y": 160,
        "wires": []
    },
    {
        "id": "ad904aaecd383b8a",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "7c76682efeda9319",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} A",
        "layout": "row-spread",
        "className": "",
        "x": 2610,
        "y": 200,
        "wires": []
    },
    {
        "id": "6f6125aeecda5892",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "hart",
        "func": "var id=msg.payload;\n\n    var msg1 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 0 , \n    'quantity': 6 \n    })};\n    \n    var msg2 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 8 , \n    'quantity': 6 \n    })};\n    \n    var msg3 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 22 , \n    'quantity': 6 \n    })};\n    \n    var msg4 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 48 , \n    'quantity': 4 \n    })};\n \n    \nreturn [msg1,msg2,msg3,msg4];\n\n\n\n",
        "outputs": 4,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1990,
        "y": 180,
        "wires": [
            [
                "85dd61df98e2349f"
            ],
            [
                "cf8038783f81b7d2"
            ],
            [
                "39d9d5b34ff9077a"
            ],
            [
                "17673afd7e12e88a"
            ]
        ]
    },
    {
        "id": "b182627d8899a15a",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg1={payload:Number(Int2Float32((msg.payload.data[0]<<16) + msg.payload.data[1]).toFixed(2))};   \nvar msg2={payload:Number(Int2Float32((msg.payload.data[2]<<16) + msg.payload.data[3]).toFixed(2))};   \nvar msg3={payload:Number(Int2Float32((msg.payload.data[4]<<16) + msg.payload.data[5]).toFixed(2))};   \nvar msg4={payload:Number(Int2Float32((msg.payload.data[6]<<16) + msg.payload.data[7]).toFixed(2))};\nvar msg5={payload:Number(Int2Float32((msg.payload.data[8]<<16) + msg.payload.data[9]).toFixed(2))};\n\n\nreturn [msg1,msg2,msg3,msg4,msg5];\n\n\nfunction Int2Float32(bytes) {\n    var sign = (bytes & 0x80000000) ? -1 : 1;\n    var exponent = ((bytes >> 23) & 0xFF) - 127;\n    var significand = (bytes & ~(-1 << 23));\n\n    if (exponent == 128) \n        return sign * ((significand) ? Number.NaN : Number.POSITIVE_INFINITY);\n\n    if (exponent == -127) {\n        if (significand === 0) return sign * 0.0;\n        exponent = -126;\n        significand /= (1 << 22);\n    } else significand = (significand | (1 << 23)) / (1 << 23);\n\n    return sign * significand * Math.pow(2, exponent);\n}",
        "outputs": 5,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2300,
        "y": 980,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "04e3139ed958d125",
        "type": "ui_button",
        "z": "d4dafd656daaf99a",
        "name": "",
        "group": "f6103ae08cc93582",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "INJECT CH3",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1990,
        "y": 120,
        "wires": [
            [
                "6f6125aeecda5892"
            ]
        ]
    },
    {
        "id": "f39f5419b01e45b2",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 2250,
        "y": 240,
        "wires": []
    },
    {
        "id": "cf8038783f81b7d2",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "volt",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 2170,
        "y": 320,
        "wires": [
            [
                "f39f5419b01e45b2",
                "5d4ce3db0fc25604"
            ],
            []
        ]
    },
    {
        "id": "5d4ce3db0fc25604",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:Number((((msg.payload[0]<<16) + msg.payload[1])*0.1).toFixed(2))};   //A\nvar msg1={payload:Number((((msg.payload[2]<<16) + msg.payload[3])*0.1).toFixed(2))};   //A\nvar msg2={payload:Number((((msg.payload[4]<<16) + msg.payload[5])*0.1).toFixed(2))};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 320,
        "wires": [
            [
                "dbcf403f55edd205"
            ],
            [
                "c7b051fdda3d1835"
            ],
            [
                "e4cb16a3e1456aaa",
                "68c71ba55c95772e"
            ]
        ]
    },
    {
        "id": "dbcf403f55edd205",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 280,
        "wires": []
    },
    {
        "id": "c7b051fdda3d1835",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 320,
        "wires": []
    },
    {
        "id": "e4cb16a3e1456aaa",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "af236e5eacede2f5",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} V",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 360,
        "wires": []
    },
    {
        "id": "501fd57be069d8b4",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 2250,
        "y": 400,
        "wires": []
    },
    {
        "id": "39d9d5b34ff9077a",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 2170,
        "y": 480,
        "wires": [
            [
                "501fd57be069d8b4",
                "cd99587a1eaf1e13"
            ],
            []
        ]
    },
    {
        "id": "cd99587a1eaf1e13",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "var msg0={payload:((msg.payload[0]<<16) + msg.payload[1])*0.1};   //A\nvar msg1={payload:((msg.payload[2]<<16) + msg.payload[3])*0.1};   //A\nvar msg2={payload:((msg.payload[4]<<16) + msg.payload[5])*0.1};   //A\n\n\n\nreturn [msg0,msg1,msg2];",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2420,
        "y": 480,
        "wires": [
            [
                "74816ebb07d4c85d"
            ],
            [
                "2dd7c048a4204ec9"
            ],
            [
                "bfebf1fa9ff883f8",
                "af6b4aa7d61b3ec8"
            ]
        ]
    },
    {
        "id": "74816ebb07d4c85d",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L1",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 440,
        "wires": []
    },
    {
        "id": "2dd7c048a4204ec9",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L2",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 480,
        "wires": []
    },
    {
        "id": "bfebf1fa9ff883f8",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "8c8a40928d19ad2e",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "L3",
        "format": "{{msg.payload}} kW",
        "layout": "row-spread",
        "className": "",
        "x": 2590,
        "y": 520,
        "wires": []
    },
    {
        "id": "ec3463ff380f3a33",
        "type": "modbus-response",
        "z": "d4dafd656daaf99a",
        "name": "",
        "registerShowMax": 20,
        "x": 2230,
        "y": 560,
        "wires": []
    },
    {
        "id": "17673afd7e12e88a",
        "type": "modbus-flex-getter",
        "z": "d4dafd656daaf99a",
        "name": "power / hour",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 2170,
        "y": 640,
        "wires": [
            [
                "ec3463ff380f3a33",
                "61f4fff99af17848"
            ],
            []
        ]
    },
    {
        "id": "61f4fff99af17848",
        "type": "function",
        "z": "d4dafd656daaf99a",
        "name": "",
        "func": "msg.payload=Number(((\n    (msg.payload[0]<<48) +\n    (msg.payload[1]<<32) +\n    (msg.payload[2]<<16) +\n    msg.payload[3])*0.1).toFixed(2));  //A\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2400,
        "y": 640,
        "wires": [
            [
                "45927621b0506e0d",
                "e43f0e88c2cd0f66",
                "1026c402dff812b9"
            ]
        ]
    },
    {
        "id": "45927621b0506e0d",
        "type": "ui_text",
        "z": "d4dafd656daaf99a",
        "group": "e063e749d897f9e5",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "ENERGY IMPORT",
        "format": "{{msg.payload}} kWh",
        "layout": "row-spread",
        "className": "",
        "x": 2610,
        "y": 640,
        "wires": []
    },
    {
        "id": "d97c07aea90f0b71",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM3-amp",
        "mode": "link",
        "links": [
            "ea8811873cf519df"
        ],
        "x": 2575,
        "y": 240,
        "wires": []
    },
    {
        "id": "68c71ba55c95772e",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM3-volt",
        "mode": "link",
        "links": [
            "326f13704a6b30ad"
        ],
        "x": 2565,
        "y": 400,
        "wires": []
    },
    {
        "id": "af6b4aa7d61b3ec8",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM3-kw",
        "mode": "link",
        "links": [
            "8df497d67c169409"
        ],
        "x": 2555,
        "y": 560,
        "wires": []
    },
    {
        "id": "1026c402dff812b9",
        "type": "link out",
        "z": "d4dafd656daaf99a",
        "name": "EM3-kwh",
        "mode": "link",
        "links": [
            "a9e133e0c7ca1f9b"
        ],
        "x": 2535,
        "y": 740,
        "wires": []
    },
    {
        "id": "e43f0e88c2cd0f66",
        "type": "debug",
        "z": "d4dafd656daaf99a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2630,
        "y": 700,
        "wires": []
    },
    {
        "id": "5d8d569e3fe48a6c",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH1kwh",
        "mode": "link",
        "links": [
            "2848f49ba246f648",
            "ae5bd28ca8fc28c1"
        ],
        "x": 1585,
        "y": 440,
        "wires": []
    },
    {
        "id": "4a58a5cc25f896e1",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1090,
        "y": 440,
        "wires": [
            [
                "4039da1829a374fe"
            ]
        ]
    },
    {
        "id": "4039da1829a374fe",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1240,
        "y": 440,
        "wires": [
            [
                "0456d68347697965"
            ]
        ]
    },
    {
        "id": "0456d68347697965",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no102",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 440,
        "wires": [
            [
                "5d8d569e3fe48a6c"
            ]
        ]
    },
    {
        "id": "562aaff203d91ebe",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "067249e53db52981",
            "44157acea459cae7"
        ],
        "x": 995,
        "y": 360,
        "wires": [
            [
                "4a58a5cc25f896e1"
            ]
        ]
    },
    {
        "id": "a5386e525dd53cd8",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kwh",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 440,
        "wires": [
            [
                "4a58a5cc25f896e1",
                "6d7f5cc8c70b5fd6"
            ]
        ]
    },
    {
        "id": "e4f8131341584461",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KWH",
        "info": "",
        "x": 480,
        "y": 380,
        "wires": []
    },
    {
        "id": "9078182edfe5d0bb",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH1kw",
        "mode": "link",
        "links": [
            "79c1966c0b48df18"
        ],
        "x": 1605,
        "y": 760,
        "wires": []
    },
    {
        "id": "9bcf2e52d6430f0c",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1080,
        "y": 760,
        "wires": [
            [
                "68e4a49e4542d848"
            ]
        ]
    },
    {
        "id": "68e4a49e4542d848",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1230,
        "y": 760,
        "wires": [
            [
                "6c9529ab12dc5824"
            ]
        ]
    },
    {
        "id": "6c9529ab12dc5824",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no104",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 760,
        "wires": [
            [
                "9078182edfe5d0bb"
            ]
        ]
    },
    {
        "id": "9c287b18dcaef706",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kw",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 760,
        "wires": [
            [
                "9bcf2e52d6430f0c"
            ]
        ]
    },
    {
        "id": "ac0c5a0d46b09047",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "067249e53db52981",
            "44157acea459cae7"
        ],
        "x": 985,
        "y": 680,
        "wires": [
            [
                "9bcf2e52d6430f0c"
            ]
        ]
    },
    {
        "id": "6ff844e091d994d1",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH1voltage",
        "mode": "link",
        "links": [
            "85b726bc2d835fb0",
            "9b9a6b8de6cd4839"
        ],
        "x": 1615,
        "y": 940,
        "wires": []
    },
    {
        "id": "9083138378f60fca",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1090,
        "y": 940,
        "wires": [
            [
                "20fa65277a8fef45"
            ]
        ]
    },
    {
        "id": "20fa65277a8fef45",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1240,
        "y": 940,
        "wires": [
            [
                "1baa249c323b7765"
            ]
        ]
    },
    {
        "id": "1baa249c323b7765",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no105",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 940,
        "wires": [
            [
                "6ff844e091d994d1"
            ]
        ]
    },
    {
        "id": "87e69d592c2e9791",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "volt",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 940,
        "wires": [
            [
                "9083138378f60fca"
            ]
        ]
    },
    {
        "id": "cdfe43749f6d711b",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "067249e53db52981",
            "44157acea459cae7"
        ],
        "x": 995,
        "y": 860,
        "wires": [
            [
                "9083138378f60fca"
            ]
        ]
    },
    {
        "id": "b755595068d56cc7",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KW",
        "info": "",
        "x": 460,
        "y": 720,
        "wires": []
    },
    {
        "id": "908d28b2232ea4f1",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: VOLTAGE",
        "info": "",
        "x": 450,
        "y": 880,
        "wires": []
    },
    {
        "id": "4dc49d7d2c4d0b96",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH1current",
        "mode": "link",
        "links": [
            "1f76f7cce5fe5923",
            "5c5e200fd41e9d60"
        ],
        "x": 1615,
        "y": 1120,
        "wires": []
    },
    {
        "id": "d0fbfa3c95f61367",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1090,
        "y": 1120,
        "wires": [
            [
                "5d042835c7823c37"
            ]
        ]
    },
    {
        "id": "5d042835c7823c37",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1240,
        "y": 1120,
        "wires": [
            [
                "01a5a61fd57f71e0"
            ]
        ]
    },
    {
        "id": "01a5a61fd57f71e0",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no106",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 1120,
        "wires": [
            [
                "4dc49d7d2c4d0b96"
            ]
        ]
    },
    {
        "id": "f60a600949c37dd6",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "current",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 1120,
        "wires": [
            [
                "d0fbfa3c95f61367"
            ]
        ]
    },
    {
        "id": "6e1e1326d147bef0",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "067249e53db52981",
            "44157acea459cae7"
        ],
        "x": 995,
        "y": 1040,
        "wires": [
            [
                "d0fbfa3c95f61367"
            ]
        ]
    },
    {
        "id": "7329eda42af790a6",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: CURRENT",
        "info": "",
        "x": 450,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a9371a92b832a546",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "MACHINE: EM CH1",
        "info": "",
        "x": 370,
        "y": 320,
        "wires": []
    },
    {
        "id": "33e059d9438fb80b",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH2kwh",
        "mode": "link",
        "links": [
            "99e97e0782d7d3a3"
        ],
        "x": 3175,
        "y": 440,
        "wires": []
    },
    {
        "id": "d87f92d9ea185156",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 2680,
        "y": 440,
        "wires": [
            [
                "5878daef42089640"
            ]
        ]
    },
    {
        "id": "5878daef42089640",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2830,
        "y": 440,
        "wires": [
            [
                "3f4085a6dacb78cd"
            ]
        ]
    },
    {
        "id": "3f4085a6dacb78cd",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no107",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3040,
        "y": 440,
        "wires": [
            [
                "33e059d9438fb80b"
            ]
        ]
    },
    {
        "id": "1235e60ea1715f10",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "86b3643360967b19"
        ],
        "x": 2585,
        "y": 360,
        "wires": [
            [
                "d87f92d9ea185156"
            ]
        ]
    },
    {
        "id": "d4b5954aa54a35f5",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kwh",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2460,
        "y": 440,
        "wires": [
            [
                "d87f92d9ea185156",
                "d637e17799447fb8"
            ]
        ]
    },
    {
        "id": "be76875ffb098183",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KWH",
        "info": "",
        "x": 2060,
        "y": 380,
        "wires": []
    },
    {
        "id": "d30a27ed1903cb97",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH2kw",
        "mode": "link",
        "links": [
            "416152605cc6af2d"
        ],
        "x": 3185,
        "y": 780,
        "wires": []
    },
    {
        "id": "25029e5482d26a46",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 2690,
        "y": 780,
        "wires": [
            [
                "3866cf8e7896b025"
            ]
        ]
    },
    {
        "id": "3866cf8e7896b025",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2840,
        "y": 780,
        "wires": [
            [
                "081faf22744986a4"
            ]
        ]
    },
    {
        "id": "081faf22744986a4",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no109",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3050,
        "y": 780,
        "wires": [
            [
                "d30a27ed1903cb97"
            ]
        ]
    },
    {
        "id": "d13fa47ed8fec96e",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kw",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2470,
        "y": 780,
        "wires": [
            [
                "25029e5482d26a46"
            ]
        ]
    },
    {
        "id": "79224236374caf4d",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "86b3643360967b19"
        ],
        "x": 2595,
        "y": 700,
        "wires": [
            [
                "25029e5482d26a46"
            ]
        ]
    },
    {
        "id": "8661eb1f1796b1dd",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH2voltage",
        "mode": "link",
        "links": [
            "2e27a50cfda6e462"
        ],
        "x": 3195,
        "y": 960,
        "wires": []
    },
    {
        "id": "116d3dedcdb6830f",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 2700,
        "y": 960,
        "wires": [
            [
                "e2311087ff4074f1"
            ]
        ]
    },
    {
        "id": "e2311087ff4074f1",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2850,
        "y": 960,
        "wires": [
            [
                "abb08b63dfb032b9"
            ]
        ]
    },
    {
        "id": "abb08b63dfb032b9",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no110",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3060,
        "y": 960,
        "wires": [
            [
                "8661eb1f1796b1dd"
            ]
        ]
    },
    {
        "id": "8915b634c2c526f1",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "volt",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2480,
        "y": 960,
        "wires": [
            [
                "116d3dedcdb6830f"
            ]
        ]
    },
    {
        "id": "f7dba44b67cdbe72",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "86b3643360967b19"
        ],
        "x": 2605,
        "y": 880,
        "wires": [
            [
                "116d3dedcdb6830f"
            ]
        ]
    },
    {
        "id": "17c5474fe15b5748",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KW",
        "info": "",
        "x": 2060,
        "y": 740,
        "wires": []
    },
    {
        "id": "5d9da774129d446b",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: VOLTAGE",
        "info": "",
        "x": 2050,
        "y": 900,
        "wires": []
    },
    {
        "id": "831dd45cbfd1f085",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH2current",
        "mode": "link",
        "links": [
            "7409888da2454854"
        ],
        "x": 3195,
        "y": 1140,
        "wires": []
    },
    {
        "id": "0a33f2620d15db43",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 2700,
        "y": 1140,
        "wires": [
            [
                "0c811e3328d808e6"
            ]
        ]
    },
    {
        "id": "0c811e3328d808e6",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2850,
        "y": 1140,
        "wires": [
            [
                "e4418bc02acc7520"
            ]
        ]
    },
    {
        "id": "e4418bc02acc7520",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no111",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3060,
        "y": 1140,
        "wires": [
            [
                "831dd45cbfd1f085"
            ]
        ]
    },
    {
        "id": "cc7c66eb91ba3608",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "current",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2490,
        "y": 1140,
        "wires": [
            [
                "0a33f2620d15db43"
            ]
        ]
    },
    {
        "id": "a379eee55ee2d791",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "86b3643360967b19"
        ],
        "x": 2605,
        "y": 1060,
        "wires": [
            [
                "0a33f2620d15db43"
            ]
        ]
    },
    {
        "id": "be1653be6c55d6ba",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: CURRENT",
        "info": "",
        "x": 2050,
        "y": 1080,
        "wires": []
    },
    {
        "id": "47f1b9756e3fe96c",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "MACHINE: EM CH2",
        "info": "",
        "x": 1950,
        "y": 320,
        "wires": []
    },
    {
        "id": "79d53278cde392e1",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2420,
        "y": 140,
        "wires": [
            [
                "86b3643360967b19"
            ]
        ]
    },
    {
        "id": "86b3643360967b19",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "RST MSG CH",
        "mode": "link",
        "links": [
            "07b6beb934279ca0",
            "1235e60ea1715f10",
            "79224236374caf4d",
            "a379eee55ee2d791",
            "f7dba44b67cdbe72"
        ],
        "x": 2595,
        "y": 140,
        "wires": []
    },
    {
        "id": "8fcb29a6e4852fd4",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH3kwh",
        "mode": "link",
        "links": [
            "ae5bd28ca8fc28c1"
        ],
        "x": 4675,
        "y": 440,
        "wires": []
    },
    {
        "id": "1be7a7b70d9f92f6",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 4180,
        "y": 440,
        "wires": [
            [
                "c6bd35a3afa784de"
            ]
        ]
    },
    {
        "id": "c6bd35a3afa784de",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4330,
        "y": 440,
        "wires": [
            [
                "7a6de37a96a9a927"
            ]
        ]
    },
    {
        "id": "7a6de37a96a9a927",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no112",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4540,
        "y": 440,
        "wires": [
            [
                "8fcb29a6e4852fd4"
            ]
        ]
    },
    {
        "id": "66991576cfa62f28",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "19f8b6ad568a34aa"
        ],
        "x": 4085,
        "y": 360,
        "wires": [
            [
                "1be7a7b70d9f92f6"
            ]
        ]
    },
    {
        "id": "08e35ec326d894e5",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kwh",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3990,
        "y": 440,
        "wires": [
            [
                "1be7a7b70d9f92f6",
                "e0885dd21b52aef0"
            ]
        ]
    },
    {
        "id": "9328530b8d36484f",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KWH",
        "info": "",
        "x": 3600,
        "y": 380,
        "wires": []
    },
    {
        "id": "77a4827b44e9345c",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH3kw",
        "mode": "link",
        "links": [
            "e63fa6364b17e8d2"
        ],
        "x": 4675,
        "y": 780,
        "wires": []
    },
    {
        "id": "fab9895448623dc6",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 4180,
        "y": 780,
        "wires": [
            [
                "032cdd0f8b7a655e"
            ]
        ]
    },
    {
        "id": "032cdd0f8b7a655e",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4330,
        "y": 780,
        "wires": [
            [
                "aff8ef29a2197e2b"
            ]
        ]
    },
    {
        "id": "aff8ef29a2197e2b",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no114",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4540,
        "y": 780,
        "wires": [
            [
                "77a4827b44e9345c"
            ]
        ]
    },
    {
        "id": "3f04e5ccacea9bed",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "kw",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3990,
        "y": 780,
        "wires": [
            [
                "fab9895448623dc6"
            ]
        ]
    },
    {
        "id": "817bc8f0930b0a07",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "19f8b6ad568a34aa"
        ],
        "x": 4085,
        "y": 700,
        "wires": [
            [
                "fab9895448623dc6"
            ]
        ]
    },
    {
        "id": "5613b7d712307bdc",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH3voltage",
        "mode": "link",
        "links": [
            "9b9a6b8de6cd4839"
        ],
        "x": 4685,
        "y": 960,
        "wires": []
    },
    {
        "id": "6b349ccfceef601f",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 4190,
        "y": 960,
        "wires": [
            [
                "19695203d5d2cfd6"
            ]
        ]
    },
    {
        "id": "19695203d5d2cfd6",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4340,
        "y": 960,
        "wires": [
            [
                "c84d9bba827b75bc"
            ]
        ]
    },
    {
        "id": "c84d9bba827b75bc",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no115",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4550,
        "y": 960,
        "wires": [
            [
                "5613b7d712307bdc"
            ]
        ]
    },
    {
        "id": "7a676b72aa534f28",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "volt",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4010,
        "y": 960,
        "wires": [
            [
                "6b349ccfceef601f"
            ]
        ]
    },
    {
        "id": "a522a8aafd19ef16",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "19f8b6ad568a34aa"
        ],
        "x": 4095,
        "y": 880,
        "wires": [
            [
                "6b349ccfceef601f"
            ]
        ]
    },
    {
        "id": "3048bf526e1cbaf4",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: POWER KW",
        "info": "",
        "x": 3590,
        "y": 740,
        "wires": []
    },
    {
        "id": "f073e0cdfc5552d2",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: VOLTAGE",
        "info": "",
        "x": 3580,
        "y": 900,
        "wires": []
    },
    {
        "id": "03b2b4c56f15f545",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH3current",
        "mode": "link",
        "links": [
            "1f76f7cce5fe5923"
        ],
        "x": 4685,
        "y": 1140,
        "wires": []
    },
    {
        "id": "c2d9b1abb2b92793",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 4200,
        "y": 1140,
        "wires": [
            [
                "d67ea443888c131a"
            ]
        ]
    },
    {
        "id": "d67ea443888c131a",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4350,
        "y": 1140,
        "wires": [
            [
                "fafbc31fb94d9031"
            ]
        ]
    },
    {
        "id": "fafbc31fb94d9031",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no116",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4540,
        "y": 1140,
        "wires": [
            [
                "03b2b4c56f15f545"
            ]
        ]
    },
    {
        "id": "9741e1bcf795b5c3",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "current",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4020,
        "y": 1140,
        "wires": [
            [
                "c2d9b1abb2b92793"
            ]
        ]
    },
    {
        "id": "9f56d123eee52450",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "19f8b6ad568a34aa"
        ],
        "x": 4095,
        "y": 1060,
        "wires": [
            [
                "c2d9b1abb2b92793"
            ]
        ]
    },
    {
        "id": "325e44623626a6f1",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: CURRENT",
        "info": "",
        "x": 3580,
        "y": 1080,
        "wires": []
    },
    {
        "id": "4984af716d1da43b",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "MACHINE: EM CH3",
        "info": "",
        "x": 3490,
        "y": 320,
        "wires": []
    },
    {
        "id": "ab10782984b0f177",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 400,
        "y": 440,
        "wires": [
            [
                "ecbdaec77831dd58"
            ]
        ]
    },
    {
        "id": "4c4692156d9d256e",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 760,
        "wires": [
            [
                "619b3cc4011e39be"
            ]
        ]
    },
    {
        "id": "022833e6011a9d45",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 940,
        "wires": [
            [
                "9d959166eaed836e"
            ]
        ]
    },
    {
        "id": "5cd6bac1b6c01c8d",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 1120,
        "wires": [
            [
                "522b556a8d0308f8"
            ]
        ]
    },
    {
        "id": "ea9933371dbf7ef7",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 3540,
        "y": 1140,
        "wires": [
            [
                "a4fae695d4d16e5a"
            ]
        ]
    },
    {
        "id": "db28773e9a1af901",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2000,
        "y": 440,
        "wires": [
            [
                "7d1a3249e4a81d77"
            ]
        ]
    },
    {
        "id": "b91ac3a05ed7e588",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2000,
        "y": 780,
        "wires": [
            [
                "af7b12abaf786fbe"
            ]
        ]
    },
    {
        "id": "7871e41cbf1cceb6",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2020,
        "y": 960,
        "wires": [
            [
                "a8267c083804933e"
            ]
        ]
    },
    {
        "id": "49dbc1bc1a20f02a",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 2020,
        "y": 1140,
        "wires": [
            [
                "13ee6b616b84688c"
            ]
        ]
    },
    {
        "id": "438f987ce14ef9f9",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 3530,
        "y": 440,
        "wires": [
            [
                "c0f8331f74b442ae"
            ]
        ]
    },
    {
        "id": "88ce54e0aec4307a",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 3520,
        "y": 780,
        "wires": [
            [
                "eb5f3fa56721ecc7"
            ]
        ]
    },
    {
        "id": "da3240a4bc5cef20",
        "type": "delay",
        "z": "d579ed5898a52b4f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 3540,
        "y": 960,
        "wires": [
            [
                "0c03808bc322a024"
            ]
        ]
    },
    {
        "id": "17601489a6463ec1",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "289.12",
        "payloadType": "num",
        "x": 3530,
        "y": 1200,
        "wires": [
            [
                "a4fae695d4d16e5a"
            ]
        ]
    },
    {
        "id": "1c0ee282bb8e7e74",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH1rth",
        "mode": "link",
        "links": [
            "67f163ed7d26e703"
        ],
        "x": 1605,
        "y": 600,
        "wires": []
    },
    {
        "id": "b570c442215aacc9",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1080,
        "y": 600,
        "wires": [
            [
                "02b0dfe4718d49e2"
            ]
        ]
    },
    {
        "id": "02b0dfe4718d49e2",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1230,
        "y": 600,
        "wires": [
            [
                "3ef4d92d2e414337"
            ]
        ]
    },
    {
        "id": "3ef4d92d2e414337",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no103",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1440,
        "y": 600,
        "wires": [
            [
                "1c0ee282bb8e7e74"
            ]
        ]
    },
    {
        "id": "fe605c68c1779981",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rth",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 600,
        "wires": [
            [
                "b570c442215aacc9"
            ]
        ]
    },
    {
        "id": "cf5d2426e9185d29",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "067249e53db52981",
            "44157acea459cae7"
        ],
        "x": 985,
        "y": 520,
        "wires": [
            [
                "b570c442215aacc9"
            ]
        ]
    },
    {
        "id": "d26ec998beaf092b",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: RTH",
        "info": "",
        "x": 390,
        "y": 540,
        "wires": []
    },
    {
        "id": "a9cdc874da48dbe1",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH2rth",
        "mode": "link",
        "links": [
            "1d46a8b97c2b61fe"
        ],
        "x": 3195,
        "y": 600,
        "wires": []
    },
    {
        "id": "de34dc66245ec98f",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 2700,
        "y": 600,
        "wires": [
            [
                "3bc5a9cb2adac9b1"
            ]
        ]
    },
    {
        "id": "3bc5a9cb2adac9b1",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2850,
        "y": 600,
        "wires": [
            [
                "e849a756cf5a1286"
            ]
        ]
    },
    {
        "id": "e849a756cf5a1286",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no108",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3060,
        "y": 600,
        "wires": [
            [
                "a9cdc874da48dbe1"
            ]
        ]
    },
    {
        "id": "5bd730c241b5e875",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rth",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2480,
        "y": 600,
        "wires": [
            [
                "de34dc66245ec98f"
            ]
        ]
    },
    {
        "id": "07b6beb934279ca0",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "86b3643360967b19"
        ],
        "x": 2605,
        "y": 520,
        "wires": [
            [
                "de34dc66245ec98f"
            ]
        ]
    },
    {
        "id": "e05ebcd71f3f6238",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: RTH",
        "info": "",
        "x": 1950,
        "y": 540,
        "wires": []
    },
    {
        "id": "4d12c0a8818617e3",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "CH3rth",
        "mode": "link",
        "links": [
            "bebc84c971c9071b"
        ],
        "x": 4675,
        "y": 600,
        "wires": []
    },
    {
        "id": "cede2a263fd80d22",
        "type": "counter",
        "z": "d579ed5898a52b4f",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 4180,
        "y": 600,
        "wires": [
            [
                "b7c4969d8d33923a"
            ]
        ]
    },
    {
        "id": "b7c4969d8d33923a",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 4330,
        "y": 600,
        "wires": [
            [
                "77a26e7dd6ca2220"
            ]
        ]
    },
    {
        "id": "77a26e7dd6ca2220",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no113",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4540,
        "y": 600,
        "wires": [
            [
                "4d12c0a8818617e3"
            ]
        ]
    },
    {
        "id": "e1fcf6c84a7906fb",
        "type": "change",
        "z": "d579ed5898a52b4f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rth",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3990,
        "y": 600,
        "wires": [
            [
                "cede2a263fd80d22"
            ]
        ]
    },
    {
        "id": "ed1604b79e54dd0d",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "19f8b6ad568a34aa"
        ],
        "x": 4085,
        "y": 520,
        "wires": [
            [
                "cede2a263fd80d22"
            ]
        ]
    },
    {
        "id": "ea673be80d052ab2",
        "type": "comment",
        "z": "d579ed5898a52b4f",
        "name": "PARAMETER: RTH",
        "info": "",
        "x": 3560,
        "y": 560,
        "wires": []
    },
    {
        "id": "ec9de39a3e43bb05",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "605639c86985daf3"
        ],
        "x": 235,
        "y": 440,
        "wires": [
            [
                "ab10782984b0f177"
            ]
        ]
    },
    {
        "id": "4ecbc2724b84ce57",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "793bd314c6afd8b6"
        ],
        "x": 205,
        "y": 760,
        "wires": [
            [
                "4c4692156d9d256e"
            ]
        ]
    },
    {
        "id": "3f0c7eaf81c06864",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "71f8ab186494fc31"
        ],
        "x": 225,
        "y": 940,
        "wires": [
            [
                "022833e6011a9d45"
            ]
        ]
    },
    {
        "id": "e273c8352e193049",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "b72f9394f887b7fc"
        ],
        "x": 215,
        "y": 1120,
        "wires": [
            [
                "5cd6bac1b6c01c8d"
            ]
        ]
    },
    {
        "id": "9fc854ff3a2b3e01",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "52d57d4824f35843"
        ],
        "x": 1855,
        "y": 440,
        "wires": [
            [
                "db28773e9a1af901"
            ]
        ]
    },
    {
        "id": "08a6f0fe5eb7018e",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "9d9dc7e0948e1458"
        ],
        "x": 1845,
        "y": 780,
        "wires": [
            [
                "b91ac3a05ed7e588"
            ]
        ]
    },
    {
        "id": "5a3e6d391a5dd2d0",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "edb46c2a55a13b8d"
        ],
        "x": 1855,
        "y": 960,
        "wires": [
            [
                "7871e41cbf1cceb6"
            ]
        ]
    },
    {
        "id": "c4b630113635954d",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "a2bab2a2c9d82baf"
        ],
        "x": 1855,
        "y": 1140,
        "wires": [
            [
                "49dbc1bc1a20f02a"
            ]
        ]
    },
    {
        "id": "a9e133e0c7ca1f9b",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "1026c402dff812b9"
        ],
        "x": 3365,
        "y": 440,
        "wires": [
            [
                "438f987ce14ef9f9"
            ]
        ]
    },
    {
        "id": "8df497d67c169409",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "af6b4aa7d61b3ec8"
        ],
        "x": 3355,
        "y": 780,
        "wires": [
            [
                "88ce54e0aec4307a"
            ]
        ]
    },
    {
        "id": "326f13704a6b30ad",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "68c71ba55c95772e"
        ],
        "x": 3365,
        "y": 960,
        "wires": [
            [
                "da3240a4bc5cef20"
            ]
        ]
    },
    {
        "id": "ea8811873cf519df",
        "type": "link in",
        "z": "d579ed5898a52b4f",
        "name": "",
        "links": [
            "d97c07aea90f0b71"
        ],
        "x": 3355,
        "y": 1140,
        "wires": [
            [
                "ea9933371dbf7ef7"
            ]
        ]
    },
    {
        "id": "01321896f98e01e1",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 780,
        "y": 160,
        "wires": [
            [
                "44157acea459cae7"
            ]
        ]
    },
    {
        "id": "44157acea459cae7",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "RST MSG CH",
        "mode": "link",
        "links": [
            "562aaff203d91ebe",
            "6e1e1326d147bef0",
            "ac0c5a0d46b09047",
            "cdfe43749f6d711b",
            "cf5d2426e9185d29"
        ],
        "x": 955,
        "y": 160,
        "wires": []
    },
    {
        "id": "5c21c8c3026e7596",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 3840,
        "y": 160,
        "wires": [
            [
                "19f8b6ad568a34aa"
            ]
        ]
    },
    {
        "id": "19f8b6ad568a34aa",
        "type": "link out",
        "z": "d579ed5898a52b4f",
        "name": "RST MSG CH",
        "mode": "link",
        "links": [
            "66991576cfa62f28",
            "817bc8f0930b0a07",
            "9f56d123eee52450",
            "a522a8aafd19ef16",
            "ed1604b79e54dd0d"
        ],
        "x": 4015,
        "y": 160,
        "wires": []
    },
    {
        "id": "82727bde52a70e81",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 600,
        "wires": [
            [
                "a9acf3542eef70d0"
            ]
        ]
    },
    {
        "id": "619b3cc4011e39be",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 760,
        "wires": [
            [
                "ca598b830741c844"
            ]
        ]
    },
    {
        "id": "9d959166eaed836e",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 940,
        "wires": [
            [
                "ca995b5e31fd1658"
            ]
        ]
    },
    {
        "id": "522b556a8d0308f8",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 1120,
        "wires": [
            [
                "71bee001569d7756"
            ]
        ]
    },
    {
        "id": "7d1a3249e4a81d77",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2170,
        "y": 440,
        "wires": [
            [
                "c7e92733f8f6c3fc"
            ]
        ]
    },
    {
        "id": "fcd4a950dc28cb79",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2170,
        "y": 600,
        "wires": [
            [
                "6a958251255f0bdd"
            ]
        ]
    },
    {
        "id": "af7b12abaf786fbe",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2170,
        "y": 780,
        "wires": [
            [
                "0d6e9e6ad85ff70b"
            ]
        ]
    },
    {
        "id": "a8267c083804933e",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2190,
        "y": 960,
        "wires": [
            [
                "f26fc4a9568a6c3f"
            ]
        ]
    },
    {
        "id": "13ee6b616b84688c",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2190,
        "y": 1140,
        "wires": [
            [
                "924ab88c511e457c"
            ]
        ]
    },
    {
        "id": "c0f8331f74b442ae",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3690,
        "y": 440,
        "wires": [
            [
                "e52659c9b4a08bc3"
            ]
        ]
    },
    {
        "id": "90fefb1879fb9ccb",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3690,
        "y": 600,
        "wires": [
            [
                "233dd363de46aac6"
            ]
        ]
    },
    {
        "id": "eb5f3fa56721ecc7",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3690,
        "y": 780,
        "wires": [
            [
                "7f754ac43ab4b6d3"
            ]
        ]
    },
    {
        "id": "0c03808bc322a024",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3710,
        "y": 960,
        "wires": [
            [
                "12b09fed2351ec35"
            ]
        ]
    },
    {
        "id": "a4fae695d4d16e5a",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3710,
        "y": 1140,
        "wires": [
            [
                "0dcbfd400b9fa7fe"
            ]
        ]
    },
    {
        "id": "664a18d14868d9a3",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11",
        "payloadType": "num",
        "x": 2250,
        "y": 680,
        "wires": [
            [
                "d4b5954aa54a35f5",
                "5bd730c241b5e875",
                "d13fa47ed8fec96e",
                "8915b634c2c526f1",
                "cc7c66eb91ba3608"
            ]
        ]
    },
    {
        "id": "59ae5dc7bf3bcde5",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 3750,
        "y": 680,
        "wires": [
            [
                "08e35ec326d894e5",
                "e1fcf6c84a7906fb",
                "3f04e5ccacea9bed",
                "7a676b72aa534f28",
                "9741e1bcf795b5c3"
            ]
        ]
    },
    {
        "id": "348042974465f382",
        "type": "inject",
        "z": "d579ed5898a52b4f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "65420.7",
        "payloadType": "num",
        "x": 620,
        "y": 500,
        "wires": [
            [
                "a5386e525dd53cd8"
            ]
        ]
    },
    {
        "id": "6d7f5cc8c70b5fd6",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "kwh to rth",
        "func": "\nmsg.payload = msg.kwh * 0.2843451361;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 600,
        "wires": [
            [
                "86a7c7b4776b8fa8",
                "2d752147c29f9c4d"
            ]
        ]
    },
    {
        "id": "86a7c7b4776b8fa8",
        "type": "debug",
        "z": "d579ed5898a52b4f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 660,
        "wires": []
    },
    {
        "id": "d637e17799447fb8",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "kwh to rth",
        "func": "\nmsg.payload = msg.kwh * 0.2843451361;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1860,
        "y": 600,
        "wires": [
            [
                "7004e69277c3e6f4"
            ]
        ]
    },
    {
        "id": "e0885dd21b52aef0",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "kwh to rth",
        "func": "\nmsg.payload = msg.kwh * 0.2843451361;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3380,
        "y": 600,
        "wires": [
            [
                "029f80b6d7c2fdcb"
            ]
        ]
    },
    {
        "id": "2d752147c29f9c4d",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "",
        "func": "// Format to 2 decimal places and convert back to number\nmsg.payload = Number(convertedNumber.toFixed(1));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 600,
        "wires": [
            [
                "82727bde52a70e81"
            ]
        ]
    },
    {
        "id": "7004e69277c3e6f4",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "",
        "func": "// Format to 2 decimal places and convert back to number\nmsg.payload = Number(convertedNumber.toFixed(1));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 600,
        "wires": [
            [
                "fcd4a950dc28cb79"
            ]
        ]
    },
    {
        "id": "029f80b6d7c2fdcb",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "",
        "func": "// Format to 2 decimal places and convert back to number\nmsg.payload = Number(convertedNumber.toFixed(1));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3540,
        "y": 600,
        "wires": [
            [
                "90fefb1879fb9ccb"
            ]
        ]
    },
    {
        "id": "2a18a9e6dcb48a1b",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 440,
        "wires": [
            [
                "a5386e525dd53cd8"
            ]
        ]
    },
    {
        "id": "ecbdaec77831dd58",
        "type": "switch",
        "z": "d579ed5898a52b4f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 440,
        "wires": [
            [
                "2a18a9e6dcb48a1b"
            ]
        ]
    },
    {
        "id": "a9acf3542eef70d0",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 600,
        "wires": [
            [
                "fe605c68c1779981"
            ]
        ]
    },
    {
        "id": "ca598b830741c844",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 760,
        "wires": [
            [
                "9c287b18dcaef706"
            ]
        ]
    },
    {
        "id": "ca995b5e31fd1658",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 940,
        "wires": [
            [
                "87e69d592c2e9791"
            ]
        ]
    },
    {
        "id": "71bee001569d7756",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 1120,
        "wires": [
            [
                "f60a600949c37dd6"
            ]
        ]
    },
    {
        "id": "c7e92733f8f6c3fc",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 440,
        "wires": [
            [
                "d4b5954aa54a35f5"
            ]
        ]
    },
    {
        "id": "6a958251255f0bdd",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 600,
        "wires": [
            [
                "5bd730c241b5e875"
            ]
        ]
    },
    {
        "id": "0d6e9e6ad85ff70b",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2310,
        "y": 780,
        "wires": [
            [
                "d13fa47ed8fec96e"
            ]
        ]
    },
    {
        "id": "f26fc4a9568a6c3f",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2330,
        "y": 960,
        "wires": [
            [
                "8915b634c2c526f1"
            ]
        ]
    },
    {
        "id": "924ab88c511e457c",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2330,
        "y": 1140,
        "wires": [
            [
                "cc7c66eb91ba3608"
            ]
        ]
    },
    {
        "id": "0dcbfd400b9fa7fe",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3850,
        "y": 1140,
        "wires": [
            [
                "9741e1bcf795b5c3"
            ]
        ]
    },
    {
        "id": "12b09fed2351ec35",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3850,
        "y": 960,
        "wires": [
            [
                "7a676b72aa534f28"
            ]
        ]
    },
    {
        "id": "7f754ac43ab4b6d3",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3830,
        "y": 780,
        "wires": [
            [
                "3f04e5ccacea9bed"
            ]
        ]
    },
    {
        "id": "233dd363de46aac6",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3830,
        "y": 600,
        "wires": [
            [
                "e1fcf6c84a7906fb"
            ]
        ]
    },
    {
        "id": "e52659c9b4a08bc3",
        "type": "function",
        "z": "d579ed5898a52b4f",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3830,
        "y": 440,
        "wires": [
            [
                "08e35ec326d894e5"
            ]
        ]
    },
    {
        "id": "83a19628633895f9",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH1KWH",
        "mode": "link",
        "links": [
            "b986a27fda6b858c"
        ],
        "x": 925,
        "y": 320,
        "wires": []
    },
    {
        "id": "9cf6b4cb07aafdd0",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 320,
        "wires": []
    },
    {
        "id": "2848f49ba246f648",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH1-KWH",
        "links": [
            "5d8d569e3fe48a6c"
        ],
        "x": 255,
        "y": 260,
        "wires": [
            [
                "1778ccda590b5b80"
            ]
        ]
    },
    {
        "id": "91f92f7e3ee49132",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KWH",
        "info": "This will only give analog value.",
        "x": 290,
        "y": 200,
        "wires": []
    },
    {
        "id": "1778ccda590b5b80",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 260,
        "wires": [
            [
                "e077191646c276fc"
            ]
        ]
    },
    {
        "id": "d05ec6a9759ab5ea",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 58; //machine/area id\nmsg.parameter18 = 18; //parameter id\nconst value = msg.kwh;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no102=id+\"_\"+msg.parameter18+\"_\"+msg.dt_mc+\"_\"+msg.msg_no102+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter18,\n        \"value\":value,\n        \"msg_no\": msg.msg_no102,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 260,
        "wires": [
            [
                "9cf6b4cb07aafdd0",
                "90933c39d2322261",
                "83a19628633895f9"
            ]
        ]
    },
    {
        "id": "90933c39d2322261",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch1kwh_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch1kwh/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 260,
        "wires": [
            [
                "b1d672a2c8b2c115"
            ]
        ]
    },
    {
        "id": "5081cfe61d6731ff",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 260,
        "wires": [
            [
                "b9a3ec0efc6c6c19"
            ],
            [
                "cc5223b1a42b9a64"
            ]
        ]
    },
    {
        "id": "b9a3ec0efc6c6c19",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 240,
        "wires": [
            [
                "d41327aa4c4b94cb"
            ]
        ]
    },
    {
        "id": "cc5223b1a42b9a64",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 280,
        "wires": [
            [
                "b3e12f42645fb849"
            ]
        ]
    },
    {
        "id": "d41327aa4c4b94cb",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 240,
        "wires": [
            [
                "d1384c68d6c77931"
            ]
        ]
    },
    {
        "id": "b3e12f42645fb849",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 280,
        "wires": [
            [
                "d1384c68d6c77931"
            ]
        ]
    },
    {
        "id": "d1384c68d6c77931",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "b1d672a2c8b2c115",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 260,
        "wires": [
            [
                "5081cfe61d6731ff"
            ]
        ]
    },
    {
        "id": "dcb5d81da2397e67",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 220,
        "wires": []
    },
    {
        "id": "4dc91778b9bab9ea",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "c352bef4b68cf91e",
            "d0d9b55f94f0e454"
        ],
        "x": 1155,
        "y": 340,
        "wires": [
            [
                "1384934f7bbf1e41",
                "68b407ac28cda489",
                "4d29642b4a7a2945"
            ]
        ]
    },
    {
        "id": "68b407ac28cda489",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1670,
        "y": 340,
        "wires": []
    },
    {
        "id": "1384934f7bbf1e41",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter18",
                "pt": "global",
                "to": "parameter18",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que102",
                "pt": "global",
                "to": "msg_no102",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "0a4b578ba04cc04d",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 680,
        "wires": []
    },
    {
        "id": "79c1966c0b48df18",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH1-KW",
        "links": [
            "9078182edfe5d0bb"
        ],
        "x": 225,
        "y": 620,
        "wires": [
            [
                "0a17a9220555af6a"
            ]
        ]
    },
    {
        "id": "b5b89ca96a4351eb",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KW",
        "info": "This will only give analog value.",
        "x": 260,
        "y": 560,
        "wires": []
    },
    {
        "id": "0a17a9220555af6a",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 350,
        "y": 620,
        "wires": [
            [
                "c1af861527c2077c"
            ]
        ]
    },
    {
        "id": "11760a9c468e9835",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 58; //machine/area id\nmsg.parameter19 = 19; //parameter id\nconst value = msg.kw;\nmsg.type2 = 2;\nmsg.msg_no104=id+\"_\"+msg.parameter19+\"_\"+msg.dt_mc+\"_\"+msg.msg_no104+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter19,\n        \"value\":value,\n        \"msg_no\": msg.msg_no104,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 620,
        "wires": [
            [
                "0a4b578ba04cc04d",
                "0a05e8494881f74f",
                "0211322a7a16f959"
            ]
        ]
    },
    {
        "id": "0a05e8494881f74f",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch1kw_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch1kw/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 620,
        "wires": [
            [
                "a3a057af9b259150"
            ]
        ]
    },
    {
        "id": "573518c92ee9afbd",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 620,
        "wires": [
            [
                "faaa86edf7870927"
            ],
            [
                "b6f11402937f53c0"
            ]
        ]
    },
    {
        "id": "faaa86edf7870927",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 600,
        "wires": [
            [
                "84b1fe921e106815"
            ]
        ]
    },
    {
        "id": "b6f11402937f53c0",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 640,
        "wires": [
            [
                "d54aea589c026649"
            ]
        ]
    },
    {
        "id": "84b1fe921e106815",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 600,
        "wires": [
            [
                "b205c6c06d59ca72"
            ]
        ]
    },
    {
        "id": "d54aea589c026649",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 640,
        "wires": [
            [
                "b205c6c06d59ca72"
            ]
        ]
    },
    {
        "id": "b205c6c06d59ca72",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1960,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "a3a057af9b259150",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1310,
        "y": 620,
        "wires": [
            [
                "573518c92ee9afbd"
            ]
        ]
    },
    {
        "id": "f9c1f33306e17455",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 580,
        "wires": []
    },
    {
        "id": "99380556492636c0",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 980,
        "wires": []
    },
    {
        "id": "85b726bc2d835fb0",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH1-VOLT",
        "links": [
            "6ff844e091d994d1"
        ],
        "x": 225,
        "y": 920,
        "wires": [
            [
                "2a2eca9a3aae798d"
            ]
        ]
    },
    {
        "id": "226be0263588a68a",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "VOLTAGE",
        "info": "This will only give analog value.",
        "x": 270,
        "y": 860,
        "wires": []
    },
    {
        "id": "2a2eca9a3aae798d",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 350,
        "y": 920,
        "wires": [
            [
                "87924d6878cf9dc0"
            ]
        ]
    },
    {
        "id": "9ccf56c1e581c2c6",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 58; //machine/area id\nmsg.parameter20 = 20; //parameter id\nconst value = msg.volt;\nmsg.type2 = 2;\nmsg.msg_no105=id+\"_\"+msg.parameter20+\"_\"+msg.dt_mc+\"_\"+msg.msg_no105+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter20,\n        \"value\":value,\n        \"msg_no\": msg.msg_no105,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 920,
        "wires": [
            [
                "99380556492636c0",
                "77e4ec2ffaf39a9d",
                "0fa4179f2ea0a2aa"
            ]
        ]
    },
    {
        "id": "77e4ec2ffaf39a9d",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch1volt_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch1volt/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 920,
        "wires": [
            [
                "e4207f8e629ece03"
            ]
        ]
    },
    {
        "id": "24166f8962906e4a",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 920,
        "wires": [
            [
                "7eb710b37850f645"
            ],
            [
                "150990d91f42d7fb"
            ]
        ]
    },
    {
        "id": "7eb710b37850f645",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 900,
        "wires": [
            [
                "ea2e24bb291ccd07"
            ]
        ]
    },
    {
        "id": "150990d91f42d7fb",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 940,
        "wires": [
            [
                "c26f686149fb2b29"
            ]
        ]
    },
    {
        "id": "ea2e24bb291ccd07",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 900,
        "wires": [
            [
                "57d536c45bb73c66"
            ]
        ]
    },
    {
        "id": "c26f686149fb2b29",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 940,
        "wires": [
            [
                "57d536c45bb73c66"
            ]
        ]
    },
    {
        "id": "57d536c45bb73c66",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1960,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "e4207f8e629ece03",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1310,
        "y": 920,
        "wires": [
            [
                "24166f8962906e4a"
            ]
        ]
    },
    {
        "id": "e3c627fe1f5be434",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 880,
        "wires": []
    },
    {
        "id": "c7aeb1049e9ad179",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH1CURRENT",
        "mode": "link",
        "links": [
            "b5787e7f36490fff"
        ],
        "x": 945,
        "y": 1340,
        "wires": []
    },
    {
        "id": "731142dde4a426fc",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1300,
        "wires": []
    },
    {
        "id": "5c5e200fd41e9d60",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH1-CURRENT",
        "links": [
            "4dc49d7d2c4d0b96"
        ],
        "x": 255,
        "y": 1240,
        "wires": [
            [
                "199c55195ea6a0e8"
            ]
        ]
    },
    {
        "id": "090650acbcc1239c",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "CURRENT",
        "info": "This will only give analog value.",
        "x": 300,
        "y": 1180,
        "wires": []
    },
    {
        "id": "199c55195ea6a0e8",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 1240,
        "wires": [
            [
                "157ec3ad2bd88502"
            ]
        ]
    },
    {
        "id": "978ac70835c9cb92",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 58; //machine/area id\nmsg.parameter21 = 21; //parameter id\nconst value = msg.current;\nmsg.type2 = 2;\nmsg.msg_no106=id+\"_\"+msg.parameter21+\"_\"+msg.dt_mc+\"_\"+msg.msg_no106+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter21,\n        \"value\":value,\n        \"msg_no\": msg.msg_no106,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 1240,
        "wires": [
            [
                "731142dde4a426fc",
                "310b3f0214e5bb4d",
                "c7aeb1049e9ad179"
            ]
        ]
    },
    {
        "id": "310b3f0214e5bb4d",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch1current_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch1current/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 1240,
        "wires": [
            [
                "22092f988969b148"
            ]
        ]
    },
    {
        "id": "ef7bd06c8119ed36",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 1240,
        "wires": [
            [
                "8f46e1b09717f831"
            ],
            [
                "0bd8d4a3b88bb00c"
            ]
        ]
    },
    {
        "id": "8f46e1b09717f831",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1220,
        "wires": [
            [
                "90d8f60a0d2dc902"
            ]
        ]
    },
    {
        "id": "0bd8d4a3b88bb00c",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1260,
        "wires": [
            [
                "5c7a29e7d42cf5b8"
            ]
        ]
    },
    {
        "id": "90d8f60a0d2dc902",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 1220,
        "wires": [
            [
                "d8b9893767faa8ed"
            ]
        ]
    },
    {
        "id": "5c7a29e7d42cf5b8",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 1260,
        "wires": [
            [
                "d8b9893767faa8ed"
            ]
        ]
    },
    {
        "id": "d8b9893767faa8ed",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "22092f988969b148",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 1240,
        "wires": [
            [
                "ef7bd06c8119ed36"
            ]
        ]
    },
    {
        "id": "24b98addafeee542",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 1200,
        "wires": []
    },
    {
        "id": "732ca488e67801c1",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "725b2f52cbef44fa"
        ],
        "x": 1115,
        "y": 700,
        "wires": [
            [
                "d9bfc57930e65b7a",
                "b9bc2671bc9f35bf",
                "0fb4680f2514f97e"
            ]
        ]
    },
    {
        "id": "b9bc2671bc9f35bf",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1630,
        "y": 700,
        "wires": []
    },
    {
        "id": "6b0ed0e70beb31f4",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1640,
        "y": 1000,
        "wires": []
    },
    {
        "id": "81a660229a5ddbbf",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "44b21b437f616e2d"
        ],
        "x": 1115,
        "y": 1000,
        "wires": [
            [
                "033d40073da71853",
                "6b0ed0e70beb31f4",
                "9ebbe8f3de6ac4cf"
            ]
        ]
    },
    {
        "id": "0211322a7a16f959",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH1KW",
        "mode": "link",
        "links": [
            "ef9a289af72e0f51"
        ],
        "x": 905,
        "y": 680,
        "wires": []
    },
    {
        "id": "0fa4179f2ea0a2aa",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH1VOLT",
        "mode": "link",
        "links": [
            "44b0a25f5b2b1e1d"
        ],
        "x": 905,
        "y": 980,
        "wires": []
    },
    {
        "id": "d9bfc57930e65b7a",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter19",
                "pt": "global",
                "to": "parameter19",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que104",
                "pt": "global",
                "to": "msg_no104",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "033d40073da71853",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter20",
                "pt": "global",
                "to": "parameter20",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que105",
                "pt": "global",
                "to": "msg_no105",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "299eae98d02cbc6b",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1620,
        "y": 1340,
        "wires": []
    },
    {
        "id": "6763f130ae5a0305",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "3a661b85ee542284"
        ],
        "x": 1085,
        "y": 1340,
        "wires": [
            [
                "d5ce8afdd973b735",
                "299eae98d02cbc6b",
                "a684d238f93a14b8"
            ]
        ]
    },
    {
        "id": "d5ce8afdd973b735",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter21",
                "pt": "global",
                "to": "parameter21",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que106",
                "pt": "global",
                "to": "msg_no106",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "db469366ddcedae9",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH2KWH",
        "mode": "link",
        "links": [
            "f3f6cbc6f71d6d85",
            "0f72c7c114abd2fa"
        ],
        "x": 955,
        "y": 1660,
        "wires": []
    },
    {
        "id": "f388e08d4851a731",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 1660,
        "wires": []
    },
    {
        "id": "99e97e0782d7d3a3",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH2-KWH",
        "links": [
            "33e059d9438fb80b"
        ],
        "x": 285,
        "y": 1600,
        "wires": [
            [
                "f6f236e08c1e5d32"
            ]
        ]
    },
    {
        "id": "e4986270723ed9e8",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KWH",
        "info": "This will only give analog value.",
        "x": 320,
        "y": 1540,
        "wires": []
    },
    {
        "id": "f6f236e08c1e5d32",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 1600,
        "wires": [
            [
                "3cdc67335b31b4ec"
            ]
        ]
    },
    {
        "id": "b969d1868350297e",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 59; //machine/area id\nmsg.parameter18 = 18; //parameter id\nconst value = msg.kwh;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no107=id+\"_\"+msg.parameter18+\"_\"+msg.dt_mc+\"_\"+msg.msg_no107+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter18,\n        \"value\":value,\n        \"msg_no\": msg.msg_no107,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1600,
        "wires": [
            [
                "f388e08d4851a731",
                "42723abdb59cdb6c",
                "db469366ddcedae9"
            ]
        ]
    },
    {
        "id": "42723abdb59cdb6c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch2kwh_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch2kwh/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 1600,
        "wires": [
            [
                "5494859e25779cbd"
            ]
        ]
    },
    {
        "id": "cead7de538e2f7b1",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1540,
        "y": 1600,
        "wires": [
            [
                "ec0c86f7f841f8b8"
            ],
            [
                "99f755652d600ce0"
            ]
        ]
    },
    {
        "id": "ec0c86f7f841f8b8",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 1580,
        "wires": [
            [
                "a5ed2def60dc9389"
            ]
        ]
    },
    {
        "id": "99f755652d600ce0",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 1620,
        "wires": [
            [
                "d63257682df66e22"
            ]
        ]
    },
    {
        "id": "a5ed2def60dc9389",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1880,
        "y": 1580,
        "wires": [
            [
                "0de720439cdfaa0b"
            ]
        ]
    },
    {
        "id": "d63257682df66e22",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1880,
        "y": 1620,
        "wires": [
            [
                "0de720439cdfaa0b"
            ]
        ]
    },
    {
        "id": "0de720439cdfaa0b",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2020,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "5494859e25779cbd",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1370,
        "y": 1600,
        "wires": [
            [
                "cead7de538e2f7b1"
            ]
        ]
    },
    {
        "id": "507dee0338e46f9a",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1250,
        "y": 1560,
        "wires": []
    },
    {
        "id": "962639443aa3acc7",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "cd0419e222b0ee1a"
        ],
        "x": 1185,
        "y": 1680,
        "wires": [
            [
                "7964e74de648212c",
                "8fb6882e9ede2985",
                "824251cd9b8324f4"
            ]
        ]
    },
    {
        "id": "8fb6882e9ede2985",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch2/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1700,
        "y": 1680,
        "wires": []
    },
    {
        "id": "7964e74de648212c",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter18",
                "pt": "global",
                "to": "parameter18",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que107",
                "pt": "global",
                "to": "msg_no107",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 1720,
        "wires": [
            []
        ]
    },
    {
        "id": "49b4bfbf1a8d56f5",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 2020,
        "wires": []
    },
    {
        "id": "416152605cc6af2d",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH2-KW",
        "links": [
            "d30a27ed1903cb97"
        ],
        "x": 255,
        "y": 1960,
        "wires": [
            [
                "d9ff6ce829c12419"
            ]
        ]
    },
    {
        "id": "9fb32e5d14a5ede5",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KW",
        "info": "This will only give analog value.",
        "x": 290,
        "y": 1900,
        "wires": []
    },
    {
        "id": "d9ff6ce829c12419",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 1960,
        "wires": [
            [
                "a75006691173148c"
            ]
        ]
    },
    {
        "id": "92095cb4e77f9bb7",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 59; //machine/area id\nmsg.parameter19 = 19; //parameter id\nconst value = msg.kw;\nmsg.type2 = 2;\nmsg.msg_no109=id+\"_\"+msg.parameter19+\"_\"+msg.dt_mc+\"_\"+msg.msg_no109+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter19,\n        \"value\":value,\n        \"msg_no\": msg.msg_no109,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 1960,
        "wires": [
            [
                "49b4bfbf1a8d56f5",
                "b536109456173ac8",
                "1f4fc55c3f31fa3a"
            ]
        ]
    },
    {
        "id": "b536109456173ac8",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch2kw_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch2kw/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 1960,
        "wires": [
            [
                "21c2a9e031abf464"
            ]
        ]
    },
    {
        "id": "1817716b07844d6f",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 1960,
        "wires": [
            [
                "b45ce69c2e9de8ca"
            ],
            [
                "49d8ab572f479deb"
            ]
        ]
    },
    {
        "id": "b45ce69c2e9de8ca",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1940,
        "wires": [
            [
                "7c4c6fa8de84875f"
            ]
        ]
    },
    {
        "id": "49d8ab572f479deb",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 1980,
        "wires": [
            [
                "675a8a9e4ee216fd"
            ]
        ]
    },
    {
        "id": "7c4c6fa8de84875f",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 1940,
        "wires": [
            [
                "49226256427e14c0"
            ]
        ]
    },
    {
        "id": "675a8a9e4ee216fd",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 1980,
        "wires": [
            [
                "49226256427e14c0"
            ]
        ]
    },
    {
        "id": "49226256427e14c0",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "21c2a9e031abf464",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 1960,
        "wires": [
            [
                "1817716b07844d6f"
            ]
        ]
    },
    {
        "id": "75a31e8d4b45104c",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 1920,
        "wires": []
    },
    {
        "id": "fedbbcba93cdbcda",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 2380,
        "wires": []
    },
    {
        "id": "2e27a50cfda6e462",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH2-VOLT",
        "links": [
            "8661eb1f1796b1dd"
        ],
        "x": 225,
        "y": 2320,
        "wires": [
            [
                "c0036ff0eacc15d2"
            ]
        ]
    },
    {
        "id": "ac8cc5a897a57058",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "VOLTAGE",
        "info": "This will only give analog value.",
        "x": 270,
        "y": 2260,
        "wires": []
    },
    {
        "id": "c0036ff0eacc15d2",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 350,
        "y": 2320,
        "wires": [
            [
                "d58984d2d7309237"
            ]
        ]
    },
    {
        "id": "6752b62fef3b914d",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 59; //machine/area id\nmsg.parameter20 = 20; //parameter id\nconst value = msg.volt;\nmsg.type2 = 2;\nmsg.msg_no110=id+\"_\"+msg.parameter20+\"_\"+msg.dt_mc+\"_\"+msg.msg_no110+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter20,\n        \"value\":value,\n        \"msg_no\": msg.msg_no110,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 2320,
        "wires": [
            [
                "fedbbcba93cdbcda",
                "cc3dc1e5a61903d0",
                "d03e5153d3aafbb6"
            ]
        ]
    },
    {
        "id": "cc3dc1e5a61903d0",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch2volt_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch2volt/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 2320,
        "wires": [
            [
                "b9b0b1ad55d0550b"
            ]
        ]
    },
    {
        "id": "fa6ca04e5e44251b",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 2320,
        "wires": [
            [
                "8b7589c10c96ff0f"
            ],
            [
                "f9f83be9731c99c4"
            ]
        ]
    },
    {
        "id": "8b7589c10c96ff0f",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 2300,
        "wires": [
            [
                "4bbe4d5f84307228"
            ]
        ]
    },
    {
        "id": "f9f83be9731c99c4",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 2340,
        "wires": [
            [
                "de9b1fa25a82d0c6"
            ]
        ]
    },
    {
        "id": "4bbe4d5f84307228",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 2300,
        "wires": [
            [
                "7f443fdb64eb3b8b"
            ]
        ]
    },
    {
        "id": "de9b1fa25a82d0c6",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1820,
        "y": 2340,
        "wires": [
            [
                "7f443fdb64eb3b8b"
            ]
        ]
    },
    {
        "id": "7f443fdb64eb3b8b",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1960,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "b9b0b1ad55d0550b",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1310,
        "y": 2320,
        "wires": [
            [
                "fa6ca04e5e44251b"
            ]
        ]
    },
    {
        "id": "4c8a6ccbc87351d6",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 2280,
        "wires": []
    },
    {
        "id": "a66a930e41a9904e",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH2CURRENT",
        "mode": "link",
        "links": [
            "39592009f3d3f459"
        ],
        "x": 945,
        "y": 2740,
        "wires": []
    },
    {
        "id": "6bfe0c9b2236809d",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 2700,
        "wires": []
    },
    {
        "id": "7409888da2454854",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH2-CURRENT",
        "links": [
            "831dd45cbfd1f085"
        ],
        "x": 255,
        "y": 2640,
        "wires": [
            [
                "726a6e96111b1976"
            ]
        ]
    },
    {
        "id": "e0168711b9e0cdc9",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "CURRENT",
        "info": "This will only give analog value.",
        "x": 300,
        "y": 2580,
        "wires": []
    },
    {
        "id": "726a6e96111b1976",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 2640,
        "wires": [
            [
                "13bf705e28ba1944"
            ]
        ]
    },
    {
        "id": "82d44dae50497944",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 59; //machine/area id\nmsg.parameter21 = 21; //parameter id\nconst value = msg.current;\nmsg.type2 = 2;\nmsg.msg_no111=id+\"_\"+msg.parameter21+\"_\"+msg.dt_mc+\"_\"+msg.msg_no111+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter21,\n        \"value\":value,\n        \"msg_no\": msg.msg_no111,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 2640,
        "wires": [
            [
                "6bfe0c9b2236809d",
                "f115748fb6cd7296",
                "a66a930e41a9904e"
            ]
        ]
    },
    {
        "id": "f115748fb6cd7296",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch2current_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch2current/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 2640,
        "wires": [
            [
                "b61d1eb0d9d40119"
            ]
        ]
    },
    {
        "id": "9e3b055517566fec",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 2640,
        "wires": [
            [
                "c84fe05a385adb53"
            ],
            [
                "f44376ca48dccf44"
            ]
        ]
    },
    {
        "id": "c84fe05a385adb53",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 2620,
        "wires": [
            [
                "5bb0044824ddc670"
            ]
        ]
    },
    {
        "id": "f44376ca48dccf44",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 2660,
        "wires": [
            [
                "ed5efe061bcb5dd0"
            ]
        ]
    },
    {
        "id": "5bb0044824ddc670",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 2620,
        "wires": [
            [
                "0413be9dbb2fc3eb"
            ]
        ]
    },
    {
        "id": "ed5efe061bcb5dd0",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 2660,
        "wires": [
            [
                "0413be9dbb2fc3eb"
            ]
        ]
    },
    {
        "id": "0413be9dbb2fc3eb",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "b61d1eb0d9d40119",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 2640,
        "wires": [
            [
                "9e3b055517566fec"
            ]
        ]
    },
    {
        "id": "36aa53bb83bc7c36",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 2600,
        "wires": []
    },
    {
        "id": "8ad2e3cf237a61ad",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "41ff2df5bb94e0a7"
        ],
        "x": 1145,
        "y": 2040,
        "wires": [
            [
                "0957784bcc539923",
                "5faccfa990b2df34",
                "17c25639690bdfa8"
            ]
        ]
    },
    {
        "id": "5faccfa990b2df34",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch2/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1660,
        "y": 2040,
        "wires": []
    },
    {
        "id": "5828aa367e40b5b0",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch2/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1640,
        "y": 2400,
        "wires": []
    },
    {
        "id": "480b51835f66ebec",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "3e892d9624e6a9d5"
        ],
        "x": 1115,
        "y": 2400,
        "wires": [
            [
                "619d3c989862feff",
                "5828aa367e40b5b0",
                "d9fbbfe17ec80eb6"
            ]
        ]
    },
    {
        "id": "1f4fc55c3f31fa3a",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH2KW",
        "mode": "link",
        "links": [],
        "x": 935,
        "y": 2020,
        "wires": []
    },
    {
        "id": "d03e5153d3aafbb6",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH2VOLT",
        "mode": "link",
        "links": [
            "078dfb72749d3c88"
        ],
        "x": 905,
        "y": 2380,
        "wires": []
    },
    {
        "id": "0957784bcc539923",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter19",
                "pt": "global",
                "to": "parameter19",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que109",
                "pt": "global",
                "to": "msg_no109",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "619d3c989862feff",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter20",
                "pt": "global",
                "to": "parameter20",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que110",
                "pt": "global",
                "to": "msg_no110",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "6fb0c8f016d11c0b",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch2/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1620,
        "y": 2740,
        "wires": []
    },
    {
        "id": "fc63a98a56d378b2",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "bdfa8749d013c6c9"
        ],
        "x": 1085,
        "y": 2740,
        "wires": [
            [
                "5845f31126a919ac",
                "6fb0c8f016d11c0b",
                "4cda7e80b04362de"
            ]
        ]
    },
    {
        "id": "5845f31126a919ac",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter21",
                "pt": "global",
                "to": "parameter21",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que111",
                "pt": "global",
                "to": "msg_no111",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 2780,
        "wires": [
            []
        ]
    },
    {
        "id": "0ba0d297718c498b",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH3KWH",
        "mode": "link",
        "links": [
            "8053ba0903ee0c21"
        ],
        "x": 935,
        "y": 3060,
        "wires": []
    },
    {
        "id": "6a59b6bb0e61a3d2",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 3060,
        "wires": []
    },
    {
        "id": "ae5bd28ca8fc28c1",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH3-KWH",
        "links": [
            "5d8d569e3fe48a6c",
            "8fcb29a6e4852fd4"
        ],
        "x": 265,
        "y": 3000,
        "wires": [
            [
                "c3ccf121377a32dc"
            ]
        ]
    },
    {
        "id": "61e402828c1a8228",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KWH",
        "info": "This will only give analog value.",
        "x": 300,
        "y": 2940,
        "wires": []
    },
    {
        "id": "c3ccf121377a32dc",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 390,
        "y": 3000,
        "wires": [
            [
                "e196f68e30d0c171"
            ]
        ]
    },
    {
        "id": "1ee47ac8f725c41a",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 60; //machine/area id\nmsg.parameter18 = 18; //parameter id\nconst value = msg.kwh;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no112=id+\"_\"+msg.parameter18+\"_\"+msg.dt_mc+\"_\"+msg.msg_no112+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter18,\n        \"value\":value,\n        \"msg_no\": msg.msg_no112,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 3000,
        "wires": [
            [
                "6a59b6bb0e61a3d2",
                "c9a726243d3218a2",
                "0ba0d297718c498b"
            ]
        ]
    },
    {
        "id": "c9a726243d3218a2",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch3kwh_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch3kwh/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 3000,
        "wires": [
            [
                "c895a7fc236a9d02"
            ]
        ]
    },
    {
        "id": "6f0917705cd8f92e",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1520,
        "y": 3000,
        "wires": [
            [
                "6a6cd03596077a29"
            ],
            [
                "79e565d8eb60ecbd"
            ]
        ]
    },
    {
        "id": "6a6cd03596077a29",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 2980,
        "wires": [
            [
                "7474990fe9d64a4c"
            ]
        ]
    },
    {
        "id": "79e565d8eb60ecbd",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1710,
        "y": 3020,
        "wires": [
            [
                "b5569f122007ed8d"
            ]
        ]
    },
    {
        "id": "7474990fe9d64a4c",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1860,
        "y": 2980,
        "wires": [
            [
                "1b3fc6835e8a8386"
            ]
        ]
    },
    {
        "id": "b5569f122007ed8d",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1860,
        "y": 3020,
        "wires": [
            [
                "1b3fc6835e8a8386"
            ]
        ]
    },
    {
        "id": "1b3fc6835e8a8386",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2000,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "c895a7fc236a9d02",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1350,
        "y": 3000,
        "wires": [
            [
                "6f0917705cd8f92e"
            ]
        ]
    },
    {
        "id": "72f22af5885e0b3e",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1230,
        "y": 2960,
        "wires": []
    },
    {
        "id": "809299a524c81f92",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "b62cc27e5a435677"
        ],
        "x": 1165,
        "y": 3080,
        "wires": [
            [
                "5dfc764fb819a740",
                "9bac2e3e96bbdbca",
                "3fb7cd648f25a3aa"
            ]
        ]
    },
    {
        "id": "9bac2e3e96bbdbca",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch3/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1680,
        "y": 3080,
        "wires": []
    },
    {
        "id": "5dfc764fb819a740",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter18",
                "pt": "global",
                "to": "parameter18",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que112",
                "pt": "global",
                "to": "msg_no112",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "c24678df9d29e4dd",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 3420,
        "wires": []
    },
    {
        "id": "e63fa6364b17e8d2",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH3-KW",
        "links": [
            "77a4827b44e9345c"
        ],
        "x": 255,
        "y": 3360,
        "wires": [
            [
                "d07675b7d19f63e2"
            ]
        ]
    },
    {
        "id": "313e7bcd66d3be7b",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "KW",
        "info": "This will only give analog value.",
        "x": 290,
        "y": 3300,
        "wires": []
    },
    {
        "id": "d07675b7d19f63e2",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 3360,
        "wires": [
            [
                "75209e41f6879023"
            ]
        ]
    },
    {
        "id": "4ac849f17fc1e470",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 60; //machine/area id\nmsg.parameter19 = 19; //parameter id\nconst value = msg.kw;\nmsg.type2 = 2;\nmsg.msg_no114=id+\"_\"+msg.parameter19+\"_\"+msg.dt_mc+\"_\"+msg.msg_no114+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter19,\n        \"value\":value,\n        \"msg_no\": msg.msg_no114,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 3360,
        "wires": [
            [
                "c24678df9d29e4dd",
                "d04b0f5fb659edc9",
                "6942a211947762ee"
            ]
        ]
    },
    {
        "id": "d04b0f5fb659edc9",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch3kw_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch3kw/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 3360,
        "wires": [
            [
                "4b29f8268ff44d7f"
            ]
        ]
    },
    {
        "id": "54e2597e424c5be9",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 3360,
        "wires": [
            [
                "2718d73813092601"
            ],
            [
                "5a8d7ae9923421d9"
            ]
        ]
    },
    {
        "id": "2718d73813092601",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 3340,
        "wires": [
            [
                "3e3b1a908ab12dcd"
            ]
        ]
    },
    {
        "id": "5a8d7ae9923421d9",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 3380,
        "wires": [
            [
                "7693159fc059e4ef"
            ]
        ]
    },
    {
        "id": "3e3b1a908ab12dcd",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 3340,
        "wires": [
            [
                "4cec88a86c9a7f37"
            ]
        ]
    },
    {
        "id": "7693159fc059e4ef",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 3380,
        "wires": [
            [
                "4cec88a86c9a7f37"
            ]
        ]
    },
    {
        "id": "4cec88a86c9a7f37",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 3360,
        "wires": [
            []
        ]
    },
    {
        "id": "4b29f8268ff44d7f",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 3360,
        "wires": [
            [
                "54e2597e424c5be9"
            ]
        ]
    },
    {
        "id": "c6533a647c774c19",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 3320,
        "wires": []
    },
    {
        "id": "9658c4ce1fa08ef6",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 3720,
        "wires": []
    },
    {
        "id": "9b9a6b8de6cd4839",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH3-VOLT",
        "links": [
            "5613b7d712307bdc",
            "6ff844e091d994d1"
        ],
        "x": 255,
        "y": 3660,
        "wires": [
            [
                "7be7db01b842b430"
            ]
        ]
    },
    {
        "id": "f0b56cd375a6bf88",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "VOLTAGE",
        "info": "This will only give analog value.",
        "x": 300,
        "y": 3600,
        "wires": []
    },
    {
        "id": "7be7db01b842b430",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 3660,
        "wires": [
            [
                "c2ebb5f1ac7bac9a"
            ]
        ]
    },
    {
        "id": "3532917fd80014c9",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 60; //machine/area id\nmsg.parameter20 = 20; //parameter id\nconst value = msg.volt;\nmsg.type2 = 2;\nmsg.msg_no115=id+\"_\"+msg.parameter20+\"_\"+msg.dt_mc+\"_\"+msg.msg_no115+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter20,\n        \"value\":value,\n        \"msg_no\": msg.msg_no115,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 3660,
        "wires": [
            [
                "9658c4ce1fa08ef6",
                "b672cb0d3cf14e36",
                "3598079b7cd4be4c"
            ]
        ]
    },
    {
        "id": "b672cb0d3cf14e36",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch3volt_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch3volt/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 3660,
        "wires": [
            [
                "344a858617ad43f5"
            ]
        ]
    },
    {
        "id": "a212f2659e625b0e",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1510,
        "y": 3660,
        "wires": [
            [
                "7f4206b994d6690c"
            ],
            [
                "c6164915dfdd1778"
            ]
        ]
    },
    {
        "id": "7f4206b994d6690c",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 3640,
        "wires": [
            [
                "363927f1cce38416"
            ]
        ]
    },
    {
        "id": "c6164915dfdd1778",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1700,
        "y": 3680,
        "wires": [
            [
                "1ab4bcb1f288ff69"
            ]
        ]
    },
    {
        "id": "363927f1cce38416",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 3640,
        "wires": [
            [
                "7153f866501751f2"
            ]
        ]
    },
    {
        "id": "1ab4bcb1f288ff69",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 3680,
        "wires": [
            [
                "7153f866501751f2"
            ]
        ]
    },
    {
        "id": "7153f866501751f2",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1990,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "344a858617ad43f5",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1340,
        "y": 3660,
        "wires": [
            [
                "a212f2659e625b0e"
            ]
        ]
    },
    {
        "id": "120fab6ac946bddd",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1220,
        "y": 3620,
        "wires": []
    },
    {
        "id": "c726b49f9875c025",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH3CURRENT",
        "mode": "link",
        "links": [
            "f89d0e6cb65cf00b"
        ],
        "x": 975,
        "y": 4080,
        "wires": []
    },
    {
        "id": "fc64b4a80aa75eee",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 4040,
        "wires": []
    },
    {
        "id": "1f76f7cce5fe5923",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH3-CURRENT",
        "links": [
            "03b2b4c56f15f545",
            "4dc49d7d2c4d0b96"
        ],
        "x": 285,
        "y": 3980,
        "wires": [
            [
                "5d7364d08b03349c"
            ]
        ]
    },
    {
        "id": "2582d1989cca1f35",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "CURRENT",
        "info": "This will only give analog value.",
        "x": 330,
        "y": 3920,
        "wires": []
    },
    {
        "id": "5d7364d08b03349c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 410,
        "y": 3980,
        "wires": [
            [
                "87bba2252de555f7"
            ]
        ]
    },
    {
        "id": "b097073a7d85e35c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 60; //machine/area id\nmsg.parameter21 = 21; //parameter id\nconst value = msg.current;\nmsg.type2 = 2;\nmsg.msg_no116=id+\"_\"+msg.parameter21+\"_\"+msg.dt_mc+\"_\"+msg.msg_no116+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter21,\n        \"value\":value,\n        \"msg_no\": msg.msg_no116,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 3980,
        "wires": [
            [
                "fc64b4a80aa75eee",
                "8a6d5e324a4d763a",
                "c726b49f9875c025"
            ]
        ]
    },
    {
        "id": "8a6d5e324a4d763a",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch3current_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch3current/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1180,
        "y": 3980,
        "wires": [
            [
                "4fc5a2fe362bf6f4"
            ]
        ]
    },
    {
        "id": "fc73af9b9203e831",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1540,
        "y": 3980,
        "wires": [
            [
                "30c0e04d6623b46f"
            ],
            [
                "16c902b8d653b1c3"
            ]
        ]
    },
    {
        "id": "30c0e04d6623b46f",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 3960,
        "wires": [
            [
                "d110a06e74230358"
            ]
        ]
    },
    {
        "id": "16c902b8d653b1c3",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 4000,
        "wires": [
            [
                "8b5d6fa3fc06341f"
            ]
        ]
    },
    {
        "id": "d110a06e74230358",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1880,
        "y": 3960,
        "wires": [
            [
                "e1e5d8ab6db79019"
            ]
        ]
    },
    {
        "id": "8b5d6fa3fc06341f",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1880,
        "y": 4000,
        "wires": [
            [
                "e1e5d8ab6db79019"
            ]
        ]
    },
    {
        "id": "e1e5d8ab6db79019",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2020,
        "y": 3980,
        "wires": [
            []
        ]
    },
    {
        "id": "4fc5a2fe362bf6f4",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1370,
        "y": 3980,
        "wires": [
            [
                "fc73af9b9203e831"
            ]
        ]
    },
    {
        "id": "37d4f49b859e12fc",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1250,
        "y": 3940,
        "wires": []
    },
    {
        "id": "140ef73dcc213d92",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "652e52b3f1677c3b"
        ],
        "x": 1145,
        "y": 3440,
        "wires": [
            [
                "f0ef0394851fe21b",
                "9a514bbacd250363",
                "e0ea6092ea8d1afa"
            ]
        ]
    },
    {
        "id": "9a514bbacd250363",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch3/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1660,
        "y": 3440,
        "wires": []
    },
    {
        "id": "5576cf22c7bbe642",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch3/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1670,
        "y": 3740,
        "wires": []
    },
    {
        "id": "0a91eca3416a6902",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "2817c1af82d45df1"
        ],
        "x": 1145,
        "y": 3740,
        "wires": [
            [
                "449bcc270746a472",
                "5576cf22c7bbe642",
                "c2dca0988639e43b"
            ]
        ]
    },
    {
        "id": "6942a211947762ee",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH3KW",
        "mode": "link",
        "links": [
            "f6a403cbc5553708"
        ],
        "x": 935,
        "y": 3420,
        "wires": []
    },
    {
        "id": "3598079b7cd4be4c",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH3VOLT",
        "mode": "link",
        "links": [
            "8ec2e032a05bbdb6"
        ],
        "x": 935,
        "y": 3720,
        "wires": []
    },
    {
        "id": "f0ef0394851fe21b",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter19",
                "pt": "global",
                "to": "parameter19",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que114",
                "pt": "global",
                "to": "msg_no114",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "449bcc270746a472",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter20",
                "pt": "global",
                "to": "parameter20",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que115",
                "pt": "global",
                "to": "msg_no115",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 3780,
        "wires": [
            []
        ]
    },
    {
        "id": "9ab803c72735f45c",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch3/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1650,
        "y": 4080,
        "wires": []
    },
    {
        "id": "ae5e346b17aad839",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "c1ec80e32ffde442"
        ],
        "x": 1115,
        "y": 4080,
        "wires": [
            [
                "e9bc50ff3371eed1",
                "9ab803c72735f45c",
                "371ec0a3fd65dada"
            ]
        ]
    },
    {
        "id": "e9bc50ff3371eed1",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter21",
                "pt": "global",
                "to": "parameter21",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que116",
                "pt": "global",
                "to": "msg_no116",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 4120,
        "wires": [
            []
        ]
    },
    {
        "id": "e077191646c276fc",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 220,
        "wires": [
            [
                "d05ec6a9759ab5ea"
            ]
        ]
    },
    {
        "id": "c1af861527c2077c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 580,
        "wires": [
            [
                "11760a9c468e9835"
            ]
        ]
    },
    {
        "id": "87924d6878cf9dc0",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 880,
        "wires": [
            [
                "9ccf56c1e581c2c6"
            ]
        ]
    },
    {
        "id": "157ec3ad2bd88502",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 1200,
        "wires": [
            [
                "978ac70835c9cb92"
            ]
        ]
    },
    {
        "id": "3cdc67335b31b4ec",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1560,
        "wires": [
            [
                "b969d1868350297e"
            ]
        ]
    },
    {
        "id": "a75006691173148c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 1920,
        "wires": [
            [
                "92095cb4e77f9bb7"
            ]
        ]
    },
    {
        "id": "d58984d2d7309237",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2280,
        "wires": [
            [
                "6752b62fef3b914d"
            ]
        ]
    },
    {
        "id": "13bf705e28ba1944",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 2600,
        "wires": [
            [
                "82d44dae50497944"
            ]
        ]
    },
    {
        "id": "e196f68e30d0c171",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 2940,
        "wires": [
            [
                "1ee47ac8f725c41a"
            ]
        ]
    },
    {
        "id": "75209e41f6879023",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 3320,
        "wires": [
            [
                "4ac849f17fc1e470"
            ]
        ]
    },
    {
        "id": "c2ebb5f1ac7bac9a",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 3620,
        "wires": [
            [
                "3532917fd80014c9"
            ]
        ]
    },
    {
        "id": "87bba2252de555f7",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 3940,
        "wires": [
            [
                "b097073a7d85e35c"
            ]
        ]
    },
    {
        "id": "d379ead5fd181c2f",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "EM CH1",
        "info": "",
        "x": 250,
        "y": 120,
        "wires": []
    },
    {
        "id": "45ff03c8c2ccb9cf",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "EM CH2",
        "info": "",
        "x": 270,
        "y": 1480,
        "wires": []
    },
    {
        "id": "f3e3c2bcd87f7388",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "EM CH3",
        "info": "",
        "x": 240,
        "y": 2880,
        "wires": []
    },
    {
        "id": "f3a597adc9ada637",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "local server ip: 218.208.86.106",
        "info": "",
        "x": 1930,
        "y": 340,
        "wires": []
    },
    {
        "id": "4d29642b4a7a2945",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch1/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1670,
        "y": 400,
        "wires": []
    },
    {
        "id": "0fb4680f2514f97e",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch1/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1640,
        "y": 760,
        "wires": []
    },
    {
        "id": "9ebbe8f3de6ac4cf",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch1/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1650,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a684d238f93a14b8",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch1/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1620,
        "y": 1400,
        "wires": []
    },
    {
        "id": "824251cd9b8324f4",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch2/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1690,
        "y": 1740,
        "wires": []
    },
    {
        "id": "17c25639690bdfa8",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch2/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1640,
        "y": 2100,
        "wires": []
    },
    {
        "id": "d9fbbfe17ec80eb6",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch2/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1650,
        "y": 2460,
        "wires": []
    },
    {
        "id": "4cda7e80b04362de",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch2/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1620,
        "y": 2820,
        "wires": []
    },
    {
        "id": "3fb7cd648f25a3aa",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch3/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1670,
        "y": 3140,
        "wires": []
    },
    {
        "id": "371ec0a3fd65dada",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch3/current",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1640,
        "y": 4140,
        "wires": []
    },
    {
        "id": "c2dca0988639e43b",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch3/volt",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1650,
        "y": 3800,
        "wires": []
    },
    {
        "id": "e0ea6092ea8d1afa",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch3/kw",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1660,
        "y": 3500,
        "wires": []
    },
    {
        "id": "77fe85eb733ad3bc",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH1RTH",
        "mode": "link",
        "links": [
            "b86a4f322ee05e06"
        ],
        "x": 3175,
        "y": 340,
        "wires": []
    },
    {
        "id": "b37f2e22661298d0",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3040,
        "y": 340,
        "wires": []
    },
    {
        "id": "67f163ed7d26e703",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH1-RTH",
        "links": [
            "1c0ee282bb8e7e74"
        ],
        "x": 2505,
        "y": 280,
        "wires": [
            [
                "d0cdf3a962e69354"
            ]
        ]
    },
    {
        "id": "2cd0fac1fc16e9c1",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "RTH",
        "info": "This will only give analog value.",
        "x": 2540,
        "y": 220,
        "wires": []
    },
    {
        "id": "d0cdf3a962e69354",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2630,
        "y": 280,
        "wires": [
            [
                "ea74a4b0c0fb7c13"
            ]
        ]
    },
    {
        "id": "7f59fe69bbc03eb1",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 58; //machine/area id\nmsg.parameter41 = 41; //parameter id\nconst value = msg.rth;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no103=id+\"_\"+msg.parameter41+\"_\"+msg.dt_mc+\"_\"+msg.msg_no103+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter41,\n        \"value\":value,\n        \"msg_no\": msg.msg_no103,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3030,
        "y": 280,
        "wires": [
            [
                "b37f2e22661298d0",
                "cbe79b66aad7c881",
                "77fe85eb733ad3bc"
            ]
        ]
    },
    {
        "id": "cbe79b66aad7c881",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch1rth_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch1rth/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3400,
        "y": 280,
        "wires": [
            [
                "a92e8dc2db8f58cd"
            ]
        ]
    },
    {
        "id": "0f86d5c6962005dd",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3760,
        "y": 280,
        "wires": [
            [
                "d78ea9f7637141b7"
            ],
            [
                "5e8b7ad343dd1d32"
            ]
        ]
    },
    {
        "id": "d78ea9f7637141b7",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3950,
        "y": 260,
        "wires": [
            [
                "6f1653f14f3b297f"
            ]
        ]
    },
    {
        "id": "5e8b7ad343dd1d32",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3950,
        "y": 300,
        "wires": [
            [
                "37bd8330a11ab44b"
            ]
        ]
    },
    {
        "id": "6f1653f14f3b297f",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4100,
        "y": 260,
        "wires": [
            [
                "377ba48816df67f7"
            ]
        ]
    },
    {
        "id": "37bd8330a11ab44b",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4100,
        "y": 300,
        "wires": [
            [
                "377ba48816df67f7"
            ]
        ]
    },
    {
        "id": "377ba48816df67f7",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4240,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "a92e8dc2db8f58cd",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3590,
        "y": 280,
        "wires": [
            [
                "0f86d5c6962005dd"
            ]
        ]
    },
    {
        "id": "d6442012fe5788ce",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 3470,
        "y": 240,
        "wires": []
    },
    {
        "id": "b0078309c529194c",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "d0d9b55f94f0e454"
        ],
        "x": 3405,
        "y": 360,
        "wires": [
            [
                "f1aa9e5ff74324f6",
                "58a65545f12172e3",
                "a99eae5a5a404e6c"
            ]
        ]
    },
    {
        "id": "99c017c1b2a2a2a2",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "type2",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3550,
        "y": 320,
        "wires": [
            [
                "56170152f63de1b6"
            ]
        ]
    },
    {
        "id": "58a65545f12172e3",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 3920,
        "y": 360,
        "wires": []
    },
    {
        "id": "f1aa9e5ff74324f6",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter41",
                "pt": "global",
                "to": "parameter41",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que103",
                "pt": "global",
                "to": "msg_no103",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3570,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "56170152f63de1b6",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "msg.parameter18",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3710,
        "y": 320,
        "wires": [
            [
                "58a65545f12172e3"
            ]
        ]
    },
    {
        "id": "ea74a4b0c0fb7c13",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2840,
        "y": 240,
        "wires": [
            [
                "7f59fe69bbc03eb1"
            ]
        ]
    },
    {
        "id": "871f0c6b7bf14d7c",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "local server ip: 218.208.86.106",
        "info": "",
        "x": 4180,
        "y": 360,
        "wires": []
    },
    {
        "id": "a99eae5a5a404e6c",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch1/rth",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 3910,
        "y": 420,
        "wires": []
    },
    {
        "id": "754ddf47b9aa24a6",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH2RTH",
        "mode": "link",
        "links": [
            "aae4a79214f2e747"
        ],
        "x": 3245,
        "y": 1620,
        "wires": []
    },
    {
        "id": "5b710bb2deebf9e2",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3110,
        "y": 1620,
        "wires": []
    },
    {
        "id": "1d46a8b97c2b61fe",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH2-RTH",
        "links": [
            "a9cdc874da48dbe1"
        ],
        "x": 2575,
        "y": 1560,
        "wires": [
            [
                "9d56c7b3ad8215ed"
            ]
        ]
    },
    {
        "id": "fc4d953f60c31aae",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "RTH",
        "info": "This will only give analog value.",
        "x": 2610,
        "y": 1500,
        "wires": []
    },
    {
        "id": "9d56c7b3ad8215ed",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2700,
        "y": 1560,
        "wires": [
            [
                "502e41d14974a14e"
            ]
        ]
    },
    {
        "id": "77cea6c477f3ba6c",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 59; //machine/area id\nmsg.parameter41 = 41; //parameter id\nconst value = msg.rth;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no108=id+\"_\"+msg.parameter41+\"_\"+msg.dt_mc+\"_\"+msg.msg_no108+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter41,\n        \"value\":value,\n        \"msg_no\": msg.msg_no108,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3100,
        "y": 1560,
        "wires": [
            [
                "5b710bb2deebf9e2",
                "8d0a4c6dcc324578",
                "754ddf47b9aa24a6"
            ]
        ]
    },
    {
        "id": "8d0a4c6dcc324578",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch2rth_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch2rth/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3470,
        "y": 1560,
        "wires": [
            [
                "816c76ed09d4731c"
            ]
        ]
    },
    {
        "id": "169dec7cd1f5fbed",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3830,
        "y": 1560,
        "wires": [
            [
                "a6415b110608e059"
            ],
            [
                "c1e9946a66e6780a"
            ]
        ]
    },
    {
        "id": "a6415b110608e059",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4020,
        "y": 1540,
        "wires": [
            [
                "2d32499bc75d13fb"
            ]
        ]
    },
    {
        "id": "c1e9946a66e6780a",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 4020,
        "y": 1580,
        "wires": [
            [
                "30df8262988ec7ef"
            ]
        ]
    },
    {
        "id": "2d32499bc75d13fb",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4170,
        "y": 1540,
        "wires": [
            [
                "28f217bff617ccf5"
            ]
        ]
    },
    {
        "id": "30df8262988ec7ef",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4170,
        "y": 1580,
        "wires": [
            [
                "28f217bff617ccf5"
            ]
        ]
    },
    {
        "id": "28f217bff617ccf5",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4310,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "816c76ed09d4731c",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3660,
        "y": 1560,
        "wires": [
            [
                "169dec7cd1f5fbed"
            ]
        ]
    },
    {
        "id": "fa57558135e215c4",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 3540,
        "y": 1520,
        "wires": []
    },
    {
        "id": "22bb9c918c371719",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "7bafca399a048534"
        ],
        "x": 3475,
        "y": 1640,
        "wires": [
            [
                "d9f15bc4b33f2c42",
                "38751f6a39564842",
                "2340ef6b13c0c441"
            ]
        ]
    },
    {
        "id": "e16b03c1aba19a18",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "type2",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3620,
        "y": 1600,
        "wires": [
            [
                "177676b4669abe3d"
            ]
        ]
    },
    {
        "id": "38751f6a39564842",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 3990,
        "y": 1640,
        "wires": []
    },
    {
        "id": "d9f15bc4b33f2c42",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter41",
                "pt": "global",
                "to": "parameter41",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que108",
                "pt": "global",
                "to": "msg_no108",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3640,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "177676b4669abe3d",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "msg.parameter18",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3780,
        "y": 1600,
        "wires": [
            [
                "38751f6a39564842"
            ]
        ]
    },
    {
        "id": "502e41d14974a14e",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2910,
        "y": 1520,
        "wires": [
            [
                "77cea6c477f3ba6c"
            ]
        ]
    },
    {
        "id": "18f0babb9666d080",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "local server ip: 218.208.86.106",
        "info": "",
        "x": 4250,
        "y": 1640,
        "wires": []
    },
    {
        "id": "2340ef6b13c0c441",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch2/rth",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 3980,
        "y": 1700,
        "wires": []
    },
    {
        "id": "7e8ea5fccb6ee73b",
        "type": "link out",
        "z": "7e1c6603448a60d2",
        "name": "DATA-CH3RTH",
        "mode": "link",
        "links": [
            "fb04b69aa0c0ac0f"
        ],
        "x": 3205,
        "y": 3080,
        "wires": []
    },
    {
        "id": "4bcc69ffa3fd99f8",
        "type": "debug",
        "z": "7e1c6603448a60d2",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 3080,
        "wires": []
    },
    {
        "id": "bebc84c971c9071b",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "CH3-RTH",
        "links": [
            "4d12c0a8818617e3"
        ],
        "x": 2535,
        "y": 3020,
        "wires": [
            [
                "319530078695385a"
            ]
        ]
    },
    {
        "id": "2e5ed08b4f6f9702",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "RTH",
        "info": "This will only give analog value.",
        "x": 2570,
        "y": 2960,
        "wires": []
    },
    {
        "id": "319530078695385a",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2660,
        "y": 3020,
        "wires": [
            [
                "5fc451473083a1f2"
            ]
        ]
    },
    {
        "id": "b1f0c9960108484b",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 60; //machine/area id\nmsg.parameter41 = 41; //parameter id\nconst value = msg.rth;\nmsg.type2 = 2; //1 for area, 2 for machine\nmsg.msg_no113=id+\"_\"+msg.parameter41+\"_\"+msg.dt_mc+\"_\"+msg.msg_no113+\"_\"+msg.type2;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter41,\n        \"value\":value,\n        \"msg_no\": msg.msg_no113,\n        \"type\":msg.type2\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3060,
        "y": 3020,
        "wires": [
            [
                "4bcc69ffa3fd99f8",
                "2b57bbbdfe36b1ec",
                "7e8ea5fccb6ee73b"
            ]
        ]
    },
    {
        "id": "2b57bbbdfe36b1ec",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_ch3rth_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/ch3rth/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3430,
        "y": 3020,
        "wires": [
            [
                "3dc457db5e6f3873"
            ]
        ]
    },
    {
        "id": "8ecf9fe24df64971",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3790,
        "y": 3020,
        "wires": [
            [
                "f0948ce1b10add2d"
            ],
            [
                "0b1300db14ceb9b1"
            ]
        ]
    },
    {
        "id": "f0948ce1b10add2d",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3980,
        "y": 3000,
        "wires": [
            [
                "8c54a154ee3e6380"
            ]
        ]
    },
    {
        "id": "0b1300db14ceb9b1",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3980,
        "y": 3040,
        "wires": [
            [
                "9360902e4fb10c15"
            ]
        ]
    },
    {
        "id": "8c54a154ee3e6380",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4130,
        "y": 3000,
        "wires": [
            [
                "4e46512db8f69a71"
            ]
        ]
    },
    {
        "id": "9360902e4fb10c15",
        "type": "csv",
        "z": "7e1c6603448a60d2",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4130,
        "y": 3040,
        "wires": [
            [
                "4e46512db8f69a71"
            ]
        ]
    },
    {
        "id": "4e46512db8f69a71",
        "type": "file",
        "z": "7e1c6603448a60d2",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4270,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "3dc457db5e6f3873",
        "type": "fs-file-lister",
        "z": "7e1c6603448a60d2",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3620,
        "y": 3020,
        "wires": [
            [
                "8ecf9fe24df64971"
            ]
        ]
    },
    {
        "id": "be8a0d6692ec1e5e",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 3500,
        "y": 2980,
        "wires": []
    },
    {
        "id": "f74ac64750039b12",
        "type": "link in",
        "z": "7e1c6603448a60d2",
        "name": "",
        "links": [
            "fa9a380d4872ae4f"
        ],
        "x": 3435,
        "y": 3100,
        "wires": [
            [
                "af1fb0d659d4fec4",
                "d380dedf236ceb6a",
                "e06522ddd9bad887"
            ]
        ]
    },
    {
        "id": "e07475ac1df9b2e4",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "type2",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3580,
        "y": 3060,
        "wires": [
            [
                "2309baba04c7f245"
            ]
        ]
    },
    {
        "id": "d380dedf236ceb6a",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch1/kwh",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 3950,
        "y": 3100,
        "wires": []
    },
    {
        "id": "af1fb0d659d4fec4",
        "type": "change",
        "z": "7e1c6603448a60d2",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter41",
                "pt": "global",
                "to": "parameter41",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que113",
                "pt": "global",
                "to": "msg_no113",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3600,
        "y": 3140,
        "wires": [
            []
        ]
    },
    {
        "id": "2309baba04c7f245",
        "type": "switch",
        "z": "7e1c6603448a60d2",
        "name": "",
        "property": "msg.parameter18",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3740,
        "y": 3060,
        "wires": [
            [
                "d380dedf236ceb6a"
            ]
        ]
    },
    {
        "id": "5fc451473083a1f2",
        "type": "function",
        "z": "7e1c6603448a60d2",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2870,
        "y": 2980,
        "wires": [
            [
                "b1f0c9960108484b"
            ]
        ]
    },
    {
        "id": "b1f332dcd88bf338",
        "type": "comment",
        "z": "7e1c6603448a60d2",
        "name": "local server ip: 218.208.86.106",
        "info": "",
        "x": 4210,
        "y": 3100,
        "wires": []
    },
    {
        "id": "e06522ddd9bad887",
        "type": "mqtt out",
        "z": "7e1c6603448a60d2",
        "name": "",
        "topic": "hvacgmi/ch3/rth",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 3940,
        "y": 3160,
        "wires": []
    },
    {
        "id": "447d5317c74c7903",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 400,
        "y": 620,
        "wires": [
            [
                "1bb544bd21fa7923"
            ]
        ]
    },
    {
        "id": "1bb544bd21fa7923",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 590,
        "y": 620,
        "wires": [
            [
                "3309bbc47c1e47d3",
                "ec5f5f7f1ae3046d"
            ]
        ]
    },
    {
        "id": "0db1142f4841bfec",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 660,
        "wires": [
            [
                "c1dfcb32d93e7821"
            ]
        ]
    },
    {
        "id": "5285ed6d768b1922",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1450,
        "y": 800,
        "wires": [
            [
                "88f7e7c8c4ceb358"
            ]
        ]
    },
    {
        "id": "88f7e7c8c4ceb358",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1690,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "2f87f978f164ea01",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 240,
        "y": 620,
        "wires": [
            [
                "447d5317c74c7903"
            ]
        ]
    },
    {
        "id": "9b0c52249617601c",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1130,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "ec5f5f7f1ae3046d",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 620,
        "wires": [
            [
                "53e6a95cf5296530",
                "0db1142f4841bfec",
                "16543d776d9db748"
            ],
            [
                "70351a6b5dde93e2"
            ]
        ]
    },
    {
        "id": "a7b3161f735cb8c1",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 270,
        "y": 1200,
        "wires": [
            [
                "9b0c52249617601c"
            ]
        ]
    },
    {
        "id": "3048f67d12f1bfb3",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 1080,
        "wires": [
            [
                "25da84dfdc08af64"
            ]
        ]
    },
    {
        "id": "25da84dfdc08af64",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 620,
        "y": 1080,
        "wires": [
            [
                "8d1c943284d52449"
            ]
        ]
    },
    {
        "id": "8b4842d544cf4827",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 260,
        "y": 1080,
        "wires": [
            [
                "3048f67d12f1bfb3"
            ]
        ]
    },
    {
        "id": "0361c44854af5045",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 250,
        "y": 1160,
        "wires": []
    },
    {
        "id": "e766c38b639c7374",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 600,
        "y": 580,
        "wires": []
    },
    {
        "id": "420e871752e01cfa",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 310,
        "y": 1040,
        "wires": []
    },
    {
        "id": "927c576a0ea1068d",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 200,
        "wires": []
    },
    {
        "id": "7b1c3ef268974d4f",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 660,
        "wires": []
    },
    {
        "id": "3309bbc47c1e47d3",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 660,
        "wires": []
    },
    {
        "id": "53e6a95cf5296530",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 540,
        "wires": []
    },
    {
        "id": "70351a6b5dde93e2",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 700,
        "wires": []
    },
    {
        "id": "8d2bb507c4cfec78",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond KWHCH1",
        "links": [
            "af7216bfab4ca2b0"
        ],
        "x": 295,
        "y": 820,
        "wires": [
            [
                "977b345fefa29ca3",
                "294d9b2ce7d3e606"
            ]
        ]
    },
    {
        "id": "9440f0e42f5696a7",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1470,
        "y": 680,
        "wires": [
            [
                "184882ad6fd87529",
                "f8b8d2ab2d47fe68"
            ]
        ]
    },
    {
        "id": "184882ad6fd87529",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 620,
        "wires": [
            [
                "7b1c3ef268974d4f",
                "c352bef4b68cf91e"
            ]
        ]
    },
    {
        "id": "f8b8d2ab2d47fe68",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 700,
        "wires": []
    },
    {
        "id": "c1dfcb32d93e7821",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no102= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 620,
        "wires": [
            [
                "184882ad6fd87529"
            ]
        ]
    },
    {
        "id": "977b345fefa29ca3",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 450,
        "y": 820,
        "wires": [
            [
                "708ab49ffb651157",
                "bdfc94ed631a739e"
            ],
            [
                "bdfc94ed631a739e"
            ],
            []
        ]
    },
    {
        "id": "708ab49ffb651157",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 793,
        "wires": []
    },
    {
        "id": "b72e917c35795ed6",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 360,
        "y": 880,
        "wires": [
            [
                "977b345fefa29ca3"
            ]
        ]
    },
    {
        "id": "bdfc94ed631a739e",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 680,
        "y": 840,
        "wires": [
            [
                "fefe10dd82d133ef"
            ]
        ]
    },
    {
        "id": "fefe10dd82d133ef",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 870,
        "y": 840,
        "wires": [
            [
                "7df01b066643beef"
            ]
        ]
    },
    {
        "id": "7df01b066643beef",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1100,
        "y": 840,
        "wires": [
            [
                "720c0af4fad16cd8"
            ]
        ]
    },
    {
        "id": "720c0af4fad16cd8",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 840,
        "wires": [
            [
                "5285ed6d768b1922"
            ],
            [
                "c3b81dea1269e725"
            ]
        ]
    },
    {
        "id": "c3b81dea1269e725",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1550,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "7dc76b7adf089ae1",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 310,
        "y": 580,
        "wires": []
    },
    {
        "id": "6384faf6f5d4bd2d",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 430,
        "y": 753,
        "wires": []
    },
    {
        "id": "d9d8b0f3b6d9d354",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 420,
        "y": 1000,
        "wires": []
    },
    {
        "id": "f697288c751fe2e5",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1670,
        "y": 580,
        "wires": []
    },
    {
        "id": "492bcff6c77ace22",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 920,
        "wires": []
    },
    {
        "id": "b986a27fda6b858c",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-CH1KWH",
        "links": [
            "83a19628633895f9"
        ],
        "x": 335,
        "y": 240,
        "wires": [
            [
                "7dc163f38509099f"
            ]
        ]
    },
    {
        "id": "7dc163f38509099f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWHCH1.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 240,
        "wires": [
            [
                "597affc645dcc2c7",
                "fa17147ed96c4eea"
            ]
        ]
    },
    {
        "id": "bedca11fbf7ec8d4",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 240,
        "wires": [
            [
                "6509caea628e7b23"
            ],
            [
                "ac16fbd3fd071147"
            ]
        ]
    },
    {
        "id": "6509caea628e7b23",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 220,
        "wires": [
            [
                "7d52ada5635b1a7d"
            ]
        ]
    },
    {
        "id": "ac16fbd3fd071147",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 260,
        "wires": [
            [
                "d1c7afcfd7effa96"
            ]
        ]
    },
    {
        "id": "7d52ada5635b1a7d",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1270,
        "y": 220,
        "wires": [
            [
                "f8f5e5490b764121"
            ]
        ]
    },
    {
        "id": "d1c7afcfd7effa96",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1270,
        "y": 260,
        "wires": [
            [
                "f8f5e5490b764121"
            ]
        ]
    },
    {
        "id": "597affc645dcc2c7",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 760,
        "y": 240,
        "wires": [
            [
                "bedca11fbf7ec8d4"
            ]
        ]
    },
    {
        "id": "c352bef4b68cf91e",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp KWHCH1",
        "mode": "link",
        "links": [
            "4dc91778b9bab9ea"
        ],
        "x": 1855,
        "y": 620,
        "wires": []
    },
    {
        "id": "3fef6eb7ada4ce7e",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1150,
        "y": 620,
        "wires": [
            [
                "c1dfcb32d93e7821"
            ]
        ]
    },
    {
        "id": "fa17147ed96c4eea",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 200,
        "wires": []
    },
    {
        "id": "16543d776d9db748",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 620,
        "wires": [
            [
                "3fef6eb7ada4ce7e"
            ]
        ]
    },
    {
        "id": "fbebbfe2eb6de51a",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 720,
        "wires": []
    },
    {
        "id": "8473bd41784ed288",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 410,
        "y": 160,
        "wires": []
    },
    {
        "id": "8d1c943284d52449",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 1080,
        "wires": [
            [
                "977b345fefa29ca3"
            ]
        ]
    },
    {
        "id": "7b1056f3eb59c761",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "KWH",
        "info": "",
        "x": 170,
        "y": 120,
        "wires": []
    },
    {
        "id": "b20525943a10d7be",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 1860,
        "wires": [
            [
                "ac972125c06360d9"
            ]
        ]
    },
    {
        "id": "ac972125c06360d9",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 1860,
        "wires": [
            [
                "f22c51f9c13eef69",
                "653b0909ee89b17f"
            ]
        ]
    },
    {
        "id": "937f71d792d9eb63",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 1900,
        "wires": [
            [
                "c2ed6e8d5416fb4a"
            ]
        ]
    },
    {
        "id": "60ddbb0edd75496a",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1490,
        "y": 2040,
        "wires": [
            [
                "134315d26aaf22b9"
            ]
        ]
    },
    {
        "id": "134315d26aaf22b9",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1730,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "56c72730f1bcd6ef",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 280,
        "y": 1860,
        "wires": [
            [
                "b20525943a10d7be"
            ]
        ]
    },
    {
        "id": "636159d0914fe9c7",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1170,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "653b0909ee89b17f",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 1860,
        "wires": [
            [
                "0d0b8c0e521593bd",
                "937f71d792d9eb63",
                "f28bacc5cccfbdb5"
            ],
            [
                "e23e10bc6f427959"
            ]
        ]
    },
    {
        "id": "66b18f3cbb6483b7",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 310,
        "y": 2440,
        "wires": [
            [
                "636159d0914fe9c7"
            ]
        ]
    },
    {
        "id": "3fbf63025e66d090",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 460,
        "y": 2320,
        "wires": [
            [
                "88a0eb959b0f4972"
            ]
        ]
    },
    {
        "id": "88a0eb959b0f4972",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 660,
        "y": 2320,
        "wires": [
            [
                "ea9afd37e4f79407"
            ]
        ]
    },
    {
        "id": "12ba1f5bd5d5513c",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 300,
        "y": 2320,
        "wires": [
            [
                "3fbf63025e66d090"
            ]
        ]
    },
    {
        "id": "832f62203bd0a684",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 290,
        "y": 2400,
        "wires": []
    },
    {
        "id": "abcba628d34f9259",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 640,
        "y": 1820,
        "wires": []
    },
    {
        "id": "2286538ea1a8abb4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 350,
        "y": 2280,
        "wires": []
    },
    {
        "id": "85aabdbc3276e31f",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 1440,
        "wires": []
    },
    {
        "id": "398447e914d709c2",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 1900,
        "wires": []
    },
    {
        "id": "f22c51f9c13eef69",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1900,
        "wires": []
    },
    {
        "id": "0d0b8c0e521593bd",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1780,
        "wires": []
    },
    {
        "id": "e23e10bc6f427959",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1940,
        "wires": []
    },
    {
        "id": "23b4cc1a79a1744c",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond KWCH",
        "links": [
            "0ac2e3fd4fb82f72"
        ],
        "x": 335,
        "y": 2060,
        "wires": [
            [
                "2da2e1a69e5b6a0b",
                "ac6cdf05a7a703a3"
            ]
        ]
    },
    {
        "id": "8906ddfaf13e3e35",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1510,
        "y": 1920,
        "wires": [
            [
                "ae6b65f2b9ab33a4",
                "0d4d26e97cfac76d"
            ]
        ]
    },
    {
        "id": "ae6b65f2b9ab33a4",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 1860,
        "wires": [
            [
                "398447e914d709c2",
                "725b2f52cbef44fa"
            ]
        ]
    },
    {
        "id": "0d4d26e97cfac76d",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 1940,
        "wires": []
    },
    {
        "id": "c2ed6e8d5416fb4a",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no104= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 1860,
        "wires": [
            [
                "ae6b65f2b9ab33a4"
            ]
        ]
    },
    {
        "id": "2da2e1a69e5b6a0b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 2060,
        "wires": [
            [
                "9e1e25df7cd0ccbd",
                "a87645d0a43f619e"
            ],
            [
                "a87645d0a43f619e"
            ],
            []
        ]
    },
    {
        "id": "9e1e25df7cd0ccbd",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 2033,
        "wires": []
    },
    {
        "id": "5c80e86004b15d7b",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 400,
        "y": 2120,
        "wires": [
            [
                "2da2e1a69e5b6a0b"
            ]
        ]
    },
    {
        "id": "a87645d0a43f619e",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 2080,
        "wires": [
            [
                "91848190338f5ef1"
            ]
        ]
    },
    {
        "id": "91848190338f5ef1",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 910,
        "y": 2080,
        "wires": [
            [
                "af64fa8218a7a5c6"
            ]
        ]
    },
    {
        "id": "af64fa8218a7a5c6",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 2080,
        "wires": [
            [
                "19ecf30aaf06c49b"
            ]
        ]
    },
    {
        "id": "19ecf30aaf06c49b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1330,
        "y": 2080,
        "wires": [
            [
                "60ddbb0edd75496a"
            ],
            [
                "f6b662ae7af3a73a"
            ]
        ]
    },
    {
        "id": "f6b662ae7af3a73a",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1590,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "061fdd593792986b",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 350,
        "y": 1820,
        "wires": []
    },
    {
        "id": "f53fc91e0d8f4195",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 470,
        "y": 1993,
        "wires": []
    },
    {
        "id": "6579ac46959ac896",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 2240,
        "wires": []
    },
    {
        "id": "58dd4560311dd7f8",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1710,
        "y": 1820,
        "wires": []
    },
    {
        "id": "2dd8820328091a79",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 500,
        "y": 2160,
        "wires": []
    },
    {
        "id": "ef9a289af72e0f51",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-KW",
        "links": [
            "564ef11729c394ba",
            "0211322a7a16f959"
        ],
        "x": 375,
        "y": 1480,
        "wires": [
            [
                "64dd729716fb63bc"
            ]
        ]
    },
    {
        "id": "64dd729716fb63bc",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWCH1.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1480,
        "wires": [
            [
                "868fd2af46de1573",
                "bb488a36d5c1188a"
            ]
        ]
    },
    {
        "id": "37b415fa215c87b3",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1480,
        "wires": [
            [
                "7317aa1621f30e7b"
            ],
            [
                "b8ae4c65d4ef138a"
            ]
        ]
    },
    {
        "id": "7317aa1621f30e7b",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1460,
        "wires": [
            [
                "f71e18425671e779"
            ]
        ]
    },
    {
        "id": "b8ae4c65d4ef138a",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1500,
        "wires": [
            [
                "e1124b6f8a653f63"
            ]
        ]
    },
    {
        "id": "f71e18425671e779",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1460,
        "wires": [
            [
                "e26079c7ee3fdb8a"
            ]
        ]
    },
    {
        "id": "e1124b6f8a653f63",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1500,
        "wires": [
            [
                "e26079c7ee3fdb8a"
            ]
        ]
    },
    {
        "id": "868fd2af46de1573",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 800,
        "y": 1480,
        "wires": [
            [
                "37b415fa215c87b3"
            ]
        ]
    },
    {
        "id": "725b2f52cbef44fa",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp KWCH1",
        "mode": "link",
        "links": [
            "732ca488e67801c1"
        ],
        "x": 1895,
        "y": 1860,
        "wires": []
    },
    {
        "id": "2c705e10c9146ddc",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "19",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 1860,
        "wires": [
            [
                "c2ed6e8d5416fb4a"
            ]
        ]
    },
    {
        "id": "bb488a36d5c1188a",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1440,
        "wires": []
    },
    {
        "id": "f28bacc5cccfbdb5",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1860,
        "wires": [
            [
                "2c705e10c9146ddc"
            ]
        ]
    },
    {
        "id": "18424de20cd865fe",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 490,
        "y": 1960,
        "wires": []
    },
    {
        "id": "991eed072f4a9268",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 1400,
        "wires": []
    },
    {
        "id": "ea9afd37e4f79407",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 2320,
        "wires": [
            [
                "2da2e1a69e5b6a0b"
            ]
        ]
    },
    {
        "id": "766047d478f92ef5",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "KW",
        "info": "",
        "x": 210,
        "y": 1360,
        "wires": []
    },
    {
        "id": "7dbad2f16d895b0b",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 400,
        "y": 3080,
        "wires": [
            [
                "249d77df629075de"
            ]
        ]
    },
    {
        "id": "249d77df629075de",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 590,
        "y": 3080,
        "wires": [
            [
                "5a5f349f2857f234",
                "f9f15a62936878e6"
            ]
        ]
    },
    {
        "id": "068cbd0cf3e09db1",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 3120,
        "wires": [
            [
                "d9221ac791f6fca0"
            ]
        ]
    },
    {
        "id": "6b4ea12bb4f2338a",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1450,
        "y": 3260,
        "wires": [
            [
                "a1b353cf0f525e23"
            ]
        ]
    },
    {
        "id": "a1b353cf0f525e23",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1690,
        "y": 3260,
        "wires": [
            []
        ]
    },
    {
        "id": "3e393dba517d2610",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 240,
        "y": 3080,
        "wires": [
            [
                "7dbad2f16d895b0b"
            ]
        ]
    },
    {
        "id": "feced85a548a0b7f",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1130,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "f9f15a62936878e6",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 3080,
        "wires": [
            [
                "2e4f61527a31c519",
                "068cbd0cf3e09db1",
                "a8de913e403e7118"
            ],
            [
                "dc575daddf9c8b6c"
            ]
        ]
    },
    {
        "id": "f3874d7a0dc898c8",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 270,
        "y": 3660,
        "wires": [
            [
                "feced85a548a0b7f"
            ]
        ]
    },
    {
        "id": "1de6790191924ed8",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 3540,
        "wires": [
            [
                "59dd36c8bfb40051"
            ]
        ]
    },
    {
        "id": "59dd36c8bfb40051",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 620,
        "y": 3540,
        "wires": [
            [
                "f0f4d11bef220cd3"
            ]
        ]
    },
    {
        "id": "87327aa4b31453db",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 260,
        "y": 3540,
        "wires": [
            [
                "1de6790191924ed8"
            ]
        ]
    },
    {
        "id": "02b2983e1fe4d859",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 250,
        "y": 3620,
        "wires": []
    },
    {
        "id": "6617e07f8c7a2c06",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 600,
        "y": 3040,
        "wires": []
    },
    {
        "id": "3d99f57cad9d71d2",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 310,
        "y": 3500,
        "wires": []
    },
    {
        "id": "4cd30ba59952847a",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 2660,
        "wires": []
    },
    {
        "id": "98a8b5c0d950ae28",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 3120,
        "wires": []
    },
    {
        "id": "5a5f349f2857f234",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 3120,
        "wires": []
    },
    {
        "id": "2e4f61527a31c519",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 3000,
        "wires": []
    },
    {
        "id": "dc575daddf9c8b6c",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 3160,
        "wires": []
    },
    {
        "id": "81b177414b6b83ee",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond VOLTCH",
        "links": [
            "a763c53de7af1558"
        ],
        "x": 295,
        "y": 3280,
        "wires": [
            [
                "a1bf2bf8963f340e",
                "44ee6608c7cad7b4"
            ]
        ]
    },
    {
        "id": "027d7333ade6f251",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1470,
        "y": 3140,
        "wires": [
            [
                "ce426d740efbdaa7",
                "9a6d7f233c6f3375"
            ]
        ]
    },
    {
        "id": "ce426d740efbdaa7",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 3080,
        "wires": [
            [
                "98a8b5c0d950ae28",
                "44b21b437f616e2d"
            ]
        ]
    },
    {
        "id": "9a6d7f233c6f3375",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 3160,
        "wires": []
    },
    {
        "id": "d9221ac791f6fca0",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no105= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 3080,
        "wires": [
            [
                "ce426d740efbdaa7"
            ]
        ]
    },
    {
        "id": "a1bf2bf8963f340e",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 450,
        "y": 3280,
        "wires": [
            [
                "cc4f06e4144d0f71",
                "b6292d5a5bcf10a9"
            ],
            [
                "b6292d5a5bcf10a9"
            ],
            []
        ]
    },
    {
        "id": "cc4f06e4144d0f71",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 3253,
        "wires": []
    },
    {
        "id": "6d67ce146a637554",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 360,
        "y": 3340,
        "wires": [
            [
                "a1bf2bf8963f340e"
            ]
        ]
    },
    {
        "id": "b6292d5a5bcf10a9",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 680,
        "y": 3300,
        "wires": [
            [
                "98c5a11f7ed825d4"
            ]
        ]
    },
    {
        "id": "98c5a11f7ed825d4",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 870,
        "y": 3300,
        "wires": [
            [
                "a9966ed4454e6e3d"
            ]
        ]
    },
    {
        "id": "a9966ed4454e6e3d",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1100,
        "y": 3300,
        "wires": [
            [
                "03d2508ce7aa927c"
            ]
        ]
    },
    {
        "id": "03d2508ce7aa927c",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 3300,
        "wires": [
            [
                "6b4ea12bb4f2338a"
            ],
            [
                "5bb11afcf9655372"
            ]
        ]
    },
    {
        "id": "5bb11afcf9655372",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1550,
        "y": 3320,
        "wires": [
            []
        ]
    },
    {
        "id": "987579c9eb603ba6",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 310,
        "y": 3040,
        "wires": []
    },
    {
        "id": "5adfd598f17597eb",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 430,
        "y": 3213,
        "wires": []
    },
    {
        "id": "eb4c737e517f1656",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 420,
        "y": 3460,
        "wires": []
    },
    {
        "id": "dd6cd79a369f8846",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1670,
        "y": 3040,
        "wires": []
    },
    {
        "id": "cefe278c3a8773da",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 3380,
        "wires": []
    },
    {
        "id": "44b0a25f5b2b1e1d",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-VOLT",
        "links": [
            "02b280fbec31d90e",
            "0fa4179f2ea0a2aa"
        ],
        "x": 335,
        "y": 2700,
        "wires": [
            [
                "f3d6b8b0db13d666"
            ]
        ]
    },
    {
        "id": "f3d6b8b0db13d666",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_VOLTCH1.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 2700,
        "wires": [
            [
                "02b7a2b09111da2a",
                "e29b53acaabc6c0b"
            ]
        ]
    },
    {
        "id": "46df2c03d10134ad",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 930,
        "y": 2700,
        "wires": [
            [
                "b63778e6f59a8968"
            ],
            [
                "d90ed63eb1f98bc0"
            ]
        ]
    },
    {
        "id": "b63778e6f59a8968",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 2680,
        "wires": [
            [
                "7f8cea78552cbf51"
            ]
        ]
    },
    {
        "id": "d90ed63eb1f98bc0",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 2720,
        "wires": [
            [
                "ea8066e2f4916b30"
            ]
        ]
    },
    {
        "id": "7f8cea78552cbf51",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1270,
        "y": 2680,
        "wires": [
            [
                "9efdfba5892f2163"
            ]
        ]
    },
    {
        "id": "ea8066e2f4916b30",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1270,
        "y": 2720,
        "wires": [
            [
                "9efdfba5892f2163"
            ]
        ]
    },
    {
        "id": "02b7a2b09111da2a",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 760,
        "y": 2700,
        "wires": [
            [
                "46df2c03d10134ad"
            ]
        ]
    },
    {
        "id": "44b21b437f616e2d",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp VOLTCH1",
        "mode": "link",
        "links": [
            "81a660229a5ddbbf"
        ],
        "x": 1855,
        "y": 3080,
        "wires": []
    },
    {
        "id": "d3527536162d072b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "20",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1150,
        "y": 3080,
        "wires": [
            [
                "d9221ac791f6fca0"
            ]
        ]
    },
    {
        "id": "e29b53acaabc6c0b",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 2660,
        "wires": []
    },
    {
        "id": "a8de913e403e7118",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 3080,
        "wires": [
            [
                "d3527536162d072b"
            ]
        ]
    },
    {
        "id": "71cb6041356047de",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 3180,
        "wires": []
    },
    {
        "id": "1f6cf6c625be9e9b",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 410,
        "y": 2620,
        "wires": []
    },
    {
        "id": "f0f4d11bef220cd3",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 3540,
        "wires": [
            [
                "a1bf2bf8963f340e"
            ]
        ]
    },
    {
        "id": "a01fd1c9a3eb64b5",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "VOLTAGE",
        "info": "",
        "x": 180,
        "y": 2580,
        "wires": []
    },
    {
        "id": "74e02a7820bd12da",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 4320,
        "wires": [
            [
                "7b66d1e8c046748f"
            ]
        ]
    },
    {
        "id": "7b66d1e8c046748f",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 4320,
        "wires": [
            [
                "8064da9f66bb1536",
                "cfea39e6ab6d6487"
            ]
        ]
    },
    {
        "id": "ccdbf3755c58b66a",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 4360,
        "wires": [
            [
                "6c86c27dbc62d34a"
            ]
        ]
    },
    {
        "id": "18bd0bff674f1fca",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1490,
        "y": 4500,
        "wires": [
            [
                "d3da814053fc2c23"
            ]
        ]
    },
    {
        "id": "d3da814053fc2c23",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1730,
        "y": 4500,
        "wires": [
            []
        ]
    },
    {
        "id": "f34692b384149aa2",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 280,
        "y": 4320,
        "wires": [
            [
                "74e02a7820bd12da"
            ]
        ]
    },
    {
        "id": "2bdbc3f4cbd5a4da",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1170,
        "y": 4900,
        "wires": [
            []
        ]
    },
    {
        "id": "cfea39e6ab6d6487",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 4320,
        "wires": [
            [
                "550fcd51c0b826c9",
                "ccdbf3755c58b66a",
                "48bd3ddb9b50932a"
            ],
            [
                "6c4152c0a6db8d01"
            ]
        ]
    },
    {
        "id": "15d8f94cb22f415a",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 310,
        "y": 4900,
        "wires": [
            [
                "2bdbc3f4cbd5a4da"
            ]
        ]
    },
    {
        "id": "8420603996dc3066",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 460,
        "y": 4780,
        "wires": [
            [
                "165fc2333d8fea15"
            ]
        ]
    },
    {
        "id": "165fc2333d8fea15",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 660,
        "y": 4780,
        "wires": [
            [
                "052380ed494eb88a"
            ]
        ]
    },
    {
        "id": "681a38e4e02c539b",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 300,
        "y": 4780,
        "wires": [
            [
                "8420603996dc3066"
            ]
        ]
    },
    {
        "id": "2f79b2790ffbaca6",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 290,
        "y": 4860,
        "wires": []
    },
    {
        "id": "7a267b5ecee6aa1a",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 640,
        "y": 4280,
        "wires": []
    },
    {
        "id": "659a4c2d9c86cce4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 350,
        "y": 4740,
        "wires": []
    },
    {
        "id": "f55dd60ef8ac1404",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 3900,
        "wires": []
    },
    {
        "id": "fa4d257eeccaa0d1",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 4360,
        "wires": []
    },
    {
        "id": "8064da9f66bb1536",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 4360,
        "wires": []
    },
    {
        "id": "550fcd51c0b826c9",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 4240,
        "wires": []
    },
    {
        "id": "6c4152c0a6db8d01",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 4400,
        "wires": []
    },
    {
        "id": "ee54313004379b61",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond CURRENTCH",
        "links": [
            "9d6546f0eb60f9ab"
        ],
        "x": 335,
        "y": 4520,
        "wires": [
            [
                "9cf5b55d73803d0c",
                "cfc11675bcdd2885"
            ]
        ]
    },
    {
        "id": "ba55261c3b534d0c",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1510,
        "y": 4380,
        "wires": [
            [
                "ede2479665e97d38",
                "70beb18339e52f64"
            ]
        ]
    },
    {
        "id": "ede2479665e97d38",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 4320,
        "wires": [
            [
                "fa4d257eeccaa0d1",
                "3a661b85ee542284"
            ]
        ]
    },
    {
        "id": "70beb18339e52f64",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 4400,
        "wires": []
    },
    {
        "id": "6c86c27dbc62d34a",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no106= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 4320,
        "wires": [
            [
                "ede2479665e97d38"
            ]
        ]
    },
    {
        "id": "9cf5b55d73803d0c",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 4520,
        "wires": [
            [
                "fb6c0c89dc1eab1b",
                "7476390f0e12c644"
            ],
            [
                "7476390f0e12c644"
            ],
            []
        ]
    },
    {
        "id": "fb6c0c89dc1eab1b",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 4493,
        "wires": []
    },
    {
        "id": "c66105fd7e3995d4",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 400,
        "y": 4580,
        "wires": [
            [
                "9cf5b55d73803d0c"
            ]
        ]
    },
    {
        "id": "7476390f0e12c644",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 4540,
        "wires": [
            [
                "1b45363d6c655111"
            ]
        ]
    },
    {
        "id": "1b45363d6c655111",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 910,
        "y": 4540,
        "wires": [
            [
                "6bb3b310efb494e8"
            ]
        ]
    },
    {
        "id": "6bb3b310efb494e8",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 4540,
        "wires": [
            [
                "e68aa81878cf095b"
            ]
        ]
    },
    {
        "id": "e68aa81878cf095b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1330,
        "y": 4540,
        "wires": [
            [
                "18bd0bff674f1fca"
            ],
            [
                "1837352b6c625b31"
            ]
        ]
    },
    {
        "id": "1837352b6c625b31",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1590,
        "y": 4560,
        "wires": [
            []
        ]
    },
    {
        "id": "c811def2d3e94682",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 350,
        "y": 4280,
        "wires": []
    },
    {
        "id": "8e6528b4aa124907",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 470,
        "y": 4453,
        "wires": []
    },
    {
        "id": "6c2a0c038ee3077c",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 4700,
        "wires": []
    },
    {
        "id": "3f595f39b2d4bec9",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1710,
        "y": 4280,
        "wires": []
    },
    {
        "id": "52210e8d66a393da",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 500,
        "y": 4620,
        "wires": []
    },
    {
        "id": "b5787e7f36490fff",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-CURRENT",
        "links": [
            "768229f5136e82b5",
            "c7aeb1049e9ad179"
        ],
        "x": 375,
        "y": 3940,
        "wires": [
            [
                "3744f3ab85d043cb"
            ]
        ]
    },
    {
        "id": "3744f3ab85d043cb",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_CURRENTCH1.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 3940,
        "wires": [
            [
                "1799b2bac3e65562",
                "2b338697251367d6"
            ]
        ]
    },
    {
        "id": "5defd465bbf088d9",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 3940,
        "wires": [
            [
                "7ac821ad8b784a52"
            ],
            [
                "5c58e0478dd5beb6"
            ]
        ]
    },
    {
        "id": "7ac821ad8b784a52",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 3920,
        "wires": [
            [
                "b59db8ed446ab5d1"
            ]
        ]
    },
    {
        "id": "5c58e0478dd5beb6",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 3960,
        "wires": [
            [
                "f22eb531efc38e80"
            ]
        ]
    },
    {
        "id": "b59db8ed446ab5d1",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 3920,
        "wires": [
            [
                "74e9a3160f21d1c9"
            ]
        ]
    },
    {
        "id": "f22eb531efc38e80",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 3960,
        "wires": [
            [
                "74e9a3160f21d1c9"
            ]
        ]
    },
    {
        "id": "1799b2bac3e65562",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 800,
        "y": 3940,
        "wires": [
            [
                "5defd465bbf088d9"
            ]
        ]
    },
    {
        "id": "3a661b85ee542284",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp CURRENTCH1",
        "mode": "link",
        "links": [
            "6763f130ae5a0305"
        ],
        "x": 1895,
        "y": 4320,
        "wires": []
    },
    {
        "id": "daf9938795037858",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "21",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 4320,
        "wires": [
            [
                "6c86c27dbc62d34a"
            ]
        ]
    },
    {
        "id": "2b338697251367d6",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 3900,
        "wires": []
    },
    {
        "id": "48bd3ddb9b50932a",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 4320,
        "wires": [
            [
                "daf9938795037858"
            ]
        ]
    },
    {
        "id": "a6549dbaeff370d5",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 490,
        "y": 4420,
        "wires": []
    },
    {
        "id": "47ec4b2fc3853d67",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 3860,
        "wires": []
    },
    {
        "id": "052380ed494eb88a",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 4780,
        "wires": [
            [
                "9cf5b55d73803d0c"
            ]
        ]
    },
    {
        "id": "f4b2bbc88f0097f3",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "CURRENT",
        "info": "",
        "x": 220,
        "y": 3820,
        "wires": []
    },
    {
        "id": "461685e22ef52ae1",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1020,
        "wires": [
            [
                "6df3118bccce07cb"
            ]
        ]
    },
    {
        "id": "e94330a37da6c576",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1410,
        "y": 1020,
        "wires": [
            [
                "58a9437a9934b26b"
            ],
            [
                "1f29855eeff471c0"
            ]
        ]
    },
    {
        "id": "58a9437a9934b26b",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1000,
        "wires": [
            [
                "afc75870d10e1a9b"
            ]
        ]
    },
    {
        "id": "1f29855eeff471c0",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1040,
        "wires": [
            [
                "cd51c17d17caf09c"
            ]
        ]
    },
    {
        "id": "f3e1f475a3d6faed",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1890,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "6df3118bccce07cb",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1240,
        "y": 1020,
        "wires": [
            [
                "e94330a37da6c576"
            ]
        ]
    },
    {
        "id": "89d9378ef5ce82de",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1150,
        "y": 980,
        "wires": []
    },
    {
        "id": "cd51c17d17caf09c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1040,
        "wires": [
            [
                "f3e1f475a3d6faed"
            ]
        ]
    },
    {
        "id": "afc75870d10e1a9b",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1000,
        "wires": [
            [
                "f3e1f475a3d6faed"
            ]
        ]
    },
    {
        "id": "294d9b2ce7d3e606",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter18",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 920,
        "wires": [
            [
                "461685e22ef52ae1"
            ]
        ]
    },
    {
        "id": "b895ef89b69092db",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1kw_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 2260,
        "wires": [
            [
                "66981255ec9beba1"
            ]
        ]
    },
    {
        "id": "27f8c00146f2eb8c",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1490,
        "y": 2260,
        "wires": [
            [
                "9f8636c926f86912"
            ],
            [
                "fbf88b0f09dc495c"
            ]
        ]
    },
    {
        "id": "9f8636c926f86912",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1680,
        "y": 2240,
        "wires": [
            [
                "31a0d3d9dd9ff9b2"
            ]
        ]
    },
    {
        "id": "fbf88b0f09dc495c",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1680,
        "y": 2280,
        "wires": [
            [
                "ff96ac7b5ab55574"
            ]
        ]
    },
    {
        "id": "7ad744999eb5e144",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1970,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "66981255ec9beba1",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1320,
        "y": 2260,
        "wires": [
            [
                "27f8c00146f2eb8c"
            ]
        ]
    },
    {
        "id": "b9072b8f988ef6d4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1230,
        "y": 2220,
        "wires": []
    },
    {
        "id": "ff96ac7b5ab55574",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 2280,
        "wires": [
            [
                "7ad744999eb5e144"
            ]
        ]
    },
    {
        "id": "31a0d3d9dd9ff9b2",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1850,
        "y": 2240,
        "wires": [
            [
                "7ad744999eb5e144"
            ]
        ]
    },
    {
        "id": "ac6cdf05a7a703a3",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter19",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 940,
        "y": 2160,
        "wires": [
            [
                "b895ef89b69092db"
            ]
        ]
    },
    {
        "id": "e0164a4e036efe8f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1volt_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 3480,
        "wires": [
            [
                "11f583a11ab39b99"
            ]
        ]
    },
    {
        "id": "3fef82d207cce34a",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1410,
        "y": 3480,
        "wires": [
            [
                "87397db695521b4b"
            ],
            [
                "7cabe896c4083e20"
            ]
        ]
    },
    {
        "id": "87397db695521b4b",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 3460,
        "wires": [
            [
                "0878423abe3b662f"
            ]
        ]
    },
    {
        "id": "7cabe896c4083e20",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 3500,
        "wires": [
            [
                "1584492fb23de922"
            ]
        ]
    },
    {
        "id": "69a50b5077a9610a",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1890,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "11f583a11ab39b99",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1240,
        "y": 3480,
        "wires": [
            [
                "3fef82d207cce34a"
            ]
        ]
    },
    {
        "id": "f072cc2eae2fe1f9",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1150,
        "y": 3440,
        "wires": []
    },
    {
        "id": "1584492fb23de922",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 3500,
        "wires": [
            [
                "69a50b5077a9610a"
            ]
        ]
    },
    {
        "id": "0878423abe3b662f",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 3460,
        "wires": [
            [
                "69a50b5077a9610a"
            ]
        ]
    },
    {
        "id": "44ee6608c7cad7b4",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter20",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 3380,
        "wires": [
            [
                "e0164a4e036efe8f"
            ]
        ]
    },
    {
        "id": "8d98021d698a59ba",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1current_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 4720,
        "wires": [
            [
                "79aa0ace50e83023"
            ]
        ]
    },
    {
        "id": "8153496821b767dc",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1470,
        "y": 4720,
        "wires": [
            [
                "7a3f7c00e8fbbee2"
            ],
            [
                "91f3c9761ae7be3d"
            ]
        ]
    },
    {
        "id": "7a3f7c00e8fbbee2",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 4700,
        "wires": [
            [
                "f37622e75fd2af8c"
            ]
        ]
    },
    {
        "id": "91f3c9761ae7be3d",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 4740,
        "wires": [
            [
                "51c3ef1f489bfd3b"
            ]
        ]
    },
    {
        "id": "09d4b116f6e63486",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1950,
        "y": 4720,
        "wires": [
            []
        ]
    },
    {
        "id": "79aa0ace50e83023",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1300,
        "y": 4720,
        "wires": [
            [
                "8153496821b767dc"
            ]
        ]
    },
    {
        "id": "2757c31e0952bad4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1210,
        "y": 4680,
        "wires": []
    },
    {
        "id": "51c3ef1f489bfd3b",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 4740,
        "wires": [
            [
                "09d4b116f6e63486"
            ]
        ]
    },
    {
        "id": "f37622e75fd2af8c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 4700,
        "wires": [
            [
                "09d4b116f6e63486"
            ]
        ]
    },
    {
        "id": "cfc11675bcdd2885",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter21",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 4620,
        "wires": [
            [
                "8d98021d698a59ba"
            ]
        ]
    },
    {
        "id": "a8d9875145cc95b4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "EM CH1",
        "info": "",
        "x": 160,
        "y": 60,
        "wires": []
    },
    {
        "id": "f8f5e5490b764121",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1440,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "e26079c7ee3fdb8a",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "9efdfba5892f2163",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1440,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "74e9a3160f21d1c9",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 3880,
        "wires": [
            []
        ]
    },
    {
        "id": "01ebf5c28a4cfac9",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2620,
        "y": 620,
        "wires": [
            [
                "4e2fd28e3c13825c"
            ]
        ]
    },
    {
        "id": "4e2fd28e3c13825c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2810,
        "y": 620,
        "wires": [
            [
                "56e0d4093cb636f4",
                "32e20f3909d2653b"
            ]
        ]
    },
    {
        "id": "826d3afcbc09b5a4",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3240,
        "y": 660,
        "wires": [
            [
                "5cd5da064e18dffd"
            ]
        ]
    },
    {
        "id": "f4a7eabb6bbff8bb",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3670,
        "y": 800,
        "wires": [
            [
                "dd51621a6d053d31"
            ]
        ]
    },
    {
        "id": "dd51621a6d053d31",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3910,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "a2bf15cbe285e955",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2460,
        "y": 620,
        "wires": [
            [
                "01ebf5c28a4cfac9"
            ]
        ]
    },
    {
        "id": "bb7224b21c25f072",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3350,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "32e20f3909d2653b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2990,
        "y": 620,
        "wires": [
            [
                "82e5595e538aa0ac",
                "826d3afcbc09b5a4",
                "09770914b6576c6f"
            ],
            [
                "403078387e492ec1"
            ]
        ]
    },
    {
        "id": "207e795715d4b78c",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2490,
        "y": 1200,
        "wires": [
            [
                "bb7224b21c25f072"
            ]
        ]
    },
    {
        "id": "415520c61ad6c273",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2640,
        "y": 1080,
        "wires": [
            [
                "faaca6bb1b2a6e7c"
            ]
        ]
    },
    {
        "id": "faaca6bb1b2a6e7c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2840,
        "y": 1080,
        "wires": [
            [
                "6369135b096875c9"
            ]
        ]
    },
    {
        "id": "0b41a6f770e5f756",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2480,
        "y": 1080,
        "wires": [
            [
                "415520c61ad6c273"
            ]
        ]
    },
    {
        "id": "252bb39a42283dcd",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 2470,
        "y": 1160,
        "wires": []
    },
    {
        "id": "321f4747c39525c9",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2820,
        "y": 580,
        "wires": []
    },
    {
        "id": "9e2bc3f008a9795b",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2530,
        "y": 1040,
        "wires": []
    },
    {
        "id": "c9663e9a1ec76da1",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2660,
        "y": 200,
        "wires": []
    },
    {
        "id": "549a928f34aeffa1",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3890,
        "y": 660,
        "wires": []
    },
    {
        "id": "56e0d4093cb636f4",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2830,
        "y": 660,
        "wires": []
    },
    {
        "id": "82e5595e538aa0ac",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 540,
        "wires": []
    },
    {
        "id": "403078387e492ec1",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3190,
        "y": 700,
        "wires": []
    },
    {
        "id": "19445a0cbcc2f407",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond RTHCH1",
        "links": [
            "4510ce6dd17e0245"
        ],
        "x": 2515,
        "y": 820,
        "wires": [
            [
                "b09d770f36b89d67",
                "5389c7ff04559c71"
            ]
        ]
    },
    {
        "id": "ca81d77526f3acc3",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3690,
        "y": 680,
        "wires": [
            [
                "b01b11523df1c28f",
                "ad4e3a4b7c0da5f0"
            ]
        ]
    },
    {
        "id": "b01b11523df1c28f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3820,
        "y": 620,
        "wires": [
            [
                "549a928f34aeffa1",
                "d0d9b55f94f0e454"
            ]
        ]
    },
    {
        "id": "ad4e3a4b7c0da5f0",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3870,
        "y": 700,
        "wires": []
    },
    {
        "id": "5cd5da064e18dffd",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no103= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3540,
        "y": 620,
        "wires": [
            [
                "b01b11523df1c28f"
            ]
        ]
    },
    {
        "id": "b09d770f36b89d67",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2670,
        "y": 820,
        "wires": [
            [
                "c80fc524dd756f94",
                "0e831cf575ea77c5"
            ],
            [
                "0e831cf575ea77c5"
            ],
            []
        ]
    },
    {
        "id": "c80fc524dd756f94",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2870,
        "y": 793,
        "wires": []
    },
    {
        "id": "762efcc3bc03c472",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2580,
        "y": 880,
        "wires": [
            [
                "b09d770f36b89d67"
            ]
        ]
    },
    {
        "id": "0e831cf575ea77c5",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2900,
        "y": 840,
        "wires": [
            [
                "d9d40dce849fda55"
            ]
        ]
    },
    {
        "id": "d9d40dce849fda55",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3090,
        "y": 840,
        "wires": [
            [
                "c3e09b3f86e7eb36"
            ]
        ]
    },
    {
        "id": "c3e09b3f86e7eb36",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3320,
        "y": 840,
        "wires": [
            [
                "f7928d68a9a33e2b"
            ]
        ]
    },
    {
        "id": "f7928d68a9a33e2b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3510,
        "y": 840,
        "wires": [
            [
                "f4a7eabb6bbff8bb"
            ],
            [
                "aa0b681ff54cb901"
            ]
        ]
    },
    {
        "id": "aa0b681ff54cb901",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH1.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3770,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "9c7df10e79d08fef",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2530,
        "y": 580,
        "wires": []
    },
    {
        "id": "c712ee33641a5714",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2650,
        "y": 753,
        "wires": []
    },
    {
        "id": "04298a8773ef39a5",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2640,
        "y": 1000,
        "wires": []
    },
    {
        "id": "59513e96e833908f",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3890,
        "y": 580,
        "wires": []
    },
    {
        "id": "3f9fb92807fb5cc3",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2680,
        "y": 920,
        "wires": []
    },
    {
        "id": "b86a4f322ee05e06",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-CH1RTH",
        "links": [
            "77fe85eb733ad3bc"
        ],
        "x": 2555,
        "y": 240,
        "wires": [
            [
                "9d03de13c3c77612"
            ]
        ]
    },
    {
        "id": "9d03de13c3c77612",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_RTHCH1.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2790,
        "y": 240,
        "wires": [
            [
                "f63d1d377bec4d1e",
                "04cc5b9a7925db39"
            ]
        ]
    },
    {
        "id": "89f22e09ff63bd13",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3150,
        "y": 240,
        "wires": [
            [
                "88ac75e5d50e55aa"
            ],
            [
                "b2529c615a83d6d7"
            ]
        ]
    },
    {
        "id": "88ac75e5d50e55aa",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3340,
        "y": 220,
        "wires": [
            [
                "2cdb26c1adf3744c"
            ]
        ]
    },
    {
        "id": "b2529c615a83d6d7",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3340,
        "y": 260,
        "wires": [
            [
                "fb0ec12a42ab799b"
            ]
        ]
    },
    {
        "id": "2cdb26c1adf3744c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3490,
        "y": 220,
        "wires": [
            [
                "49cbff59ea502ef5"
            ]
        ]
    },
    {
        "id": "fb0ec12a42ab799b",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3490,
        "y": 260,
        "wires": [
            [
                "49cbff59ea502ef5"
            ]
        ]
    },
    {
        "id": "f63d1d377bec4d1e",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2980,
        "y": 240,
        "wires": [
            [
                "89f22e09ff63bd13"
            ]
        ]
    },
    {
        "id": "d0d9b55f94f0e454",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp RTHCH1",
        "mode": "link",
        "links": [
            "4dc91778b9bab9ea",
            "b0078309c529194c"
        ],
        "x": 4075,
        "y": 620,
        "wires": []
    },
    {
        "id": "1c2f67be47a1211a",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "41",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3370,
        "y": 620,
        "wires": [
            [
                "5cd5da064e18dffd"
            ]
        ]
    },
    {
        "id": "04cc5b9a7925db39",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2970,
        "y": 200,
        "wires": []
    },
    {
        "id": "09770914b6576c6f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3220,
        "y": 620,
        "wires": [
            [
                "1c2f67be47a1211a"
            ]
        ]
    },
    {
        "id": "391af9cf32ec337a",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2670,
        "y": 720,
        "wires": []
    },
    {
        "id": "5bfe52aec46174c2",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2630,
        "y": 160,
        "wires": []
    },
    {
        "id": "6369135b096875c9",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3020,
        "y": 1080,
        "wires": [
            [
                "b09d770f36b89d67"
            ]
        ]
    },
    {
        "id": "6aadcc2857f12d49",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RTHCH1",
        "info": "",
        "x": 2400,
        "y": 120,
        "wires": []
    },
    {
        "id": "a7bbdc6f19f57e62",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3270,
        "y": 1020,
        "wires": [
            [
                "0370cf9539ea823b"
            ]
        ]
    },
    {
        "id": "e41e7eeef2f585a3",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3630,
        "y": 1020,
        "wires": [
            [
                "49e7058dc3f39a8e"
            ],
            [
                "969cfbd5c01b7769"
            ]
        ]
    },
    {
        "id": "49e7058dc3f39a8e",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3820,
        "y": 1000,
        "wires": [
            [
                "e924f4d4c19db147"
            ]
        ]
    },
    {
        "id": "969cfbd5c01b7769",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3820,
        "y": 1040,
        "wires": [
            [
                "eeb71acac8adbb05"
            ]
        ]
    },
    {
        "id": "2eb78230296f8b8d",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4110,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "0370cf9539ea823b",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3460,
        "y": 1020,
        "wires": [
            [
                "e41e7eeef2f585a3"
            ]
        ]
    },
    {
        "id": "8c9023aa3267d033",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3370,
        "y": 980,
        "wires": []
    },
    {
        "id": "eeb71acac8adbb05",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3990,
        "y": 1040,
        "wires": [
            [
                "2eb78230296f8b8d"
            ]
        ]
    },
    {
        "id": "e924f4d4c19db147",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3990,
        "y": 1000,
        "wires": [
            [
                "2eb78230296f8b8d"
            ]
        ]
    },
    {
        "id": "5389c7ff04559c71",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter41",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3080,
        "y": 920,
        "wires": [
            [
                "a7bbdc6f19f57e62"
            ]
        ]
    },
    {
        "id": "49cbff59ea502ef5",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3660,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "e9578fe1b24970a3",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2600,
        "y": 1880,
        "wires": [
            [
                "1e0650681835f764"
            ]
        ]
    },
    {
        "id": "1e0650681835f764",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2790,
        "y": 1880,
        "wires": [
            [
                "08e92ac9d5a34f34",
                "7fae11e4847d66e9"
            ]
        ]
    },
    {
        "id": "1217326a6abf267d",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3220,
        "y": 1920,
        "wires": [
            [
                "dde5b31f2593a006"
            ]
        ]
    },
    {
        "id": "bd4d2b0822f74b15",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3650,
        "y": 2060,
        "wires": [
            [
                "b721d858f3ffe490"
            ]
        ]
    },
    {
        "id": "b721d858f3ffe490",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3890,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "72170f1ec8beab4c",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2440,
        "y": 1880,
        "wires": [
            [
                "e9578fe1b24970a3"
            ]
        ]
    },
    {
        "id": "be9723f956f971c7",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3330,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "7fae11e4847d66e9",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2970,
        "y": 1880,
        "wires": [
            [
                "f58423d6b4b54d0e",
                "1217326a6abf267d",
                "f4cc55b41370b560"
            ],
            [
                "6a495b40e445d449"
            ]
        ]
    },
    {
        "id": "99dce351be685b9a",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2470,
        "y": 2460,
        "wires": [
            [
                "be9723f956f971c7"
            ]
        ]
    },
    {
        "id": "8da42d4685eff95b",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2620,
        "y": 2340,
        "wires": [
            [
                "0f11b2ba48631d5e"
            ]
        ]
    },
    {
        "id": "0f11b2ba48631d5e",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2820,
        "y": 2340,
        "wires": [
            [
                "9dedfefad12255f5"
            ]
        ]
    },
    {
        "id": "b7fe69d74b1ac6b6",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2460,
        "y": 2340,
        "wires": [
            [
                "8da42d4685eff95b"
            ]
        ]
    },
    {
        "id": "d39bbf25192d68f6",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 2450,
        "y": 2420,
        "wires": []
    },
    {
        "id": "77a70514c26fb2e0",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2800,
        "y": 1840,
        "wires": []
    },
    {
        "id": "e59be9f5c17c61ac",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2510,
        "y": 2300,
        "wires": []
    },
    {
        "id": "d609995dde127c04",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2640,
        "y": 1460,
        "wires": []
    },
    {
        "id": "cb288749ca3137c7",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3870,
        "y": 1920,
        "wires": []
    },
    {
        "id": "08e92ac9d5a34f34",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2810,
        "y": 1920,
        "wires": []
    },
    {
        "id": "f58423d6b4b54d0e",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3170,
        "y": 1800,
        "wires": []
    },
    {
        "id": "6a495b40e445d449",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3170,
        "y": 1960,
        "wires": []
    },
    {
        "id": "99714d2132e2c90c",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond RTHCH2",
        "links": [
            "4bc266052ff459bc"
        ],
        "x": 2495,
        "y": 2080,
        "wires": [
            [
                "731b0818e8cd0d9f",
                "69824cb3b3106545"
            ]
        ]
    },
    {
        "id": "8211687d0416a3f1",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3670,
        "y": 1940,
        "wires": [
            [
                "7f9169df782fa492",
                "80bfdd54725d6917"
            ]
        ]
    },
    {
        "id": "7f9169df782fa492",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3800,
        "y": 1880,
        "wires": [
            [
                "cb288749ca3137c7",
                "7bafca399a048534"
            ]
        ]
    },
    {
        "id": "80bfdd54725d6917",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3850,
        "y": 1960,
        "wires": []
    },
    {
        "id": "dde5b31f2593a006",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no108= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3520,
        "y": 1880,
        "wires": [
            [
                "7f9169df782fa492"
            ]
        ]
    },
    {
        "id": "731b0818e8cd0d9f",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2650,
        "y": 2080,
        "wires": [
            [
                "3554f9c2262934aa",
                "3570c9a19f824bbe"
            ],
            [
                "3570c9a19f824bbe"
            ],
            []
        ]
    },
    {
        "id": "3554f9c2262934aa",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2850,
        "y": 2053,
        "wires": []
    },
    {
        "id": "75671e0c904906c6",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2560,
        "y": 2140,
        "wires": [
            [
                "731b0818e8cd0d9f"
            ]
        ]
    },
    {
        "id": "3570c9a19f824bbe",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2880,
        "y": 2100,
        "wires": [
            [
                "6f29979d6ae89623"
            ]
        ]
    },
    {
        "id": "6f29979d6ae89623",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3070,
        "y": 2100,
        "wires": [
            [
                "fdf09ebd61559cd1"
            ]
        ]
    },
    {
        "id": "fdf09ebd61559cd1",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3300,
        "y": 2100,
        "wires": [
            [
                "752a2f4cb042d1e2"
            ]
        ]
    },
    {
        "id": "752a2f4cb042d1e2",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3490,
        "y": 2100,
        "wires": [
            [
                "bd4d2b0822f74b15"
            ],
            [
                "43a1211f592ebafb"
            ]
        ]
    },
    {
        "id": "43a1211f592ebafb",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3750,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "dbd92af798cb749c",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2510,
        "y": 1840,
        "wires": []
    },
    {
        "id": "84f01ed5263121f6",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2630,
        "y": 2013,
        "wires": []
    },
    {
        "id": "5b77623775a5f41f",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2620,
        "y": 2260,
        "wires": []
    },
    {
        "id": "56bc909474f1d7f3",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3870,
        "y": 1840,
        "wires": []
    },
    {
        "id": "6de17124c6188cfe",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2660,
        "y": 2180,
        "wires": []
    },
    {
        "id": "aae4a79214f2e747",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-CH2RTH",
        "links": [
            "754ddf47b9aa24a6"
        ],
        "x": 2535,
        "y": 1500,
        "wires": [
            [
                "7b3abedd78ce6e5f"
            ]
        ]
    },
    {
        "id": "7b3abedd78ce6e5f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_RTHCH2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2770,
        "y": 1500,
        "wires": [
            [
                "362fe29d7c4f55e5",
                "bfd49b17c998df25"
            ]
        ]
    },
    {
        "id": "65988ceea3d4f0f5",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3130,
        "y": 1500,
        "wires": [
            [
                "43d3c4dae0fb5d7b"
            ],
            [
                "09fc3731c757ef46"
            ]
        ]
    },
    {
        "id": "43d3c4dae0fb5d7b",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3320,
        "y": 1480,
        "wires": [
            [
                "70691f2ec3cc0d00"
            ]
        ]
    },
    {
        "id": "09fc3731c757ef46",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3320,
        "y": 1520,
        "wires": [
            [
                "4286d14fc9e59c60"
            ]
        ]
    },
    {
        "id": "70691f2ec3cc0d00",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3470,
        "y": 1480,
        "wires": [
            [
                "069f5a40f49d1584"
            ]
        ]
    },
    {
        "id": "4286d14fc9e59c60",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3470,
        "y": 1520,
        "wires": [
            [
                "069f5a40f49d1584"
            ]
        ]
    },
    {
        "id": "362fe29d7c4f55e5",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2960,
        "y": 1500,
        "wires": [
            [
                "65988ceea3d4f0f5"
            ]
        ]
    },
    {
        "id": "7bafca399a048534",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp RTHCH2",
        "mode": "link",
        "links": [
            "22bb9c918c371719"
        ],
        "x": 4055,
        "y": 1880,
        "wires": []
    },
    {
        "id": "2112edb7a782559a",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "41",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3350,
        "y": 1880,
        "wires": [
            [
                "dde5b31f2593a006"
            ]
        ]
    },
    {
        "id": "bfd49b17c998df25",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2950,
        "y": 1460,
        "wires": []
    },
    {
        "id": "f4cc55b41370b560",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3200,
        "y": 1880,
        "wires": [
            [
                "2112edb7a782559a"
            ]
        ]
    },
    {
        "id": "25b39e0bcf6e5868",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2650,
        "y": 1980,
        "wires": []
    },
    {
        "id": "27a8ad3c52097e84",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2610,
        "y": 1420,
        "wires": []
    },
    {
        "id": "9dedfefad12255f5",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3000,
        "y": 2340,
        "wires": [
            [
                "731b0818e8cd0d9f"
            ]
        ]
    },
    {
        "id": "1d19a80591be2223",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RTHCH2",
        "info": "",
        "x": 2380,
        "y": 1380,
        "wires": []
    },
    {
        "id": "2f71d179a8a8e59c",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3250,
        "y": 2280,
        "wires": [
            [
                "dd8d2591ce775d45"
            ]
        ]
    },
    {
        "id": "a487a44fc4890ced",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3610,
        "y": 2280,
        "wires": [
            [
                "ca9caa656442d110"
            ],
            [
                "acb9fef65561c329"
            ]
        ]
    },
    {
        "id": "ca9caa656442d110",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3800,
        "y": 2260,
        "wires": [
            [
                "4867806b9cb09755"
            ]
        ]
    },
    {
        "id": "acb9fef65561c329",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3800,
        "y": 2300,
        "wires": [
            [
                "937557ed6bdc2519"
            ]
        ]
    },
    {
        "id": "940196231d0def47",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4090,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "dd8d2591ce775d45",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3440,
        "y": 2280,
        "wires": [
            [
                "a487a44fc4890ced"
            ]
        ]
    },
    {
        "id": "b935caf0b59a5076",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3350,
        "y": 2240,
        "wires": []
    },
    {
        "id": "937557ed6bdc2519",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3970,
        "y": 2300,
        "wires": [
            [
                "940196231d0def47"
            ]
        ]
    },
    {
        "id": "4867806b9cb09755",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3970,
        "y": 2260,
        "wires": [
            [
                "940196231d0def47"
            ]
        ]
    },
    {
        "id": "69824cb3b3106545",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter41",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3060,
        "y": 2180,
        "wires": [
            [
                "2f71d179a8a8e59c"
            ]
        ]
    },
    {
        "id": "069f5a40f49d1584",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3640,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "a8a48e4e334f9f16",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2640,
        "y": 3120,
        "wires": [
            [
                "52dccc82e6f29f3c"
            ]
        ]
    },
    {
        "id": "52dccc82e6f29f3c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2830,
        "y": 3120,
        "wires": [
            [
                "bf13b63f11c351f9",
                "649a9fc6bbc042ab"
            ]
        ]
    },
    {
        "id": "2ccf6854a395512c",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3260,
        "y": 3160,
        "wires": [
            [
                "d55c6963639f33a3"
            ]
        ]
    },
    {
        "id": "ca63f5165641cd37",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3690,
        "y": 3300,
        "wires": [
            [
                "d59bd40abc536d1e"
            ]
        ]
    },
    {
        "id": "d59bd40abc536d1e",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3930,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "b53fddfe92763d0f",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2480,
        "y": 3120,
        "wires": [
            [
                "a8a48e4e334f9f16"
            ]
        ]
    },
    {
        "id": "3a2679f0758492de",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3370,
        "y": 3700,
        "wires": [
            []
        ]
    },
    {
        "id": "649a9fc6bbc042ab",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3010,
        "y": 3120,
        "wires": [
            [
                "ac3ec89f3d691e84",
                "2ccf6854a395512c",
                "6349d6c3497569a9"
            ],
            [
                "129341486e496fea"
            ]
        ]
    },
    {
        "id": "75b32182d0aaf60e",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2510,
        "y": 3700,
        "wires": [
            [
                "3a2679f0758492de"
            ]
        ]
    },
    {
        "id": "e793968e52bf609a",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2660,
        "y": 3580,
        "wires": [
            [
                "b5574f18825efa4c"
            ]
        ]
    },
    {
        "id": "b5574f18825efa4c",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2860,
        "y": 3580,
        "wires": [
            [
                "b1d9dc4ae97e9c9f"
            ]
        ]
    },
    {
        "id": "bb5a1faac53712d8",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2500,
        "y": 3580,
        "wires": [
            [
                "e793968e52bf609a"
            ]
        ]
    },
    {
        "id": "4445053eb2919248",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "DELETE FILE",
        "info": "",
        "x": 2490,
        "y": 3660,
        "wires": []
    },
    {
        "id": "55cfe1cb170b8d0b",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2840,
        "y": 3080,
        "wires": []
    },
    {
        "id": "f7694a1b1e62c99a",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2550,
        "y": 3540,
        "wires": []
    },
    {
        "id": "5143ffbb516a98d2",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2680,
        "y": 2700,
        "wires": []
    },
    {
        "id": "a80815fae16de959",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3910,
        "y": 3160,
        "wires": []
    },
    {
        "id": "bf13b63f11c351f9",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2850,
        "y": 3160,
        "wires": []
    },
    {
        "id": "ac3ec89f3d691e84",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3210,
        "y": 3040,
        "wires": []
    },
    {
        "id": "129341486e496fea",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3210,
        "y": 3200,
        "wires": []
    },
    {
        "id": "58fd2c2e5c76301c",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "receive server respond RTHCH3",
        "links": [
            "17a85b62a45a92c9"
        ],
        "x": 2535,
        "y": 3320,
        "wires": [
            [
                "347167236139b39e",
                "1dad426f4bbcba7b"
            ]
        ]
    },
    {
        "id": "480b3643f2a62cd9",
        "type": "json",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3710,
        "y": 3180,
        "wires": [
            [
                "116c425a88c0d5d6",
                "249c43c50fb0cd6d"
            ]
        ]
    },
    {
        "id": "116c425a88c0d5d6",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3840,
        "y": 3120,
        "wires": [
            [
                "a80815fae16de959",
                "fa9a380d4872ae4f"
            ]
        ]
    },
    {
        "id": "249c43c50fb0cd6d",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3890,
        "y": 3200,
        "wires": []
    },
    {
        "id": "d55c6963639f33a3",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no113= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3560,
        "y": 3120,
        "wires": [
            [
                "116c425a88c0d5d6"
            ]
        ]
    },
    {
        "id": "347167236139b39e",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2690,
        "y": 3320,
        "wires": [
            [
                "309ed9904290d2ba",
                "54791a5abd39f869"
            ],
            [
                "54791a5abd39f869"
            ],
            []
        ]
    },
    {
        "id": "309ed9904290d2ba",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2890,
        "y": 3293,
        "wires": []
    },
    {
        "id": "f71e4825cce45ef3",
        "type": "inject",
        "z": "d9a17ff77e288b13",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2600,
        "y": 3380,
        "wires": [
            [
                "347167236139b39e"
            ]
        ]
    },
    {
        "id": "54791a5abd39f869",
        "type": "file in",
        "z": "d9a17ff77e288b13",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2920,
        "y": 3340,
        "wires": [
            [
                "90c055963a2b6d0e"
            ]
        ]
    },
    {
        "id": "90c055963a2b6d0e",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3110,
        "y": 3340,
        "wires": [
            [
                "ec9443dc20206b65"
            ]
        ]
    },
    {
        "id": "ec9443dc20206b65",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3340,
        "y": 3340,
        "wires": [
            [
                "040a7f6ce25358c2"
            ]
        ]
    },
    {
        "id": "040a7f6ce25358c2",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3530,
        "y": 3340,
        "wires": [
            [
                "ca63f5165641cd37"
            ],
            [
                "967c8c09490261f4"
            ]
        ]
    },
    {
        "id": "967c8c09490261f4",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_RTHCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3790,
        "y": 3360,
        "wires": [
            []
        ]
    },
    {
        "id": "cc30c02bef8881f0",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2550,
        "y": 3080,
        "wires": []
    },
    {
        "id": "0f760fa96555eba4",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2670,
        "y": 3253,
        "wires": []
    },
    {
        "id": "97e0aaf4f2c10fcf",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2660,
        "y": 3500,
        "wires": []
    },
    {
        "id": "8136c19d3d153772",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3910,
        "y": 3080,
        "wires": []
    },
    {
        "id": "254b72c02ae880bc",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2700,
        "y": 3420,
        "wires": []
    },
    {
        "id": "fb04b69aa0c0ac0f",
        "type": "link in",
        "z": "d9a17ff77e288b13",
        "name": "INQUEUE-CH3RTH",
        "links": [
            "7e8ea5fccb6ee73b"
        ],
        "x": 2575,
        "y": 2740,
        "wires": [
            [
                "9d9c4b9bbecc52f3"
            ]
        ]
    },
    {
        "id": "9d9c4b9bbecc52f3",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_RTHCH3.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2810,
        "y": 2740,
        "wires": [
            [
                "f6e4781f319fb568",
                "3ed46753bc5c8289"
            ]
        ]
    },
    {
        "id": "df068f01d3e9e623",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3170,
        "y": 2740,
        "wires": [
            [
                "b7082d427da83a61"
            ],
            [
                "c740ba5176092ca6"
            ]
        ]
    },
    {
        "id": "b7082d427da83a61",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3360,
        "y": 2720,
        "wires": [
            [
                "0eac728eb5f3a595"
            ]
        ]
    },
    {
        "id": "c740ba5176092ca6",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3360,
        "y": 2760,
        "wires": [
            [
                "045c775d2603957d"
            ]
        ]
    },
    {
        "id": "0eac728eb5f3a595",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3510,
        "y": 2720,
        "wires": [
            [
                "783853abcd97774e"
            ]
        ]
    },
    {
        "id": "045c775d2603957d",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3510,
        "y": 2760,
        "wires": [
            [
                "783853abcd97774e"
            ]
        ]
    },
    {
        "id": "f6e4781f319fb568",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3000,
        "y": 2740,
        "wires": [
            [
                "df068f01d3e9e623"
            ]
        ]
    },
    {
        "id": "fa9a380d4872ae4f",
        "type": "link out",
        "z": "d9a17ff77e288b13",
        "name": "request to server resp RTHCH3",
        "mode": "link",
        "links": [
            "f74ac64750039b12"
        ],
        "x": 4095,
        "y": 3120,
        "wires": []
    },
    {
        "id": "1cdc77c2c67044e8",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "41",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3390,
        "y": 3120,
        "wires": [
            [
                "d55c6963639f33a3"
            ]
        ]
    },
    {
        "id": "3ed46753bc5c8289",
        "type": "debug",
        "z": "d9a17ff77e288b13",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2990,
        "y": 2700,
        "wires": []
    },
    {
        "id": "6349d6c3497569a9",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3240,
        "y": 3120,
        "wires": [
            [
                "1cdc77c2c67044e8"
            ]
        ]
    },
    {
        "id": "f5c3fba66f4d3733",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2690,
        "y": 3220,
        "wires": []
    },
    {
        "id": "dc3e08df6e1dea54",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2650,
        "y": 2660,
        "wires": []
    },
    {
        "id": "b1d9dc4ae97e9c9f",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3040,
        "y": 3580,
        "wires": [
            [
                "347167236139b39e"
            ]
        ]
    },
    {
        "id": "3ce9857d6660a444",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RTHCH3",
        "info": "",
        "x": 2420,
        "y": 2620,
        "wires": []
    },
    {
        "id": "eb6da7bcdbe771d2",
        "type": "function",
        "z": "d9a17ff77e288b13",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch1kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3290,
        "y": 3520,
        "wires": [
            [
                "b7f0a45bcc2d96c0"
            ]
        ]
    },
    {
        "id": "65bb57e045cc394f",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3650,
        "y": 3520,
        "wires": [
            [
                "466153bdcc08ef8e"
            ],
            [
                "8bc066064be3f0e3"
            ]
        ]
    },
    {
        "id": "466153bdcc08ef8e",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3840,
        "y": 3500,
        "wires": [
            [
                "51a445ed5ce4227d"
            ]
        ]
    },
    {
        "id": "8bc066064be3f0e3",
        "type": "change",
        "z": "d9a17ff77e288b13",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3840,
        "y": 3540,
        "wires": [
            [
                "08b24c7248a9ded2"
            ]
        ]
    },
    {
        "id": "abf216dd99b3e019",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4130,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "b7f0a45bcc2d96c0",
        "type": "fs-file-lister",
        "z": "d9a17ff77e288b13",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3480,
        "y": 3520,
        "wires": [
            [
                "65bb57e045cc394f"
            ]
        ]
    },
    {
        "id": "dcf90f0259652fc0",
        "type": "comment",
        "z": "d9a17ff77e288b13",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3390,
        "y": 3480,
        "wires": []
    },
    {
        "id": "08b24c7248a9ded2",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4010,
        "y": 3540,
        "wires": [
            [
                "abf216dd99b3e019"
            ]
        ]
    },
    {
        "id": "51a445ed5ce4227d",
        "type": "csv",
        "z": "d9a17ff77e288b13",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 4010,
        "y": 3500,
        "wires": [
            [
                "abf216dd99b3e019"
            ]
        ]
    },
    {
        "id": "1dad426f4bbcba7b",
        "type": "switch",
        "z": "d9a17ff77e288b13",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter41",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3100,
        "y": 3420,
        "wires": [
            [
                "eb6da7bcdbe771d2"
            ]
        ]
    },
    {
        "id": "783853abcd97774e",
        "type": "file",
        "z": "d9a17ff77e288b13",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3680,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "78090ea332837f62",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 620,
        "wires": [
            [
                "08efab693c2539a0"
            ]
        ]
    },
    {
        "id": "08efab693c2539a0",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 610,
        "y": 620,
        "wires": [
            [
                "75542632e8bf3820",
                "af495e4a6ebf4ccd"
            ]
        ]
    },
    {
        "id": "3b9ad232a145fe86",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 660,
        "wires": [
            [
                "673a2433126efe1c"
            ]
        ]
    },
    {
        "id": "8ae037a12fcad7e5",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1470,
        "y": 800,
        "wires": [
            [
                "49103829f528a6ed"
            ]
        ]
    },
    {
        "id": "49103829f528a6ed",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1710,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "31d3ebfe1a042cc9",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 260,
        "y": 620,
        "wires": [
            [
                "78090ea332837f62"
            ]
        ]
    },
    {
        "id": "944ddf01bef53e50",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1150,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "af495e4a6ebf4ccd",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 620,
        "wires": [
            [
                "7bf6688c921337e7",
                "3b9ad232a145fe86",
                "6db7d6fb290bf31b"
            ],
            [
                "856b01c0ea3567fc"
            ]
        ]
    },
    {
        "id": "45f3b29f223cf91a",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 1200,
        "wires": [
            [
                "944ddf01bef53e50"
            ]
        ]
    },
    {
        "id": "ac5c9fd6a226a156",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 1080,
        "wires": [
            [
                "b9c97aeb1d380962"
            ]
        ]
    },
    {
        "id": "b9c97aeb1d380962",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 640,
        "y": 1080,
        "wires": [
            [
                "986c0fc39ec1adbf"
            ]
        ]
    },
    {
        "id": "2579a1b45b87e15c",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 1080,
        "wires": [
            [
                "ac5c9fd6a226a156"
            ]
        ]
    },
    {
        "id": "b0aa38bad740e6f9",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 270,
        "y": 1160,
        "wires": []
    },
    {
        "id": "65fb0f1332ab0f32",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 620,
        "y": 580,
        "wires": []
    },
    {
        "id": "177de8bc4f8709e4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 330,
        "y": 1040,
        "wires": []
    },
    {
        "id": "15813ec93e8f68e3",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 200,
        "wires": []
    },
    {
        "id": "ad6d4ada2728e139",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 660,
        "wires": []
    },
    {
        "id": "75542632e8bf3820",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 660,
        "wires": []
    },
    {
        "id": "7bf6688c921337e7",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 540,
        "wires": []
    },
    {
        "id": "856b01c0ea3567fc",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 700,
        "wires": []
    },
    {
        "id": "3e2af192a5dd5944",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond KWHCH2",
        "links": [
            "ab8abdbae905f467"
        ],
        "x": 315,
        "y": 820,
        "wires": [
            [
                "0993c9073ffa0349",
                "d3294127cda92099"
            ]
        ]
    },
    {
        "id": "e7a7f7b723578b35",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1490,
        "y": 680,
        "wires": [
            [
                "cb085413a45fc427",
                "a3b4cca0882e7b27"
            ]
        ]
    },
    {
        "id": "cb085413a45fc427",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 620,
        "wires": [
            [
                "ad6d4ada2728e139",
                "cd0419e222b0ee1a"
            ]
        ]
    },
    {
        "id": "a3b4cca0882e7b27",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 700,
        "wires": []
    },
    {
        "id": "673a2433126efe1c",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no107= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 620,
        "wires": [
            [
                "cb085413a45fc427"
            ]
        ]
    },
    {
        "id": "0993c9073ffa0349",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 470,
        "y": 820,
        "wires": [
            [
                "2d236df44cd1fe3a",
                "68d3a1ccb28364ab"
            ],
            [
                "68d3a1ccb28364ab"
            ],
            []
        ]
    },
    {
        "id": "2d236df44cd1fe3a",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 793,
        "wires": []
    },
    {
        "id": "40d0c25b26e8447e",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 380,
        "y": 880,
        "wires": [
            [
                "0993c9073ffa0349"
            ]
        ]
    },
    {
        "id": "68d3a1ccb28364ab",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 840,
        "wires": [
            [
                "d286b124620c2f78"
            ]
        ]
    },
    {
        "id": "d286b124620c2f78",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 890,
        "y": 840,
        "wires": [
            [
                "b4fb5998ad2ab403"
            ]
        ]
    },
    {
        "id": "b4fb5998ad2ab403",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 840,
        "wires": [
            [
                "a450909f577b4cd8"
            ]
        ]
    },
    {
        "id": "a450909f577b4cd8",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 840,
        "wires": [
            [
                "8ae037a12fcad7e5"
            ],
            [
                "0dd841a2682f67f9"
            ]
        ]
    },
    {
        "id": "0dd841a2682f67f9",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1570,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "f794789b268f8542",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 330,
        "y": 580,
        "wires": []
    },
    {
        "id": "1642716673eef9f3",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 450,
        "y": 753,
        "wires": []
    },
    {
        "id": "1e52f7d9214a5ab7",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 1000,
        "wires": []
    },
    {
        "id": "6f95b74cd06285cb",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1690,
        "y": 580,
        "wires": []
    },
    {
        "id": "3e55e2ed345e04a6",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 920,
        "wires": []
    },
    {
        "id": "f3f6cbc6f71d6d85",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-KWHCH2",
        "links": [
            "db469366ddcedae9"
        ],
        "x": 355,
        "y": 240,
        "wires": [
            [
                "5b696ee45d959052"
            ]
        ]
    },
    {
        "id": "5b696ee45d959052",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWHCH2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 240,
        "wires": [
            [
                "8fdf10ae0b981777",
                "cfe4792b58dbd7ec"
            ]
        ]
    },
    {
        "id": "9742b5da4d0533c6",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 240,
        "wires": [
            [
                "d0a2757f035ec5cf"
            ],
            [
                "94e6f6b2a1735a9c"
            ]
        ]
    },
    {
        "id": "d0a2757f035ec5cf",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 220,
        "wires": [
            [
                "611e71f1557173df"
            ]
        ]
    },
    {
        "id": "94e6f6b2a1735a9c",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 260,
        "wires": [
            [
                "fba00871d856a922"
            ]
        ]
    },
    {
        "id": "611e71f1557173df",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 220,
        "wires": [
            [
                "aa675184089a0eab"
            ]
        ]
    },
    {
        "id": "fba00871d856a922",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 260,
        "wires": [
            [
                "aa675184089a0eab"
            ]
        ]
    },
    {
        "id": "8fdf10ae0b981777",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 780,
        "y": 240,
        "wires": [
            [
                "9742b5da4d0533c6"
            ]
        ]
    },
    {
        "id": "cd0419e222b0ee1a",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp KWHCH2",
        "mode": "link",
        "links": [
            "962639443aa3acc7"
        ],
        "x": 1875,
        "y": 620,
        "wires": []
    },
    {
        "id": "6593cbea8ad35a17",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1170,
        "y": 620,
        "wires": [
            [
                "673a2433126efe1c"
            ]
        ]
    },
    {
        "id": "cfe4792b58dbd7ec",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 200,
        "wires": []
    },
    {
        "id": "6db7d6fb290bf31b",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 620,
        "wires": [
            [
                "6593cbea8ad35a17"
            ]
        ]
    },
    {
        "id": "4adcd481190112d4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 470,
        "y": 720,
        "wires": []
    },
    {
        "id": "a86a3758fae46d33",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 430,
        "y": 160,
        "wires": []
    },
    {
        "id": "986c0fc39ec1adbf",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 1080,
        "wires": [
            [
                "0993c9073ffa0349"
            ]
        ]
    },
    {
        "id": "8f95c2ab59b220a1",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "KWH",
        "info": "",
        "x": 190,
        "y": 120,
        "wires": []
    },
    {
        "id": "18fb8a4b27caa22a",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2500,
        "y": 620,
        "wires": [
            [
                "4aba36f00bb09a93"
            ]
        ]
    },
    {
        "id": "4aba36f00bb09a93",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2690,
        "y": 620,
        "wires": [
            [
                "df7102bf8f76524e",
                "84f14f28c8f28881"
            ]
        ]
    },
    {
        "id": "cf7a705ba689548b",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3120,
        "y": 660,
        "wires": [
            [
                "0660805355c421ff"
            ]
        ]
    },
    {
        "id": "013337b4cb280d75",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3550,
        "y": 800,
        "wires": [
            [
                "ca8ea4afdee29821"
            ]
        ]
    },
    {
        "id": "ca8ea4afdee29821",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3790,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "f34114a9f6adcfd1",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2340,
        "y": 620,
        "wires": [
            [
                "18fb8a4b27caa22a"
            ]
        ]
    },
    {
        "id": "9091bf29b75190b4",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3230,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "84f14f28c8f28881",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2870,
        "y": 620,
        "wires": [
            [
                "0456ba81a4ce01ee",
                "cf7a705ba689548b",
                "c7dcfe07992f6d49"
            ],
            [
                "497d3e0b8f211e4d"
            ]
        ]
    },
    {
        "id": "86f8a8665479ca54",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2370,
        "y": 1200,
        "wires": [
            [
                "9091bf29b75190b4"
            ]
        ]
    },
    {
        "id": "b2bd636e6e166aac",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2520,
        "y": 1080,
        "wires": [
            [
                "8a917aa4225e3b56"
            ]
        ]
    },
    {
        "id": "8a917aa4225e3b56",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2720,
        "y": 1080,
        "wires": [
            [
                "370f692535f676b6"
            ]
        ]
    },
    {
        "id": "822b140dc698b80b",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2360,
        "y": 1080,
        "wires": [
            [
                "b2bd636e6e166aac"
            ]
        ]
    },
    {
        "id": "9dd284ef31f7079a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 2350,
        "y": 1160,
        "wires": []
    },
    {
        "id": "ae43525de4838e1b",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2700,
        "y": 580,
        "wires": []
    },
    {
        "id": "8456104290c914c0",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2410,
        "y": 1040,
        "wires": []
    },
    {
        "id": "be5d12487e60300a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2540,
        "y": 200,
        "wires": []
    },
    {
        "id": "3ad7b73e16ca6ddc",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3770,
        "y": 660,
        "wires": []
    },
    {
        "id": "df7102bf8f76524e",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2710,
        "y": 660,
        "wires": []
    },
    {
        "id": "0456ba81a4ce01ee",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 540,
        "wires": []
    },
    {
        "id": "497d3e0b8f211e4d",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 700,
        "wires": []
    },
    {
        "id": "db48c62983b2d6e0",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond KWHCH3",
        "links": [
            "18b4f86bdda1ff27"
        ],
        "x": 2395,
        "y": 820,
        "wires": [
            [
                "279c923662aa1bbf",
                "1c9f72222fcf5db1"
            ]
        ]
    },
    {
        "id": "32a3c26d2af895e3",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3570,
        "y": 680,
        "wires": [
            [
                "ef6244b684f8b54f",
                "9bbdcec9c96e7ad5"
            ]
        ]
    },
    {
        "id": "ef6244b684f8b54f",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3700,
        "y": 620,
        "wires": [
            [
                "3ad7b73e16ca6ddc",
                "b62cc27e5a435677"
            ]
        ]
    },
    {
        "id": "9bbdcec9c96e7ad5",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3750,
        "y": 700,
        "wires": []
    },
    {
        "id": "0660805355c421ff",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no112= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3420,
        "y": 620,
        "wires": [
            [
                "ef6244b684f8b54f"
            ]
        ]
    },
    {
        "id": "279c923662aa1bbf",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2550,
        "y": 820,
        "wires": [
            [
                "f3ea424942543fa3",
                "af1ed922e3fb18ad"
            ],
            [
                "af1ed922e3fb18ad"
            ],
            []
        ]
    },
    {
        "id": "f3ea424942543fa3",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2750,
        "y": 793,
        "wires": []
    },
    {
        "id": "03dc94d9a1f70443",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2460,
        "y": 880,
        "wires": [
            [
                "279c923662aa1bbf"
            ]
        ]
    },
    {
        "id": "af1ed922e3fb18ad",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2780,
        "y": 840,
        "wires": [
            [
                "a247e3b55c2fbc6f"
            ]
        ]
    },
    {
        "id": "a247e3b55c2fbc6f",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2970,
        "y": 840,
        "wires": [
            [
                "b941665910389d33"
            ]
        ]
    },
    {
        "id": "b941665910389d33",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3200,
        "y": 840,
        "wires": [
            [
                "383532e52920cad4"
            ]
        ]
    },
    {
        "id": "383532e52920cad4",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3390,
        "y": 840,
        "wires": [
            [
                "013337b4cb280d75"
            ],
            [
                "485b799a58e471c2"
            ]
        ]
    },
    {
        "id": "485b799a58e471c2",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWHCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3650,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "0abf6595cf3732a1",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2410,
        "y": 580,
        "wires": []
    },
    {
        "id": "1d796caed1b510f8",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2530,
        "y": 753,
        "wires": []
    },
    {
        "id": "d8edea26bab31393",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2520,
        "y": 1000,
        "wires": []
    },
    {
        "id": "ca9b53f4e7352e9a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3770,
        "y": 580,
        "wires": []
    },
    {
        "id": "d4ff7cc795b47bec",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2560,
        "y": 920,
        "wires": []
    },
    {
        "id": "8053ba0903ee0c21",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-KWHCH3",
        "links": [
            "0ba0d297718c498b"
        ],
        "x": 2435,
        "y": 240,
        "wires": [
            [
                "47dc6ed2c839049f"
            ]
        ]
    },
    {
        "id": "47dc6ed2c839049f",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWHCH3.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 240,
        "wires": [
            [
                "0795ebfeba86d93f",
                "780fe35346286e19"
            ]
        ]
    },
    {
        "id": "e9123778929355f4",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3030,
        "y": 240,
        "wires": [
            [
                "849dc629063368a5"
            ],
            [
                "0090449ad17bc424"
            ]
        ]
    },
    {
        "id": "849dc629063368a5",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 220,
        "wires": [
            [
                "046f858a78b089f0"
            ]
        ]
    },
    {
        "id": "0090449ad17bc424",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 260,
        "wires": [
            [
                "1d0fa89ab42eb456"
            ]
        ]
    },
    {
        "id": "046f858a78b089f0",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 220,
        "wires": [
            [
                "e1396cfc0fafcf2a"
            ]
        ]
    },
    {
        "id": "1d0fa89ab42eb456",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 260,
        "wires": [
            [
                "e1396cfc0fafcf2a"
            ]
        ]
    },
    {
        "id": "0795ebfeba86d93f",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2860,
        "y": 240,
        "wires": [
            [
                "e9123778929355f4"
            ]
        ]
    },
    {
        "id": "b62cc27e5a435677",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp KWHCH3",
        "mode": "link",
        "links": [
            "809299a524c81f92"
        ],
        "x": 3955,
        "y": 620,
        "wires": []
    },
    {
        "id": "2c0764ada0598ccd",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "18",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3250,
        "y": 620,
        "wires": [
            [
                "0660805355c421ff"
            ]
        ]
    },
    {
        "id": "780fe35346286e19",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2850,
        "y": 200,
        "wires": []
    },
    {
        "id": "c7dcfe07992f6d49",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3100,
        "y": 620,
        "wires": [
            [
                "2c0764ada0598ccd"
            ]
        ]
    },
    {
        "id": "d1501a953416af05",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2550,
        "y": 720,
        "wires": []
    },
    {
        "id": "39e13c2c9a04fcad",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2510,
        "y": 160,
        "wires": []
    },
    {
        "id": "370f692535f676b6",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2900,
        "y": 1080,
        "wires": [
            [
                "279c923662aa1bbf"
            ]
        ]
    },
    {
        "id": "87edb90270c63224",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "KWH",
        "info": "",
        "x": 2270,
        "y": 120,
        "wires": []
    },
    {
        "id": "38ee0b98337dea91",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 1840,
        "wires": [
            [
                "fb31a438cd77a230"
            ]
        ]
    },
    {
        "id": "fb31a438cd77a230",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 1840,
        "wires": [
            [
                "ea65585f7a586cc6",
                "6b347a5a722e263d"
            ]
        ]
    },
    {
        "id": "6a710081bfe3c25a",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 1880,
        "wires": [
            [
                "f7f4b9e74476eb33"
            ]
        ]
    },
    {
        "id": "f1fc02ab5a8fd7a9",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1490,
        "y": 2020,
        "wires": [
            [
                "1a0d40ef04077154"
            ]
        ]
    },
    {
        "id": "1a0d40ef04077154",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1730,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "edb6fd77a3a0d516",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 280,
        "y": 1840,
        "wires": [
            [
                "38ee0b98337dea91"
            ]
        ]
    },
    {
        "id": "dfcc93e1817dcb0a",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1170,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "6b347a5a722e263d",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 1840,
        "wires": [
            [
                "8aa6350594d73ce7",
                "6a710081bfe3c25a",
                "8b37a404b90fc61f"
            ],
            [
                "d920a157e6351869"
            ]
        ]
    },
    {
        "id": "29be7529d20c2f0d",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 310,
        "y": 2420,
        "wires": [
            [
                "dfcc93e1817dcb0a"
            ]
        ]
    },
    {
        "id": "2349f1919c4341da",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 460,
        "y": 2300,
        "wires": [
            [
                "6540d1b0a1107db1"
            ]
        ]
    },
    {
        "id": "6540d1b0a1107db1",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 660,
        "y": 2300,
        "wires": [
            [
                "c18c277581cefaa8"
            ]
        ]
    },
    {
        "id": "606a832965e6d00d",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 300,
        "y": 2300,
        "wires": [
            [
                "2349f1919c4341da"
            ]
        ]
    },
    {
        "id": "deb6c065ecf05aa1",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 290,
        "y": 2380,
        "wires": []
    },
    {
        "id": "ddb99b815c15c944",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 640,
        "y": 1800,
        "wires": []
    },
    {
        "id": "03ef3623151f6451",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 350,
        "y": 2260,
        "wires": []
    },
    {
        "id": "ba1514f6ea0e5849",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 1420,
        "wires": []
    },
    {
        "id": "ae1d96ec1816e72c",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 1880,
        "wires": []
    },
    {
        "id": "ea65585f7a586cc6",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1880,
        "wires": []
    },
    {
        "id": "8aa6350594d73ce7",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1760,
        "wires": []
    },
    {
        "id": "d920a157e6351869",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1920,
        "wires": []
    },
    {
        "id": "0ffe8d71ed85995c",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond KWCH2",
        "links": [
            "bc354ef06db31172"
        ],
        "x": 335,
        "y": 2040,
        "wires": [
            [
                "ec68cfb10bb0399b",
                "c3dd69968f5e8431"
            ]
        ]
    },
    {
        "id": "d9065d5793a47e36",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1510,
        "y": 1900,
        "wires": [
            [
                "1fd704dee16a4851",
                "e439c5a7ec2b8ee5"
            ]
        ]
    },
    {
        "id": "1fd704dee16a4851",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 1840,
        "wires": [
            [
                "ae1d96ec1816e72c",
                "41ff2df5bb94e0a7"
            ]
        ]
    },
    {
        "id": "e439c5a7ec2b8ee5",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 1920,
        "wires": []
    },
    {
        "id": "f7f4b9e74476eb33",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no109= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 1840,
        "wires": [
            [
                "1fd704dee16a4851"
            ]
        ]
    },
    {
        "id": "ec68cfb10bb0399b",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 2040,
        "wires": [
            [
                "74eba20648716b61",
                "57769258b15cb96f"
            ],
            [
                "57769258b15cb96f"
            ],
            []
        ]
    },
    {
        "id": "74eba20648716b61",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 2013,
        "wires": []
    },
    {
        "id": "6df0fc9b92f0a635",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 400,
        "y": 2100,
        "wires": [
            [
                "ec68cfb10bb0399b"
            ]
        ]
    },
    {
        "id": "57769258b15cb96f",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 2060,
        "wires": [
            [
                "9020827767ab5428"
            ]
        ]
    },
    {
        "id": "9020827767ab5428",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 910,
        "y": 2060,
        "wires": [
            [
                "e7a56d6c42ed059a"
            ]
        ]
    },
    {
        "id": "e7a56d6c42ed059a",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 2060,
        "wires": [
            [
                "be7c0fdfeeda7fcb"
            ]
        ]
    },
    {
        "id": "be7c0fdfeeda7fcb",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1330,
        "y": 2060,
        "wires": [
            [
                "f1fc02ab5a8fd7a9"
            ],
            [
                "d5830a5999893b08"
            ]
        ]
    },
    {
        "id": "d5830a5999893b08",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1590,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "9d68991038b3befc",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 350,
        "y": 1800,
        "wires": []
    },
    {
        "id": "e40edee2a631216f",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 470,
        "y": 1973,
        "wires": []
    },
    {
        "id": "3273c2e1d6747e9a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 2220,
        "wires": []
    },
    {
        "id": "f76c375e2792e32b",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1710,
        "y": 1800,
        "wires": []
    },
    {
        "id": "c7a6a2833c0e36ae",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 500,
        "y": 2140,
        "wires": []
    },
    {
        "id": "0f72c7c114abd2fa",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-KWVH2",
        "links": [
            "db469366ddcedae9"
        ],
        "x": 375,
        "y": 1460,
        "wires": [
            [
                "60e33d3aa647ba76"
            ]
        ]
    },
    {
        "id": "60e33d3aa647ba76",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWCH2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1460,
        "wires": [
            [
                "6bdd602fd0f72bfc",
                "0045c873bf20eeb3"
            ]
        ]
    },
    {
        "id": "376062c9c209244d",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1460,
        "wires": [
            [
                "385205a25c025385"
            ],
            [
                "e88721d44db35c09"
            ]
        ]
    },
    {
        "id": "385205a25c025385",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1440,
        "wires": [
            [
                "de1e03aad91e7506"
            ]
        ]
    },
    {
        "id": "e88721d44db35c09",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1480,
        "wires": [
            [
                "012747b8a721c5ac"
            ]
        ]
    },
    {
        "id": "de1e03aad91e7506",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1440,
        "wires": [
            [
                "449357f836146185"
            ]
        ]
    },
    {
        "id": "012747b8a721c5ac",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1480,
        "wires": [
            [
                "449357f836146185"
            ]
        ]
    },
    {
        "id": "6bdd602fd0f72bfc",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 800,
        "y": 1460,
        "wires": [
            [
                "376062c9c209244d"
            ]
        ]
    },
    {
        "id": "41ff2df5bb94e0a7",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp KWCH2",
        "mode": "link",
        "links": [
            "8ad2e3cf237a61ad"
        ],
        "x": 1895,
        "y": 1840,
        "wires": []
    },
    {
        "id": "63b0902a9a8699f0",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "19",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1190,
        "y": 1840,
        "wires": [
            [
                "f7f4b9e74476eb33"
            ]
        ]
    },
    {
        "id": "0045c873bf20eeb3",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1420,
        "wires": []
    },
    {
        "id": "8b37a404b90fc61f",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1840,
        "wires": [
            [
                "63b0902a9a8699f0"
            ]
        ]
    },
    {
        "id": "614e3cb3cbeb1317",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 490,
        "y": 1940,
        "wires": []
    },
    {
        "id": "53c23e6ffd7243fb",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 1380,
        "wires": []
    },
    {
        "id": "c18c277581cefaa8",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 2300,
        "wires": [
            [
                "ec68cfb10bb0399b"
            ]
        ]
    },
    {
        "id": "d79866864f28a49c",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "KW",
        "info": "",
        "x": 210,
        "y": 1340,
        "wires": []
    },
    {
        "id": "359ae0a925eae275",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2500,
        "y": 1840,
        "wires": [
            [
                "bcff5db7a6455fcf"
            ]
        ]
    },
    {
        "id": "bcff5db7a6455fcf",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2690,
        "y": 1840,
        "wires": [
            [
                "158aa1f8e3cd2890",
                "8f3e70c1f61c95ef"
            ]
        ]
    },
    {
        "id": "d68d08fe12367736",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3120,
        "y": 1880,
        "wires": [
            [
                "556f3106bf858bd4"
            ]
        ]
    },
    {
        "id": "fc4ed41ef51f09e4",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3550,
        "y": 2020,
        "wires": [
            [
                "ea779cf7a1aca637"
            ]
        ]
    },
    {
        "id": "ea779cf7a1aca637",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3790,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "97acfdfaefb02fc3",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2340,
        "y": 1840,
        "wires": [
            [
                "359ae0a925eae275"
            ]
        ]
    },
    {
        "id": "d7a13f7d317e0b09",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3230,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "8f3e70c1f61c95ef",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2870,
        "y": 1840,
        "wires": [
            [
                "c7743043c3a15074",
                "d68d08fe12367736",
                "82e721033ac63c2e"
            ],
            [
                "594d236b58b1c197"
            ]
        ]
    },
    {
        "id": "c361f85f327615ac",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2370,
        "y": 2420,
        "wires": [
            [
                "d7a13f7d317e0b09"
            ]
        ]
    },
    {
        "id": "1b5978a6d7d6e0de",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2520,
        "y": 2300,
        "wires": [
            [
                "b2de87eb104b6804"
            ]
        ]
    },
    {
        "id": "b2de87eb104b6804",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2720,
        "y": 2300,
        "wires": [
            [
                "58fad6af793180d8"
            ]
        ]
    },
    {
        "id": "4677c5e21a47a2d0",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2360,
        "y": 2300,
        "wires": [
            [
                "1b5978a6d7d6e0de"
            ]
        ]
    },
    {
        "id": "49c91ef37b651d90",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 2350,
        "y": 2380,
        "wires": []
    },
    {
        "id": "37b8de64d0caaa67",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2700,
        "y": 1800,
        "wires": []
    },
    {
        "id": "6b81c522d635fa39",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2410,
        "y": 2260,
        "wires": []
    },
    {
        "id": "66aca5083c535baa",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2540,
        "y": 1420,
        "wires": []
    },
    {
        "id": "13208c1a32f066cc",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3770,
        "y": 1880,
        "wires": []
    },
    {
        "id": "158aa1f8e3cd2890",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2710,
        "y": 1880,
        "wires": []
    },
    {
        "id": "c7743043c3a15074",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 1760,
        "wires": []
    },
    {
        "id": "594d236b58b1c197",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 1920,
        "wires": []
    },
    {
        "id": "d7199650463b7823",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond KWCH3",
        "links": [
            "52e7ed5b87b4c103"
        ],
        "x": 2395,
        "y": 2040,
        "wires": [
            [
                "b940cdc852c60a01",
                "e8715bf574cc682d"
            ]
        ]
    },
    {
        "id": "a21c808059e3161d",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3570,
        "y": 1900,
        "wires": [
            [
                "efcdfc4957d2fc9b",
                "2ec919573a3e6e1c"
            ]
        ]
    },
    {
        "id": "efcdfc4957d2fc9b",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3700,
        "y": 1840,
        "wires": [
            [
                "13208c1a32f066cc",
                "652e52b3f1677c3b"
            ]
        ]
    },
    {
        "id": "2ec919573a3e6e1c",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3750,
        "y": 1920,
        "wires": []
    },
    {
        "id": "556f3106bf858bd4",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no114= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3420,
        "y": 1840,
        "wires": [
            [
                "efcdfc4957d2fc9b"
            ]
        ]
    },
    {
        "id": "b940cdc852c60a01",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2550,
        "y": 2040,
        "wires": [
            [
                "e07d753f829469eb",
                "1ce58219957f497c"
            ],
            [
                "1ce58219957f497c"
            ],
            []
        ]
    },
    {
        "id": "e07d753f829469eb",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2750,
        "y": 2013,
        "wires": []
    },
    {
        "id": "ed1b12fe7f307344",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2460,
        "y": 2100,
        "wires": [
            [
                "b940cdc852c60a01"
            ]
        ]
    },
    {
        "id": "1ce58219957f497c",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2780,
        "y": 2060,
        "wires": [
            [
                "f1c52fbe84505fa6"
            ]
        ]
    },
    {
        "id": "f1c52fbe84505fa6",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2970,
        "y": 2060,
        "wires": [
            [
                "1f962ec20e82f4b4"
            ]
        ]
    },
    {
        "id": "1f962ec20e82f4b4",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3200,
        "y": 2060,
        "wires": [
            [
                "a5750b57989b42f2"
            ]
        ]
    },
    {
        "id": "a5750b57989b42f2",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3390,
        "y": 2060,
        "wires": [
            [
                "fc4ed41ef51f09e4"
            ],
            [
                "3be5461a5e0a7cef"
            ]
        ]
    },
    {
        "id": "3be5461a5e0a7cef",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_KWCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3650,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "c95090e7c6203ee3",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2410,
        "y": 1800,
        "wires": []
    },
    {
        "id": "51ca0fa5fb3bfd0c",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2530,
        "y": 1973,
        "wires": []
    },
    {
        "id": "ce98967612881aa6",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2520,
        "y": 2220,
        "wires": []
    },
    {
        "id": "cbb620775a9f74cd",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3770,
        "y": 1800,
        "wires": []
    },
    {
        "id": "40908c640d0ff3d4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2560,
        "y": 2140,
        "wires": []
    },
    {
        "id": "f6a403cbc5553708",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-KWCH3",
        "links": [
            "6942a211947762ee"
        ],
        "x": 2435,
        "y": 1460,
        "wires": [
            [
                "bc62499733b71f8a"
            ]
        ]
    },
    {
        "id": "bc62499733b71f8a",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_KWCH3.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 1460,
        "wires": [
            [
                "7c69261263ce7251",
                "7f4e57774f0828c3"
            ]
        ]
    },
    {
        "id": "188b445bdbcfeda1",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3030,
        "y": 1460,
        "wires": [
            [
                "f7c7bb075d8701cd"
            ],
            [
                "d2b805094438c2d8"
            ]
        ]
    },
    {
        "id": "f7c7bb075d8701cd",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 1440,
        "wires": [
            [
                "5f69eec96e56df72"
            ]
        ]
    },
    {
        "id": "d2b805094438c2d8",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 1480,
        "wires": [
            [
                "877fa24917920695"
            ]
        ]
    },
    {
        "id": "5f69eec96e56df72",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 1440,
        "wires": [
            [
                "8c92aab7318184ef"
            ]
        ]
    },
    {
        "id": "877fa24917920695",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 1480,
        "wires": [
            [
                "8c92aab7318184ef"
            ]
        ]
    },
    {
        "id": "7c69261263ce7251",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2860,
        "y": 1460,
        "wires": [
            [
                "188b445bdbcfeda1"
            ]
        ]
    },
    {
        "id": "652e52b3f1677c3b",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp KWCH3",
        "mode": "link",
        "links": [
            "140ef73dcc213d92"
        ],
        "x": 3955,
        "y": 1840,
        "wires": []
    },
    {
        "id": "7de106d3d4d46d2e",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "19",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3250,
        "y": 1840,
        "wires": [
            [
                "556f3106bf858bd4"
            ]
        ]
    },
    {
        "id": "7f4e57774f0828c3",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2850,
        "y": 1420,
        "wires": []
    },
    {
        "id": "82e721033ac63c2e",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3100,
        "y": 1840,
        "wires": [
            [
                "7de106d3d4d46d2e"
            ]
        ]
    },
    {
        "id": "21e9ec5cb2a740b1",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2550,
        "y": 1940,
        "wires": []
    },
    {
        "id": "11b95f2fe7d2a0d4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2510,
        "y": 1380,
        "wires": []
    },
    {
        "id": "58fad6af793180d8",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2900,
        "y": 2300,
        "wires": [
            [
                "b940cdc852c60a01"
            ]
        ]
    },
    {
        "id": "ce508ab206d734ce",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "KW",
        "info": "",
        "x": 2270,
        "y": 1340,
        "wires": []
    },
    {
        "id": "d1f5b0467cd86616",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 3060,
        "wires": [
            [
                "20dcd1f9a032c96a"
            ]
        ]
    },
    {
        "id": "20dcd1f9a032c96a",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 610,
        "y": 3060,
        "wires": [
            [
                "e568436ad8c67753",
                "25547acaff8dd237"
            ]
        ]
    },
    {
        "id": "eeb5bc8024845886",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 3100,
        "wires": [
            [
                "efe7d4b9e1435fab"
            ]
        ]
    },
    {
        "id": "8f487d7eaedddbfc",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1470,
        "y": 3240,
        "wires": [
            [
                "b449eea41996b578"
            ]
        ]
    },
    {
        "id": "b449eea41996b578",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1710,
        "y": 3240,
        "wires": [
            []
        ]
    },
    {
        "id": "214a88b3639be405",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 260,
        "y": 3060,
        "wires": [
            [
                "d1f5b0467cd86616"
            ]
        ]
    },
    {
        "id": "2ad5a8dcd2e3d4ae",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1150,
        "y": 3640,
        "wires": [
            []
        ]
    },
    {
        "id": "25547acaff8dd237",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 3060,
        "wires": [
            [
                "9be75345e88d9397",
                "eeb5bc8024845886",
                "a553441e9e096da6"
            ],
            [
                "3e10ed0db121f2ce"
            ]
        ]
    },
    {
        "id": "371fe41785ba04c4",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 3640,
        "wires": [
            [
                "2ad5a8dcd2e3d4ae"
            ]
        ]
    },
    {
        "id": "35b77de3b26feafa",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 3520,
        "wires": [
            [
                "efcd33de294e37f5"
            ]
        ]
    },
    {
        "id": "efcd33de294e37f5",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 640,
        "y": 3520,
        "wires": [
            [
                "fe100901844f306c"
            ]
        ]
    },
    {
        "id": "9f8fee28b89ced0b",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 3520,
        "wires": [
            [
                "35b77de3b26feafa"
            ]
        ]
    },
    {
        "id": "34e24ab817847902",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 270,
        "y": 3600,
        "wires": []
    },
    {
        "id": "505de01fbd5a5780",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 620,
        "y": 3020,
        "wires": []
    },
    {
        "id": "77e84f8dfd0fbe7a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 330,
        "y": 3480,
        "wires": []
    },
    {
        "id": "2c3b1bc6fd4798a7",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 2640,
        "wires": []
    },
    {
        "id": "13f0b32b2abb132b",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 3100,
        "wires": []
    },
    {
        "id": "e568436ad8c67753",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 3100,
        "wires": []
    },
    {
        "id": "9be75345e88d9397",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 2980,
        "wires": []
    },
    {
        "id": "3e10ed0db121f2ce",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 3140,
        "wires": []
    },
    {
        "id": "ef1bc53b5ac5921f",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond VOLTCH2",
        "links": [
            "411a0f887e29f91d"
        ],
        "x": 315,
        "y": 3260,
        "wires": [
            [
                "dedc6b0b96e04bd9",
                "291283aa462bc5e5"
            ]
        ]
    },
    {
        "id": "d87ed04bd27aacb0",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1490,
        "y": 3120,
        "wires": [
            [
                "e209c0d7af013968",
                "41a077b0198cbebd"
            ]
        ]
    },
    {
        "id": "e209c0d7af013968",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 3060,
        "wires": [
            [
                "13f0b32b2abb132b",
                "3e892d9624e6a9d5"
            ]
        ]
    },
    {
        "id": "41a077b0198cbebd",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 3140,
        "wires": []
    },
    {
        "id": "efe7d4b9e1435fab",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no110= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 3060,
        "wires": [
            [
                "e209c0d7af013968"
            ]
        ]
    },
    {
        "id": "dedc6b0b96e04bd9",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 470,
        "y": 3260,
        "wires": [
            [
                "bb2207342d42d897",
                "01caee212862b0a0"
            ],
            [
                "01caee212862b0a0"
            ],
            []
        ]
    },
    {
        "id": "bb2207342d42d897",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 3233,
        "wires": []
    },
    {
        "id": "0ad154044381c282",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 380,
        "y": 3320,
        "wires": [
            [
                "dedc6b0b96e04bd9"
            ]
        ]
    },
    {
        "id": "01caee212862b0a0",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 3280,
        "wires": [
            [
                "4c9ecf063eaef85a"
            ]
        ]
    },
    {
        "id": "4c9ecf063eaef85a",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 890,
        "y": 3280,
        "wires": [
            [
                "fc46f9751e17493e"
            ]
        ]
    },
    {
        "id": "fc46f9751e17493e",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 3280,
        "wires": [
            [
                "cfedda2fa09c1cbd"
            ]
        ]
    },
    {
        "id": "cfedda2fa09c1cbd",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 3280,
        "wires": [
            [
                "8f487d7eaedddbfc"
            ],
            [
                "d5f140138abf8f22"
            ]
        ]
    },
    {
        "id": "d5f140138abf8f22",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1570,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "97d2dcda88b84c30",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 330,
        "y": 3020,
        "wires": []
    },
    {
        "id": "b540c3fbc157c429",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 450,
        "y": 3193,
        "wires": []
    },
    {
        "id": "577c2e1c2cdd4150",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 3440,
        "wires": []
    },
    {
        "id": "a107ea20b23899ce",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1690,
        "y": 3020,
        "wires": []
    },
    {
        "id": "9cba9daeba124833",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 3360,
        "wires": []
    },
    {
        "id": "078dfb72749d3c88",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-VOLTCH2",
        "links": [
            "d03e5153d3aafbb6"
        ],
        "x": 355,
        "y": 2680,
        "wires": [
            [
                "b42c03e94815b624"
            ]
        ]
    },
    {
        "id": "b42c03e94815b624",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_VOLTCH2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 2680,
        "wires": [
            [
                "49441b32daf1dd67",
                "fe025d5b6d62c014"
            ]
        ]
    },
    {
        "id": "495b861954af1fac",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 2680,
        "wires": [
            [
                "45c690cbb7d3ea2e"
            ],
            [
                "350728f2f86cd089"
            ]
        ]
    },
    {
        "id": "45c690cbb7d3ea2e",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 2660,
        "wires": [
            [
                "12a65dd8b534dcf5"
            ]
        ]
    },
    {
        "id": "350728f2f86cd089",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 2700,
        "wires": [
            [
                "3313852ee4a925a6"
            ]
        ]
    },
    {
        "id": "12a65dd8b534dcf5",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 2660,
        "wires": [
            [
                "821ea87ce4287025"
            ]
        ]
    },
    {
        "id": "3313852ee4a925a6",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 2700,
        "wires": [
            [
                "821ea87ce4287025"
            ]
        ]
    },
    {
        "id": "49441b32daf1dd67",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 780,
        "y": 2680,
        "wires": [
            [
                "495b861954af1fac"
            ]
        ]
    },
    {
        "id": "3e892d9624e6a9d5",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp VOLTCH2",
        "mode": "link",
        "links": [
            "480b51835f66ebec"
        ],
        "x": 1875,
        "y": 3060,
        "wires": []
    },
    {
        "id": "ac223afeba886fa3",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "20",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1170,
        "y": 3060,
        "wires": [
            [
                "efe7d4b9e1435fab"
            ]
        ]
    },
    {
        "id": "fe025d5b6d62c014",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 2640,
        "wires": []
    },
    {
        "id": "a553441e9e096da6",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 3060,
        "wires": [
            [
                "ac223afeba886fa3"
            ]
        ]
    },
    {
        "id": "b14f8a6abd04cc89",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 470,
        "y": 3160,
        "wires": []
    },
    {
        "id": "19ccdcc286c25e6e",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 430,
        "y": 2600,
        "wires": []
    },
    {
        "id": "fe100901844f306c",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 3520,
        "wires": [
            [
                "dedc6b0b96e04bd9"
            ]
        ]
    },
    {
        "id": "aa5786a8e8caf8df",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "VOLTAGE",
        "info": "",
        "x": 200,
        "y": 2560,
        "wires": []
    },
    {
        "id": "9e21efaa11191950",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2480,
        "y": 3060,
        "wires": [
            [
                "310c0c0994ad2e5a"
            ]
        ]
    },
    {
        "id": "310c0c0994ad2e5a",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2670,
        "y": 3060,
        "wires": [
            [
                "05835511b9f6c19d",
                "6be4a297fcbbb963"
            ]
        ]
    },
    {
        "id": "7442a81ad18a7c9d",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3100,
        "y": 3100,
        "wires": [
            [
                "06d7963d1f9bd1ee"
            ]
        ]
    },
    {
        "id": "3fc1abf513170c70",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3530,
        "y": 3240,
        "wires": [
            [
                "8629dbc8cdd50ca6"
            ]
        ]
    },
    {
        "id": "8629dbc8cdd50ca6",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3770,
        "y": 3240,
        "wires": [
            []
        ]
    },
    {
        "id": "52ea61a3da2b146b",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2320,
        "y": 3060,
        "wires": [
            [
                "9e21efaa11191950"
            ]
        ]
    },
    {
        "id": "4f4e09b4ff7e0c3c",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3210,
        "y": 3640,
        "wires": [
            []
        ]
    },
    {
        "id": "6be4a297fcbbb963",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2850,
        "y": 3060,
        "wires": [
            [
                "99ab7fdb0724cad3",
                "7442a81ad18a7c9d",
                "1b61ae9ee11c2e9a"
            ],
            [
                "541d2dae986015d4"
            ]
        ]
    },
    {
        "id": "2273ccf6c2ba680f",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2350,
        "y": 3640,
        "wires": [
            [
                "4f4e09b4ff7e0c3c"
            ]
        ]
    },
    {
        "id": "483752060642b556",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2500,
        "y": 3520,
        "wires": [
            [
                "9e2db0dab7500fd3"
            ]
        ]
    },
    {
        "id": "9e2db0dab7500fd3",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2700,
        "y": 3520,
        "wires": [
            [
                "e7ab0d9c2855d930"
            ]
        ]
    },
    {
        "id": "3b6b86b2636c4b68",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2340,
        "y": 3520,
        "wires": [
            [
                "483752060642b556"
            ]
        ]
    },
    {
        "id": "9e272e6a172180e4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 2330,
        "y": 3600,
        "wires": []
    },
    {
        "id": "b1a27692f655da7f",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2680,
        "y": 3020,
        "wires": []
    },
    {
        "id": "a1dd7abb1e99f5c8",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2390,
        "y": 3480,
        "wires": []
    },
    {
        "id": "f6ea6eebe0cb3996",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2520,
        "y": 2640,
        "wires": []
    },
    {
        "id": "236c4f92f47b3e7f",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3750,
        "y": 3100,
        "wires": []
    },
    {
        "id": "05835511b9f6c19d",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2690,
        "y": 3100,
        "wires": []
    },
    {
        "id": "99ab7fdb0724cad3",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3050,
        "y": 2980,
        "wires": []
    },
    {
        "id": "541d2dae986015d4",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3050,
        "y": 3140,
        "wires": []
    },
    {
        "id": "42a70c98977ef910",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond VOLTCH3",
        "links": [
            "8883960d9bd042d2"
        ],
        "x": 2375,
        "y": 3260,
        "wires": [
            [
                "d87301c22e88e5ed",
                "aefaa7812d32d324"
            ]
        ]
    },
    {
        "id": "9b11cdd499eae4c7",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3550,
        "y": 3120,
        "wires": [
            [
                "94573b38ca4827cd",
                "9069ceee0c3fe0f0"
            ]
        ]
    },
    {
        "id": "94573b38ca4827cd",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3680,
        "y": 3060,
        "wires": [
            [
                "236c4f92f47b3e7f",
                "2817c1af82d45df1"
            ]
        ]
    },
    {
        "id": "9069ceee0c3fe0f0",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3730,
        "y": 3140,
        "wires": []
    },
    {
        "id": "06d7963d1f9bd1ee",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no115= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3400,
        "y": 3060,
        "wires": [
            [
                "94573b38ca4827cd"
            ]
        ]
    },
    {
        "id": "d87301c22e88e5ed",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2530,
        "y": 3260,
        "wires": [
            [
                "3f55f90c2f41d57e",
                "137314cfdee121fd"
            ],
            [
                "137314cfdee121fd"
            ],
            []
        ]
    },
    {
        "id": "3f55f90c2f41d57e",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2730,
        "y": 3233,
        "wires": []
    },
    {
        "id": "777b0ac69054980c",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2440,
        "y": 3320,
        "wires": [
            [
                "d87301c22e88e5ed"
            ]
        ]
    },
    {
        "id": "137314cfdee121fd",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2760,
        "y": 3280,
        "wires": [
            [
                "60b6b6094825e0f4"
            ]
        ]
    },
    {
        "id": "60b6b6094825e0f4",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2950,
        "y": 3280,
        "wires": [
            [
                "22ead5218bdf2102"
            ]
        ]
    },
    {
        "id": "22ead5218bdf2102",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3180,
        "y": 3280,
        "wires": [
            [
                "4811a5673b64c7a3"
            ]
        ]
    },
    {
        "id": "4811a5673b64c7a3",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3370,
        "y": 3280,
        "wires": [
            [
                "3fc1abf513170c70"
            ],
            [
                "33192ded7240670a"
            ]
        ]
    },
    {
        "id": "33192ded7240670a",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_VOLTCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3630,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "a3f2ea293f30d617",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2390,
        "y": 3020,
        "wires": []
    },
    {
        "id": "644cfe2379194c17",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2510,
        "y": 3193,
        "wires": []
    },
    {
        "id": "6b2b5da83d5523a2",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2500,
        "y": 3440,
        "wires": []
    },
    {
        "id": "7723f7608733cdfd",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3750,
        "y": 3020,
        "wires": []
    },
    {
        "id": "e8105abcde68f37a",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2540,
        "y": 3360,
        "wires": []
    },
    {
        "id": "8ec2e032a05bbdb6",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-VOLTCH3",
        "links": [
            "3598079b7cd4be4c"
        ],
        "x": 2415,
        "y": 2680,
        "wires": [
            [
                "8dc4fa2576195294"
            ]
        ]
    },
    {
        "id": "8dc4fa2576195294",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_VOLTCH3.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2650,
        "y": 2680,
        "wires": [
            [
                "2244f8b322992ce7",
                "452292af032a2acc"
            ]
        ]
    },
    {
        "id": "cc6c323033aaeeb6",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3010,
        "y": 2680,
        "wires": [
            [
                "49581fb45965c6ba"
            ],
            [
                "d865a18fcba6d79d"
            ]
        ]
    },
    {
        "id": "49581fb45965c6ba",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3200,
        "y": 2660,
        "wires": [
            [
                "407ac0b5bc9eae32"
            ]
        ]
    },
    {
        "id": "d865a18fcba6d79d",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3200,
        "y": 2700,
        "wires": [
            [
                "a1783d1908340f42"
            ]
        ]
    },
    {
        "id": "407ac0b5bc9eae32",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3350,
        "y": 2660,
        "wires": [
            [
                "1341ee50e772ec6e"
            ]
        ]
    },
    {
        "id": "a1783d1908340f42",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3350,
        "y": 2700,
        "wires": [
            [
                "1341ee50e772ec6e"
            ]
        ]
    },
    {
        "id": "2244f8b322992ce7",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2840,
        "y": 2680,
        "wires": [
            [
                "cc6c323033aaeeb6"
            ]
        ]
    },
    {
        "id": "2817c1af82d45df1",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp VOLTCH3",
        "mode": "link",
        "links": [
            "0a91eca3416a6902"
        ],
        "x": 3935,
        "y": 3060,
        "wires": []
    },
    {
        "id": "1885eb71a53afdac",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "20",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3230,
        "y": 3060,
        "wires": [
            [
                "06d7963d1f9bd1ee"
            ]
        ]
    },
    {
        "id": "452292af032a2acc",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2830,
        "y": 2640,
        "wires": []
    },
    {
        "id": "1b61ae9ee11c2e9a",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3080,
        "y": 3060,
        "wires": [
            [
                "1885eb71a53afdac"
            ]
        ]
    },
    {
        "id": "77261d5e6b29e538",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2530,
        "y": 3160,
        "wires": []
    },
    {
        "id": "d4cf53ec32c5ee55",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2490,
        "y": 2600,
        "wires": []
    },
    {
        "id": "e7ab0d9c2855d930",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2880,
        "y": 3520,
        "wires": [
            [
                "d87301c22e88e5ed"
            ]
        ]
    },
    {
        "id": "85cf3886f5c712a7",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "VOLTAGE",
        "info": "",
        "x": 2260,
        "y": 2560,
        "wires": []
    },
    {
        "id": "1231395a239dce19",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 4300,
        "wires": [
            [
                "4362e9beaa89a9c2"
            ]
        ]
    },
    {
        "id": "4362e9beaa89a9c2",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 610,
        "y": 4300,
        "wires": [
            [
                "7e06f295d61febd9",
                "4bd678656872aed6"
            ]
        ]
    },
    {
        "id": "8bd71c745b0c10f9",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 4340,
        "wires": [
            [
                "f9858f32f982a2d7"
            ]
        ]
    },
    {
        "id": "0f6b17c7d821e672",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1470,
        "y": 4480,
        "wires": [
            [
                "69cce7137478acf0"
            ]
        ]
    },
    {
        "id": "69cce7137478acf0",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1710,
        "y": 4480,
        "wires": [
            []
        ]
    },
    {
        "id": "76f698268cfb4f65",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 260,
        "y": 4300,
        "wires": [
            [
                "1231395a239dce19"
            ]
        ]
    },
    {
        "id": "54221d62e5bb99bb",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1150,
        "y": 4880,
        "wires": [
            []
        ]
    },
    {
        "id": "4bd678656872aed6",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 4300,
        "wires": [
            [
                "63342b7d13e67a39",
                "8bd71c745b0c10f9",
                "30befe62a2021464"
            ],
            [
                "f40045ef152cf254"
            ]
        ]
    },
    {
        "id": "9d52a89845e4fc48",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 4880,
        "wires": [
            [
                "54221d62e5bb99bb"
            ]
        ]
    },
    {
        "id": "f618134e9adeebab",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 4760,
        "wires": [
            [
                "c09c9f8be43facc4"
            ]
        ]
    },
    {
        "id": "c09c9f8be43facc4",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 640,
        "y": 4760,
        "wires": [
            [
                "ee69ed84f6454620"
            ]
        ]
    },
    {
        "id": "aee39e2497fc8731",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 4760,
        "wires": [
            [
                "f618134e9adeebab"
            ]
        ]
    },
    {
        "id": "e75ce4fa3114f60f",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 270,
        "y": 4840,
        "wires": []
    },
    {
        "id": "40e6648bf8a17069",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 620,
        "y": 4260,
        "wires": []
    },
    {
        "id": "79ef8439eba2fbf7",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 330,
        "y": 4720,
        "wires": []
    },
    {
        "id": "bd81d6983cf07cfb",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 3880,
        "wires": []
    },
    {
        "id": "6e7fd315a56022b8",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1690,
        "y": 4340,
        "wires": []
    },
    {
        "id": "7e06f295d61febd9",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 4340,
        "wires": []
    },
    {
        "id": "63342b7d13e67a39",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 4220,
        "wires": []
    },
    {
        "id": "f40045ef152cf254",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 4380,
        "wires": []
    },
    {
        "id": "29578444b4f836cd",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond CURRENTCH2",
        "links": [
            "bc5caf72dcefcc69"
        ],
        "x": 315,
        "y": 4500,
        "wires": [
            [
                "71a6f5c551dbbf04",
                "dfea17a55a1fd49d"
            ]
        ]
    },
    {
        "id": "5735ced3e4eefdd4",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1490,
        "y": 4360,
        "wires": [
            [
                "1054c409bba8354e",
                "cf207e2779c5bcee"
            ]
        ]
    },
    {
        "id": "1054c409bba8354e",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 4300,
        "wires": [
            [
                "6e7fd315a56022b8",
                "bdfa8749d013c6c9"
            ]
        ]
    },
    {
        "id": "cf207e2779c5bcee",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 4380,
        "wires": []
    },
    {
        "id": "f9858f32f982a2d7",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no111= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 4300,
        "wires": [
            [
                "1054c409bba8354e"
            ]
        ]
    },
    {
        "id": "71a6f5c551dbbf04",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 470,
        "y": 4500,
        "wires": [
            [
                "119e43c49e0e795f",
                "082880d5e88fe20a"
            ],
            [
                "082880d5e88fe20a"
            ],
            []
        ]
    },
    {
        "id": "119e43c49e0e795f",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 4473,
        "wires": []
    },
    {
        "id": "e8677c93f6423c64",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 380,
        "y": 4560,
        "wires": [
            [
                "71a6f5c551dbbf04"
            ]
        ]
    },
    {
        "id": "082880d5e88fe20a",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 4520,
        "wires": [
            [
                "5527f685bc8a9e6e"
            ]
        ]
    },
    {
        "id": "5527f685bc8a9e6e",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 890,
        "y": 4520,
        "wires": [
            [
                "bbdf64ab3c7277ab"
            ]
        ]
    },
    {
        "id": "bbdf64ab3c7277ab",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 4520,
        "wires": [
            [
                "1aa9ee16bae7edba"
            ]
        ]
    },
    {
        "id": "1aa9ee16bae7edba",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 4520,
        "wires": [
            [
                "0f6b17c7d821e672"
            ],
            [
                "6507194b21c5514f"
            ]
        ]
    },
    {
        "id": "6507194b21c5514f",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1570,
        "y": 4540,
        "wires": [
            []
        ]
    },
    {
        "id": "ac9ae421cde7e2ed",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 330,
        "y": 4260,
        "wires": []
    },
    {
        "id": "d94ffb606ef2574f",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 450,
        "y": 4433,
        "wires": []
    },
    {
        "id": "e019ebd63dcb8eda",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 4680,
        "wires": []
    },
    {
        "id": "c2c3e464f6bb8fef",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1690,
        "y": 4260,
        "wires": []
    },
    {
        "id": "9a092724b6637f39",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 4600,
        "wires": []
    },
    {
        "id": "39592009f3d3f459",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-CURRENTCH2",
        "links": [
            "a66a930e41a9904e"
        ],
        "x": 355,
        "y": 3920,
        "wires": [
            [
                "e9299e94732e8b5b"
            ]
        ]
    },
    {
        "id": "e9299e94732e8b5b",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_CURRENTCH2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 3920,
        "wires": [
            [
                "ad19dcb3e331f5ae",
                "ff6e932ec3621935"
            ]
        ]
    },
    {
        "id": "c6681cb6ea47312f",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 3920,
        "wires": [
            [
                "726988111ab0c1d6"
            ],
            [
                "0784dc016b606cd4"
            ]
        ]
    },
    {
        "id": "726988111ab0c1d6",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 3900,
        "wires": [
            [
                "c12e449aa488d973"
            ]
        ]
    },
    {
        "id": "0784dc016b606cd4",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 3940,
        "wires": [
            [
                "56a0544a2b570582"
            ]
        ]
    },
    {
        "id": "c12e449aa488d973",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 3900,
        "wires": [
            [
                "dd4bd72c279625fe"
            ]
        ]
    },
    {
        "id": "56a0544a2b570582",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 3940,
        "wires": [
            [
                "dd4bd72c279625fe"
            ]
        ]
    },
    {
        "id": "ad19dcb3e331f5ae",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 780,
        "y": 3920,
        "wires": [
            [
                "c6681cb6ea47312f"
            ]
        ]
    },
    {
        "id": "bdfa8749d013c6c9",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp CURRENTCH2",
        "mode": "link",
        "links": [
            "fc63a98a56d378b2"
        ],
        "x": 1875,
        "y": 4300,
        "wires": []
    },
    {
        "id": "fef24ff824ea2c66",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "21",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1170,
        "y": 4300,
        "wires": [
            [
                "f9858f32f982a2d7"
            ]
        ]
    },
    {
        "id": "ff6e932ec3621935",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 3880,
        "wires": []
    },
    {
        "id": "30befe62a2021464",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 4300,
        "wires": [
            [
                "fef24ff824ea2c66"
            ]
        ]
    },
    {
        "id": "8f7b68e9d04212c9",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 470,
        "y": 4400,
        "wires": []
    },
    {
        "id": "460dab1327629867",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 430,
        "y": 3840,
        "wires": []
    },
    {
        "id": "ee69ed84f6454620",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 4760,
        "wires": [
            [
                "71a6f5c551dbbf04"
            ]
        ]
    },
    {
        "id": "889f98b1c85497eb",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "CURRENT",
        "info": "",
        "x": 200,
        "y": 3800,
        "wires": []
    },
    {
        "id": "6ec08c6a47818e1e",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2500,
        "y": 4300,
        "wires": [
            [
                "d9600d309a6853fb"
            ]
        ]
    },
    {
        "id": "d9600d309a6853fb",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2690,
        "y": 4300,
        "wires": [
            [
                "a6a1345def47c6e2",
                "c372692399089b97"
            ]
        ]
    },
    {
        "id": "11edece85997aa0d",
        "type": "function",
        "z": "501238405e29cec3",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3120,
        "y": 4340,
        "wires": [
            [
                "6e9bade3cbdd096a"
            ]
        ]
    },
    {
        "id": "174e1068440bd7be",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3550,
        "y": 4480,
        "wires": [
            [
                "1c3a03a178403c81"
            ]
        ]
    },
    {
        "id": "1c3a03a178403c81",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3790,
        "y": 4480,
        "wires": [
            []
        ]
    },
    {
        "id": "6ef299e1ced6de3d",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2340,
        "y": 4300,
        "wires": [
            [
                "6ec08c6a47818e1e"
            ]
        ]
    },
    {
        "id": "9d1e66adc1f0b692",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3230,
        "y": 4880,
        "wires": [
            []
        ]
    },
    {
        "id": "c372692399089b97",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2870,
        "y": 4300,
        "wires": [
            [
                "cf885ab0db265c26",
                "11edece85997aa0d",
                "4bb477b9ec2efeb8"
            ],
            [
                "9b46f44ec3669307"
            ]
        ]
    },
    {
        "id": "6876a6c0ff46d0f1",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2370,
        "y": 4880,
        "wires": [
            [
                "9d1e66adc1f0b692"
            ]
        ]
    },
    {
        "id": "8ff683d4cf92bdb2",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2520,
        "y": 4760,
        "wires": [
            [
                "61bf0548b2a5d6f4"
            ]
        ]
    },
    {
        "id": "61bf0548b2a5d6f4",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2720,
        "y": 4760,
        "wires": [
            [
                "f998d58bdee78f3e"
            ]
        ]
    },
    {
        "id": "8df6b65084169cd4",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2360,
        "y": 4760,
        "wires": [
            [
                "8ff683d4cf92bdb2"
            ]
        ]
    },
    {
        "id": "4d1b1c4226fcbb09",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "DELETE FILE",
        "info": "",
        "x": 2350,
        "y": 4840,
        "wires": []
    },
    {
        "id": "8bca1104cb9a0b19",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2700,
        "y": 4260,
        "wires": []
    },
    {
        "id": "cb271680aa03f844",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2410,
        "y": 4720,
        "wires": []
    },
    {
        "id": "12cbbc77c9698381",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2540,
        "y": 3880,
        "wires": []
    },
    {
        "id": "0392e619d514c711",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3770,
        "y": 4340,
        "wires": []
    },
    {
        "id": "a6a1345def47c6e2",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2710,
        "y": 4340,
        "wires": []
    },
    {
        "id": "cf885ab0db265c26",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 4220,
        "wires": []
    },
    {
        "id": "9b46f44ec3669307",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3070,
        "y": 4380,
        "wires": []
    },
    {
        "id": "6ec45a1a4c8646bc",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "receive server respond CURRENTCH3",
        "links": [
            "6b20ed32609090ed"
        ],
        "x": 2395,
        "y": 4500,
        "wires": [
            [
                "638fbef1b4d7ecc2",
                "aef1983bca99e131"
            ]
        ]
    },
    {
        "id": "1da73bcf725a61ef",
        "type": "json",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3570,
        "y": 4360,
        "wires": [
            [
                "3519b2dec4892f7c",
                "88ab7166e3d4e1ee"
            ]
        ]
    },
    {
        "id": "3519b2dec4892f7c",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3700,
        "y": 4300,
        "wires": [
            [
                "0392e619d514c711",
                "c1ec80e32ffde442"
            ]
        ]
    },
    {
        "id": "88ab7166e3d4e1ee",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3750,
        "y": 4380,
        "wires": []
    },
    {
        "id": "6e9bade3cbdd096a",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no116= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3420,
        "y": 4300,
        "wires": [
            [
                "3519b2dec4892f7c"
            ]
        ]
    },
    {
        "id": "638fbef1b4d7ecc2",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2550,
        "y": 4500,
        "wires": [
            [
                "296e2c752f776bde",
                "df1fd10d9aaeb09b"
            ],
            [
                "df1fd10d9aaeb09b"
            ],
            []
        ]
    },
    {
        "id": "296e2c752f776bde",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2750,
        "y": 4473,
        "wires": []
    },
    {
        "id": "4da74793c6aa0ce2",
        "type": "inject",
        "z": "501238405e29cec3",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2460,
        "y": 4560,
        "wires": [
            [
                "638fbef1b4d7ecc2"
            ]
        ]
    },
    {
        "id": "df1fd10d9aaeb09b",
        "type": "file in",
        "z": "501238405e29cec3",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2780,
        "y": 4520,
        "wires": [
            [
                "4b1d7f5f4814b5b3"
            ]
        ]
    },
    {
        "id": "4b1d7f5f4814b5b3",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2970,
        "y": 4520,
        "wires": [
            [
                "10e906d25e0c2bb6"
            ]
        ]
    },
    {
        "id": "10e906d25e0c2bb6",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3200,
        "y": 4520,
        "wires": [
            [
                "dcf5f6d74d537cc1"
            ]
        ]
    },
    {
        "id": "dcf5f6d74d537cc1",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3390,
        "y": 4520,
        "wires": [
            [
                "174e1068440bd7be"
            ],
            [
                "e9f7ff4365ccfee2"
            ]
        ]
    },
    {
        "id": "e9f7ff4365ccfee2",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_CURRENTCH3.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3650,
        "y": 4540,
        "wires": [
            []
        ]
    },
    {
        "id": "3d71fad9b9b95ad4",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2410,
        "y": 4260,
        "wires": []
    },
    {
        "id": "f60cb7326f52aeeb",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2530,
        "y": 4433,
        "wires": []
    },
    {
        "id": "511040ef4f95b37d",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2520,
        "y": 4680,
        "wires": []
    },
    {
        "id": "ef11640e32fb98c3",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3770,
        "y": 4260,
        "wires": []
    },
    {
        "id": "97b0587b057b8722",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2560,
        "y": 4600,
        "wires": []
    },
    {
        "id": "f89d0e6cb65cf00b",
        "type": "link in",
        "z": "501238405e29cec3",
        "name": "INQUEUE-CURRENTCH3",
        "links": [
            "c726b49f9875c025"
        ],
        "x": 2435,
        "y": 3920,
        "wires": [
            [
                "e69b758ee98bb284"
            ]
        ]
    },
    {
        "id": "e69b758ee98bb284",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_CURRENTCH3.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 3920,
        "wires": [
            [
                "9cd92dd0d9c5602b",
                "03f4a912d0ba66e3"
            ]
        ]
    },
    {
        "id": "62f8ef2828ade8e1",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3030,
        "y": 3920,
        "wires": [
            [
                "46314c1a997b21fd"
            ],
            [
                "499f0a4786e585f1"
            ]
        ]
    },
    {
        "id": "46314c1a997b21fd",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 3900,
        "wires": [
            [
                "6d9b84b1e1568e8b"
            ]
        ]
    },
    {
        "id": "499f0a4786e585f1",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3220,
        "y": 3940,
        "wires": [
            [
                "79e4e06ed86781e2"
            ]
        ]
    },
    {
        "id": "6d9b84b1e1568e8b",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 3900,
        "wires": [
            [
                "705aa5d3f3ea7daf"
            ]
        ]
    },
    {
        "id": "79e4e06ed86781e2",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3370,
        "y": 3940,
        "wires": [
            [
                "705aa5d3f3ea7daf"
            ]
        ]
    },
    {
        "id": "9cd92dd0d9c5602b",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2860,
        "y": 3920,
        "wires": [
            [
                "62f8ef2828ade8e1"
            ]
        ]
    },
    {
        "id": "c1ec80e32ffde442",
        "type": "link out",
        "z": "501238405e29cec3",
        "name": "request to server resp CURRENTCH3",
        "mode": "link",
        "links": [
            "ae5e346b17aad839"
        ],
        "x": 3955,
        "y": 4300,
        "wires": []
    },
    {
        "id": "ebdc20f34c94d53a",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "21",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3250,
        "y": 4300,
        "wires": [
            [
                "6e9bade3cbdd096a"
            ]
        ]
    },
    {
        "id": "03f4a912d0ba66e3",
        "type": "debug",
        "z": "501238405e29cec3",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2850,
        "y": 3880,
        "wires": []
    },
    {
        "id": "4bb477b9ec2efeb8",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3100,
        "y": 4300,
        "wires": [
            [
                "ebdc20f34c94d53a"
            ]
        ]
    },
    {
        "id": "d7ce245da7ef8726",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2550,
        "y": 4400,
        "wires": []
    },
    {
        "id": "545fd5e623e366d8",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2510,
        "y": 3840,
        "wires": []
    },
    {
        "id": "f998d58bdee78f3e",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2900,
        "y": 4760,
        "wires": [
            [
                "638fbef1b4d7ecc2"
            ]
        ]
    },
    {
        "id": "a468b14ce986eadd",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "CURRENT",
        "info": "",
        "x": 2280,
        "y": 3800,
        "wires": []
    },
    {
        "id": "2f30083438d38f76",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch2kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1020,
        "wires": [
            [
                "5408e722621aab37"
            ]
        ]
    },
    {
        "id": "feebd7594440fa73",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 1020,
        "wires": [
            [
                "861c3a99a9b8f5ef"
            ],
            [
                "9fa3f0a2821861e9"
            ]
        ]
    },
    {
        "id": "861c3a99a9b8f5ef",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1000,
        "wires": [
            [
                "01276572066668b4"
            ]
        ]
    },
    {
        "id": "9fa3f0a2821861e9",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1040,
        "wires": [
            [
                "5e1e0a855577e8a8"
            ]
        ]
    },
    {
        "id": "e3a3fa0ac6e1a143",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1930,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "5408e722621aab37",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1280,
        "y": 1020,
        "wires": [
            [
                "feebd7594440fa73"
            ]
        ]
    },
    {
        "id": "31705a073f255b8d",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 980,
        "wires": []
    },
    {
        "id": "5e1e0a855577e8a8",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 1040,
        "wires": [
            [
                "e3a3fa0ac6e1a143"
            ]
        ]
    },
    {
        "id": "01276572066668b4",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 1000,
        "wires": [
            [
                "e3a3fa0ac6e1a143"
            ]
        ]
    },
    {
        "id": "d3294127cda92099",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter18",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 900,
        "y": 920,
        "wires": [
            [
                "2f30083438d38f76"
            ]
        ]
    },
    {
        "id": "3aa5a970e76efeb8",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch2kw_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 2240,
        "wires": [
            [
                "291f1b093f60468e"
            ]
        ]
    },
    {
        "id": "bba94dd4930ac6ed",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1470,
        "y": 2240,
        "wires": [
            [
                "6e41ae72a176d9e4"
            ],
            [
                "c23e4506195f2efa"
            ]
        ]
    },
    {
        "id": "6e41ae72a176d9e4",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 2220,
        "wires": [
            [
                "e17493ba90f9dd3f"
            ]
        ]
    },
    {
        "id": "c23e4506195f2efa",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 2260,
        "wires": [
            [
                "882945427e87021e"
            ]
        ]
    },
    {
        "id": "90e1835b5a07a260",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1950,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "291f1b093f60468e",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1300,
        "y": 2240,
        "wires": [
            [
                "bba94dd4930ac6ed"
            ]
        ]
    },
    {
        "id": "b0a3620c0461a57e",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1210,
        "y": 2200,
        "wires": []
    },
    {
        "id": "882945427e87021e",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 2260,
        "wires": [
            [
                "90e1835b5a07a260"
            ]
        ]
    },
    {
        "id": "e17493ba90f9dd3f",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 2220,
        "wires": [
            [
                "90e1835b5a07a260"
            ]
        ]
    },
    {
        "id": "c3dd69968f5e8431",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter19",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 2140,
        "wires": [
            [
                "3aa5a970e76efeb8"
            ]
        ]
    },
    {
        "id": "f12727115805602c",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch2volt_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 3460,
        "wires": [
            [
                "bfbeb471d72d6f57"
            ]
        ]
    },
    {
        "id": "b83275e9abea4a0e",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 3460,
        "wires": [
            [
                "df902f0f76f08754"
            ],
            [
                "28a3acc4d185cdf1"
            ]
        ]
    },
    {
        "id": "df902f0f76f08754",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 3440,
        "wires": [
            [
                "8bd304d7e23b5468"
            ]
        ]
    },
    {
        "id": "28a3acc4d185cdf1",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 3480,
        "wires": [
            [
                "0c9d0125eb1edd44"
            ]
        ]
    },
    {
        "id": "5c809d3f626da721",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1930,
        "y": 3460,
        "wires": [
            []
        ]
    },
    {
        "id": "bfbeb471d72d6f57",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1280,
        "y": 3460,
        "wires": [
            [
                "b83275e9abea4a0e"
            ]
        ]
    },
    {
        "id": "01b0f7c778bc7244",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 3420,
        "wires": []
    },
    {
        "id": "0c9d0125eb1edd44",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 3480,
        "wires": [
            [
                "5c809d3f626da721"
            ]
        ]
    },
    {
        "id": "8bd304d7e23b5468",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 3440,
        "wires": [
            [
                "5c809d3f626da721"
            ]
        ]
    },
    {
        "id": "291283aa462bc5e5",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter20",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 900,
        "y": 3360,
        "wires": [
            [
                "f12727115805602c"
            ]
        ]
    },
    {
        "id": "9f38c3e8b58cae03",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch2current_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 4700,
        "wires": [
            [
                "5c5a230dba870829"
            ]
        ]
    },
    {
        "id": "e655126d2fda1d7d",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 4700,
        "wires": [
            [
                "c4d7fd681c80bb90"
            ],
            [
                "af8550ba1f025ff4"
            ]
        ]
    },
    {
        "id": "c4d7fd681c80bb90",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 4680,
        "wires": [
            [
                "209af1915539d93d"
            ]
        ]
    },
    {
        "id": "af8550ba1f025ff4",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 4720,
        "wires": [
            [
                "d5f619269d934fbb"
            ]
        ]
    },
    {
        "id": "8dd16c9efd79190d",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 4700,
        "wires": [
            []
        ]
    },
    {
        "id": "5c5a230dba870829",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 4700,
        "wires": [
            [
                "e655126d2fda1d7d"
            ]
        ]
    },
    {
        "id": "ba52d662ad9b2894",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1170,
        "y": 4660,
        "wires": []
    },
    {
        "id": "d5f619269d934fbb",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 4720,
        "wires": [
            [
                "8dd16c9efd79190d"
            ]
        ]
    },
    {
        "id": "209af1915539d93d",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 4680,
        "wires": [
            [
                "8dd16c9efd79190d"
            ]
        ]
    },
    {
        "id": "dfea17a55a1fd49d",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter21",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 880,
        "y": 4600,
        "wires": [
            [
                "9f38c3e8b58cae03"
            ]
        ]
    },
    {
        "id": "243762355a521d65",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch3kwh_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3190,
        "y": 1020,
        "wires": [
            [
                "f1d684075d45fa4a"
            ]
        ]
    },
    {
        "id": "c0cc7e5f91df2b83",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3550,
        "y": 1020,
        "wires": [
            [
                "063c3740d7fbcb4c"
            ],
            [
                "0334610bbfd748d2"
            ]
        ]
    },
    {
        "id": "063c3740d7fbcb4c",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3740,
        "y": 1000,
        "wires": [
            [
                "52b80a635503e355"
            ]
        ]
    },
    {
        "id": "0334610bbfd748d2",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3740,
        "y": 1040,
        "wires": [
            [
                "ca1b8c7d71264cc7"
            ]
        ]
    },
    {
        "id": "2ef6a1c531bedebf",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4030,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "f1d684075d45fa4a",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3380,
        "y": 1020,
        "wires": [
            [
                "c0cc7e5f91df2b83"
            ]
        ]
    },
    {
        "id": "1bc776bc36d3b9f7",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3290,
        "y": 980,
        "wires": []
    },
    {
        "id": "ca1b8c7d71264cc7",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3910,
        "y": 1040,
        "wires": [
            [
                "2ef6a1c531bedebf"
            ]
        ]
    },
    {
        "id": "52b80a635503e355",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3910,
        "y": 1000,
        "wires": [
            [
                "2ef6a1c531bedebf"
            ]
        ]
    },
    {
        "id": "1c9f72222fcf5db1",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter18",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3000,
        "y": 920,
        "wires": [
            [
                "243762355a521d65"
            ]
        ]
    },
    {
        "id": "9db5655300eb5cf5",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch3kw_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3170,
        "y": 2240,
        "wires": [
            [
                "7bc8925fb3894178"
            ]
        ]
    },
    {
        "id": "60eda73cc53bd656",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3530,
        "y": 2240,
        "wires": [
            [
                "ced3e8035a77682a"
            ],
            [
                "f254ecde98675160"
            ]
        ]
    },
    {
        "id": "ced3e8035a77682a",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3720,
        "y": 2220,
        "wires": [
            [
                "aae5ea4e4a481061"
            ]
        ]
    },
    {
        "id": "f254ecde98675160",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3720,
        "y": 2260,
        "wires": [
            [
                "a1110bd5ab86a669"
            ]
        ]
    },
    {
        "id": "e974ccd3db8e9560",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4010,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "7bc8925fb3894178",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3360,
        "y": 2240,
        "wires": [
            [
                "60eda73cc53bd656"
            ]
        ]
    },
    {
        "id": "e3bae54a2939ae5b",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3270,
        "y": 2200,
        "wires": []
    },
    {
        "id": "a1110bd5ab86a669",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3890,
        "y": 2260,
        "wires": [
            [
                "e974ccd3db8e9560"
            ]
        ]
    },
    {
        "id": "aae5ea4e4a481061",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3890,
        "y": 2220,
        "wires": [
            [
                "e974ccd3db8e9560"
            ]
        ]
    },
    {
        "id": "e8715bf574cc682d",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter19",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2980,
        "y": 2140,
        "wires": [
            [
                "9db5655300eb5cf5"
            ]
        ]
    },
    {
        "id": "12dce33207a55e76",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch3volt_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3190,
        "y": 3460,
        "wires": [
            [
                "4aaad340ae02215e"
            ]
        ]
    },
    {
        "id": "10d985a5e2e8e3fb",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3550,
        "y": 3460,
        "wires": [
            [
                "14adbb274232d1e2"
            ],
            [
                "267516b6d2d73bbc"
            ]
        ]
    },
    {
        "id": "14adbb274232d1e2",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3740,
        "y": 3440,
        "wires": [
            [
                "fc03994259de9c3d"
            ]
        ]
    },
    {
        "id": "267516b6d2d73bbc",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3740,
        "y": 3480,
        "wires": [
            [
                "1fbfb384247df995"
            ]
        ]
    },
    {
        "id": "60554237497a0dc0",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4030,
        "y": 3460,
        "wires": [
            []
        ]
    },
    {
        "id": "4aaad340ae02215e",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3380,
        "y": 3460,
        "wires": [
            [
                "10d985a5e2e8e3fb"
            ]
        ]
    },
    {
        "id": "e4b2fa9992d57d99",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3290,
        "y": 3420,
        "wires": []
    },
    {
        "id": "1fbfb384247df995",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3910,
        "y": 3480,
        "wires": [
            [
                "60554237497a0dc0"
            ]
        ]
    },
    {
        "id": "fc03994259de9c3d",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3910,
        "y": 3440,
        "wires": [
            [
                "60554237497a0dc0"
            ]
        ]
    },
    {
        "id": "aefaa7812d32d324",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter20",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3000,
        "y": 3360,
        "wires": [
            [
                "12dce33207a55e76"
            ]
        ]
    },
    {
        "id": "13bdff4692d5bdbb",
        "type": "function",
        "z": "501238405e29cec3",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_ch3current_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3170,
        "y": 4700,
        "wires": [
            [
                "5baf38c17b588c51"
            ]
        ]
    },
    {
        "id": "d812cb4aec10950f",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3530,
        "y": 4700,
        "wires": [
            [
                "f9b7b644548bb8e9"
            ],
            [
                "50eea15e40c4d90a"
            ]
        ]
    },
    {
        "id": "f9b7b644548bb8e9",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3720,
        "y": 4680,
        "wires": [
            [
                "d1403c6ab0290dfa"
            ]
        ]
    },
    {
        "id": "50eea15e40c4d90a",
        "type": "change",
        "z": "501238405e29cec3",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3720,
        "y": 4720,
        "wires": [
            [
                "8fa19f2fdd94072a"
            ]
        ]
    },
    {
        "id": "688e5efe18291adb",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4010,
        "y": 4700,
        "wires": [
            []
        ]
    },
    {
        "id": "5baf38c17b588c51",
        "type": "fs-file-lister",
        "z": "501238405e29cec3",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3360,
        "y": 4700,
        "wires": [
            [
                "d812cb4aec10950f"
            ]
        ]
    },
    {
        "id": "c6c885f32ddc35f8",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3270,
        "y": 4660,
        "wires": []
    },
    {
        "id": "8fa19f2fdd94072a",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3890,
        "y": 4720,
        "wires": [
            [
                "688e5efe18291adb"
            ]
        ]
    },
    {
        "id": "d1403c6ab0290dfa",
        "type": "csv",
        "z": "501238405e29cec3",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3890,
        "y": 4680,
        "wires": [
            [
                "688e5efe18291adb"
            ]
        ]
    },
    {
        "id": "aef1983bca99e131",
        "type": "switch",
        "z": "501238405e29cec3",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter21",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2980,
        "y": 4600,
        "wires": [
            [
                "13bdff4692d5bdbb"
            ]
        ]
    },
    {
        "id": "f8b2b7975e7ef058",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "EM CH2",
        "info": "",
        "x": 180,
        "y": 60,
        "wires": []
    },
    {
        "id": "7e5bb1dd284ff326",
        "type": "comment",
        "z": "501238405e29cec3",
        "name": "EM CH3",
        "info": "",
        "x": 2240,
        "y": 60,
        "wires": []
    },
    {
        "id": "aa675184089a0eab",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "449357f836146185",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "821ea87ce4287025",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1460,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "dd4bd72c279625fe",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1460,
        "y": 3860,
        "wires": [
            []
        ]
    },
    {
        "id": "e1396cfc0fafcf2a",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3540,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "8c92aab7318184ef",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3540,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "1341ee50e772ec6e",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3500,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "705aa5d3f3ea7daf",
        "type": "file",
        "z": "501238405e29cec3",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3560,
        "y": 3860,
        "wires": [
            []
        ]
    },
    {
        "id": "0612f4260f75f3a4",
        "type": "link out",
        "z": "448540c6f18cdaa5",
        "name": "SSMOKE2",
        "mode": "link",
        "links": [
            "b10e75fa7cae9971"
        ],
        "x": 1625,
        "y": 420,
        "wires": []
    },
    {
        "id": "733c72a371d4af52",
        "type": "switch",
        "z": "448540c6f18cdaa5",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1280,
        "y": 420,
        "wires": [
            [
                "ab21744b680b6e14"
            ]
        ]
    },
    {
        "id": "ab21744b680b6e14",
        "type": "change",
        "z": "448540c6f18cdaa5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no18",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1480,
        "y": 420,
        "wires": [
            [
                "0612f4260f75f3a4"
            ]
        ]
    },
    {
        "id": "47e1de2d96c7ae87",
        "type": "change",
        "z": "448540c6f18cdaa5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "smoke",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "smoke",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 420,
        "wires": [
            [
                "cf8f8554030ae352"
            ]
        ]
    },
    {
        "id": "e6f81aadf146dd72",
        "type": "inject",
        "z": "448540c6f18cdaa5",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 690,
        "y": 480,
        "wires": [
            [
                "47e1de2d96c7ae87"
            ]
        ]
    },
    {
        "id": "62bb3a74e517178a",
        "type": "link in",
        "z": "448540c6f18cdaa5",
        "name": "",
        "links": [
            "57c58bc075dfe551"
        ],
        "x": 1035,
        "y": 340,
        "wires": [
            [
                "cf8f8554030ae352"
            ]
        ]
    },
    {
        "id": "abba2fd8f4209cbe",
        "type": "comment",
        "z": "448540c6f18cdaa5",
        "name": "PARAMETER: S-SMOKE2",
        "info": "",
        "x": 210,
        "y": 180,
        "wires": []
    },
    {
        "id": "649f72fea69d8621",
        "type": "delay",
        "z": "448540c6f18cdaa5",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 420,
        "wires": [
            [
                "a3d42d146054aaeb"
            ]
        ]
    },
    {
        "id": "ad4ec959c2484741",
        "type": "inject",
        "z": "448540c6f18cdaa5",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 550,
        "y": 200,
        "wires": [
            [
                "57c58bc075dfe551"
            ]
        ]
    },
    {
        "id": "57c58bc075dfe551",
        "type": "link out",
        "z": "448540c6f18cdaa5",
        "name": "",
        "mode": "link",
        "links": [
            "62bb3a74e517178a"
        ],
        "x": 725,
        "y": 200,
        "wires": []
    },
    {
        "id": "cf8f8554030ae352",
        "type": "counter",
        "z": "448540c6f18cdaa5",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1130,
        "y": 420,
        "wires": [
            [
                "733c72a371d4af52"
            ]
        ]
    },
    {
        "id": "4aac2beb8e2a4c2f",
        "type": "modbus-response",
        "z": "448540c6f18cdaa5",
        "name": "",
        "registerShowMax": 20,
        "x": 730,
        "y": 560,
        "wires": []
    },
    {
        "id": "17b6fdf063fcd5ee",
        "type": "debug",
        "z": "448540c6f18cdaa5",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 520,
        "wires": []
    },
    {
        "id": "5b73f5c6534a7f51",
        "type": "comment",
        "z": "448540c6f18cdaa5",
        "name": "ID:4, ADDRESS:3",
        "info": "",
        "x": 250,
        "y": 260,
        "wires": []
    },
    {
        "id": "7a22f31c54019203",
        "type": "modbus-flex-getter",
        "z": "448540c6f18cdaa5",
        "name": "",
        "showStatusActivities": false,
        "showErrors": true,
        "logIOActivities": false,
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "x": 470,
        "y": 580,
        "wires": [
            [
                "4aac2beb8e2a4c2f",
                "17b6fdf063fcd5ee"
            ],
            []
        ]
    },
    {
        "id": "f003085a09f38e0f",
        "type": "inject",
        "z": "448540c6f18cdaa5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "4",
        "payloadType": "num",
        "x": 150,
        "y": 580,
        "wires": [
            [
                "3274f6f75b415945"
            ]
        ]
    },
    {
        "id": "3274f6f75b415945",
        "type": "function",
        "z": "448540c6f18cdaa5",
        "name": "hart",
        "func": "var id=msg.payload;\n\n    var msg1 = {payload:(msg.payload = {\n    'fc': 3, \n    'unitid': id, \n    'address': 3 , \n    'quantity': 1 \n    })};\n\n \n    \nreturn [msg1];\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 580,
        "wires": [
            [
                "7a22f31c54019203"
            ]
        ]
    },
    {
        "id": "e2ecd34859128bb5",
        "type": "modbus-response",
        "z": "448540c6f18cdaa5",
        "name": "",
        "registerShowMax": 20,
        "x": 430,
        "y": 360,
        "wires": []
    },
    {
        "id": "d1bee4e9ed8fc2c8",
        "type": "modbus-read",
        "z": "448540c6f18cdaa5",
        "name": "",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "unitid": "4",
        "dataType": "HoldingRegister",
        "adr": "3",
        "quantity": "1",
        "rate": "1",
        "rateUnit": "m",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "bfb847bf3311ba0d",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 90,
        "y": 360,
        "wires": [
            [
                "e2ecd34859128bb5",
                "9f9bb1b6f374fdaa"
            ],
            []
        ]
    },
    {
        "id": "9f9bb1b6f374fdaa",
        "type": "function",
        "z": "448540c6f18cdaa5",
        "name": "",
        "func": "msg.payload = Number(msg.payload[0]);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 420,
        "wires": [
            [
                "649f72fea69d8621"
            ]
        ]
    },
    {
        "id": "a3d42d146054aaeb",
        "type": "switch",
        "z": "448540c6f18cdaa5",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 420,
        "wires": [
            [
                "f574942ca0a6eb4d"
            ]
        ]
    },
    {
        "id": "f574942ca0a6eb4d",
        "type": "function",
        "z": "448540c6f18cdaa5",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 420,
        "wires": [
            [
                "47e1de2d96c7ae87"
            ]
        ]
    },
    {
        "id": "b10e75fa7cae9971",
        "type": "link in",
        "z": "8cb11014cf5190b7",
        "name": "S-SMOKE2",
        "links": [
            "1238347595b826fc",
            "0612f4260f75f3a4"
        ],
        "x": 165,
        "y": 200,
        "wires": [
            [
                "efeec63868bcef7b"
            ]
        ]
    },
    {
        "id": "0f091cf944484d7b",
        "type": "comment",
        "z": "8cb11014cf5190b7",
        "name": "S-SMOKE2",
        "info": "This will only give analog value.",
        "x": 220,
        "y": 140,
        "wires": []
    },
    {
        "id": "efeec63868bcef7b",
        "type": "function",
        "z": "8cb11014cf5190b7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 200,
        "wires": [
            [
                "bda5f09757251ccf"
            ]
        ]
    },
    {
        "id": "d4ab80cd0360f548",
        "type": "function",
        "z": "8cb11014cf5190b7",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 3; //machine/area id\nmsg.parameter16 = 16; //parameter id\nconst value = msg.smoke;\nmsg.type1 = 1;\nmsg.msg_no18=id+\"_\"+msg.parameter16+\"_\"+msg.dt_mc+\"_\"+msg.msg_no18+\"_\"+msg.type1;\n\nmsg.payload={\n\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter16,\n        \"value\":value,\n        \"msg_no\": msg.msg_no18,\n        \"type\":msg.type1\n    }\n    \n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 200,
        "wires": [
            [
                "1ed96245745d13db",
                "1590c956f1937613"
            ]
        ]
    },
    {
        "id": "1ed96245745d13db",
        "type": "function",
        "z": "8cb11014cf5190b7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_plantsmoke2_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/plantsmoke2/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 320,
        "wires": [
            [
                "9aa02694b278b2b5"
            ]
        ]
    },
    {
        "id": "7fb975bd46e77fb0",
        "type": "switch",
        "z": "8cb11014cf5190b7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 320,
        "wires": [
            [
                "d5c8c6e7017c4576"
            ],
            [
                "597d75ef32b56b2b"
            ]
        ]
    },
    {
        "id": "d5c8c6e7017c4576",
        "type": "change",
        "z": "8cb11014cf5190b7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 300,
        "wires": [
            [
                "ff29a06ec5498c8f"
            ]
        ]
    },
    {
        "id": "597d75ef32b56b2b",
        "type": "change",
        "z": "8cb11014cf5190b7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 340,
        "wires": [
            [
                "0eb88c4d52e7cc9b"
            ]
        ]
    },
    {
        "id": "ff29a06ec5498c8f",
        "type": "csv",
        "z": "8cb11014cf5190b7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1010,
        "y": 300,
        "wires": [
            [
                "566bd6dff076b8e6"
            ]
        ]
    },
    {
        "id": "0eb88c4d52e7cc9b",
        "type": "csv",
        "z": "8cb11014cf5190b7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1010,
        "y": 340,
        "wires": [
            [
                "566bd6dff076b8e6"
            ]
        ]
    },
    {
        "id": "566bd6dff076b8e6",
        "type": "file",
        "z": "8cb11014cf5190b7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1150,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "9aa02694b278b2b5",
        "type": "fs-file-lister",
        "z": "8cb11014cf5190b7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 500,
        "y": 320,
        "wires": [
            [
                "7fb975bd46e77fb0"
            ]
        ]
    },
    {
        "id": "6bb78b5defbebb03",
        "type": "comment",
        "z": "8cb11014cf5190b7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 380,
        "y": 280,
        "wires": []
    },
    {
        "id": "92f06a423b806321",
        "type": "link in",
        "z": "8cb11014cf5190b7",
        "name": "",
        "links": [
            "fa575a75299b53a7"
        ],
        "x": 1025,
        "y": 200,
        "wires": [
            [
                "57df78f39bda06dc",
                "187597022f0fb944"
            ]
        ]
    },
    {
        "id": "187597022f0fb944",
        "type": "mqtt out",
        "z": "8cb11014cf5190b7",
        "name": "",
        "topic": "hvacgmi/plant/s-smoke2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1570,
        "y": 200,
        "wires": []
    },
    {
        "id": "1590c956f1937613",
        "type": "link out",
        "z": "8cb11014cf5190b7",
        "name": "DATA-SMOKE2",
        "mode": "link",
        "links": [
            "d041b827e8fdaf7a"
        ],
        "x": 865,
        "y": 200,
        "wires": []
    },
    {
        "id": "57df78f39bda06dc",
        "type": "change",
        "z": "8cb11014cf5190b7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter16",
                "pt": "global",
                "to": "parameter16",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que1",
                "pt": "global",
                "to": "type1",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que18",
                "pt": "global",
                "to": "msg_no18",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "bda5f09757251ccf",
        "type": "function",
        "z": "8cb11014cf5190b7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 200,
        "wires": [
            [
                "d4ab80cd0360f548"
            ]
        ]
    },
    {
        "id": "62b4fc984a3dce16",
        "type": "file in",
        "z": "7ff09422b123e39e",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 620,
        "y": 460,
        "wires": [
            [
                "3431d50744b988ab"
            ]
        ]
    },
    {
        "id": "3431d50744b988ab",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 810,
        "y": 460,
        "wires": [
            [
                "42bcb8e0492534b9",
                "9e2982d04cda54e2"
            ]
        ]
    },
    {
        "id": "ec6ca5cde60bd970",
        "type": "function",
        "z": "7ff09422b123e39e",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1240,
        "y": 500,
        "wires": [
            [
                "382306d8509b0b0b"
            ]
        ]
    },
    {
        "id": "5d1993086e5ba6ff",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1710,
        "y": 640,
        "wires": [
            [
                "dde47de4bb2482c5"
            ]
        ]
    },
    {
        "id": "dde47de4bb2482c5",
        "type": "file",
        "z": "7ff09422b123e39e",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1950,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "7c0444430d216459",
        "type": "inject",
        "z": "7ff09422b123e39e",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 460,
        "y": 460,
        "wires": [
            [
                "62b4fc984a3dce16"
            ]
        ]
    },
    {
        "id": "a52881c16b4eb9ae",
        "type": "file",
        "z": "7ff09422b123e39e",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 770,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "9e2982d04cda54e2",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 460,
        "wires": [
            [
                "8b78dd883a9e79b5",
                "ec6ca5cde60bd970",
                "fc5d1f7e19c77a99"
            ],
            [
                "14b0531e4b87fbb6"
            ]
        ]
    },
    {
        "id": "bb5fafa2bdb16291",
        "type": "inject",
        "z": "7ff09422b123e39e",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 490,
        "y": 1040,
        "wires": [
            [
                "a52881c16b4eb9ae"
            ]
        ]
    },
    {
        "id": "95950a2043bfdac8",
        "type": "file in",
        "z": "7ff09422b123e39e",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 640,
        "y": 920,
        "wires": [
            [
                "c382ab800e8e5c33"
            ]
        ]
    },
    {
        "id": "c382ab800e8e5c33",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 840,
        "y": 920,
        "wires": [
            [
                "d8ce4670039d4717"
            ]
        ]
    },
    {
        "id": "dc3069906096537d",
        "type": "inject",
        "z": "7ff09422b123e39e",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 480,
        "y": 920,
        "wires": [
            [
                "95950a2043bfdac8"
            ]
        ]
    },
    {
        "id": "4a8c3b85b87abee3",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "DELETE FILE",
        "info": "",
        "x": 470,
        "y": 1000,
        "wires": []
    },
    {
        "id": "f4f7e023ec142c9f",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 820,
        "y": 420,
        "wires": []
    },
    {
        "id": "e402e0de294cf512",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 530,
        "y": 880,
        "wires": []
    },
    {
        "id": "f027acfd4166c11e",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 700,
        "y": 240,
        "wires": []
    },
    {
        "id": "7cffb9b1f8735b62",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1830,
        "y": 500,
        "wires": []
    },
    {
        "id": "42bcb8e0492534b9",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 500,
        "wires": []
    },
    {
        "id": "8b78dd883a9e79b5",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 380,
        "wires": []
    },
    {
        "id": "14b0531e4b87fbb6",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 540,
        "wires": []
    },
    {
        "id": "032f4bfcad220951",
        "type": "link in",
        "z": "7ff09422b123e39e",
        "name": "receive server respond STEMP4",
        "links": [
            "60b32f5c74466952",
            "e52e25df0929ef57"
        ],
        "x": 515,
        "y": 660,
        "wires": [
            [
                "286c82c5e81b8576",
                "10db1665250faadb"
            ]
        ]
    },
    {
        "id": "3c22521145d5a519",
        "type": "json",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1630,
        "y": 520,
        "wires": [
            [
                "5619c96cbfd1e45c",
                "061c278c4756aadc"
            ]
        ]
    },
    {
        "id": "5619c96cbfd1e45c",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1760,
        "y": 460,
        "wires": [
            [
                "7cffb9b1f8735b62",
                "fa575a75299b53a7"
            ]
        ]
    },
    {
        "id": "061c278c4756aadc",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1810,
        "y": 540,
        "wires": []
    },
    {
        "id": "382306d8509b0b0b",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "send data",
        "func": "msg.type1= msg.payload.col6;\nmsg.parameter16= msg.payload.col3;\nmsg.msg_no18= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1580,
        "y": 460,
        "wires": [
            [
                "5619c96cbfd1e45c"
            ]
        ]
    },
    {
        "id": "286c82c5e81b8576",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 670,
        "y": 660,
        "wires": [
            [
                "143f4a4449af6b37",
                "8d738b1c97eb5eba"
            ],
            [
                "8d738b1c97eb5eba"
            ],
            []
        ]
    },
    {
        "id": "143f4a4449af6b37",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 633,
        "wires": []
    },
    {
        "id": "7d9adc763ea1c967",
        "type": "inject",
        "z": "7ff09422b123e39e",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 580,
        "y": 720,
        "wires": [
            [
                "286c82c5e81b8576"
            ]
        ]
    },
    {
        "id": "8d738b1c97eb5eba",
        "type": "file in",
        "z": "7ff09422b123e39e",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 900,
        "y": 680,
        "wires": [
            [
                "ecb7397a8a349c60"
            ]
        ]
    },
    {
        "id": "ecb7397a8a349c60",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1090,
        "y": 680,
        "wires": [
            [
                "6ad58f5bdb99a4e7"
            ]
        ]
    },
    {
        "id": "6ad58f5bdb99a4e7",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1320,
        "y": 680,
        "wires": [
            [
                "1f33125f0d7063a5"
            ]
        ]
    },
    {
        "id": "1f33125f0d7063a5",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1550,
        "y": 680,
        "wires": [
            [
                "5d1993086e5ba6ff"
            ],
            [
                "e790b3746f4671c3"
            ]
        ]
    },
    {
        "id": "e790b3746f4671c3",
        "type": "file",
        "z": "7ff09422b123e39e",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_PLANTSMOKE2.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1810,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "851a6ecc25bf32de",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 530,
        "y": 420,
        "wires": []
    },
    {
        "id": "4d4421365947aa2f",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 650,
        "y": 593,
        "wires": []
    },
    {
        "id": "366de8b02ca641f5",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 640,
        "y": 840,
        "wires": []
    },
    {
        "id": "d471d8bf6e569b2c",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1830,
        "y": 420,
        "wires": []
    },
    {
        "id": "4233f80fe9d61c6e",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 680,
        "y": 760,
        "wires": []
    },
    {
        "id": "d041b827e8fdaf7a",
        "type": "link in",
        "z": "7ff09422b123e39e",
        "name": "INQUEUE-SMOKE2",
        "links": [
            "1590c956f1937613"
        ],
        "x": 595,
        "y": 280,
        "wires": [
            [
                "26715fe21414f7b3"
            ]
        ]
    },
    {
        "id": "26715fe21414f7b3",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_PLANTSMOKE2.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 280,
        "wires": [
            [
                "6bc36f22cf8e21bf",
                "40460ef031f9be99"
            ]
        ]
    },
    {
        "id": "fa575a75299b53a7",
        "type": "link out",
        "z": "7ff09422b123e39e",
        "name": "request to server resp STEMP4",
        "links": [
            "92f06a423b806321"
        ],
        "x": 2015,
        "y": 460,
        "wires": []
    },
    {
        "id": "af3437280a0f088a",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "16",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1410,
        "y": 460,
        "wires": [
            [
                "382306d8509b0b0b"
            ]
        ]
    },
    {
        "id": "6bc36f22cf8e21bf",
        "type": "debug",
        "z": "7ff09422b123e39e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 240,
        "wires": []
    },
    {
        "id": "fc5d1f7e19c77a99",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 460,
        "wires": [
            [
                "af3437280a0f088a"
            ]
        ]
    },
    {
        "id": "4b6defbef9ac914f",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 670,
        "y": 560,
        "wires": []
    },
    {
        "id": "da92852d4f318e46",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 670,
        "y": 200,
        "wires": []
    },
    {
        "id": "d8ce4670039d4717",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1020,
        "y": 920,
        "wires": [
            [
                "286c82c5e81b8576"
            ]
        ]
    },
    {
        "id": "76ba1fdd1a982380",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "PLANT-SMOKE2",
        "info": "",
        "x": 460,
        "y": 160,
        "wires": []
    },
    {
        "id": "19eb205f1af89cd0",
        "type": "function",
        "z": "7ff09422b123e39e",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_PLANTSMOKE2_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 820,
        "wires": [
            [
                "581afe224a801c0a"
            ]
        ]
    },
    {
        "id": "f1821c91555ef265",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1580,
        "y": 820,
        "wires": [
            [
                "d73b9b23b0b8a5db"
            ],
            [
                "b015a7ddf6df15b4"
            ]
        ]
    },
    {
        "id": "d73b9b23b0b8a5db",
        "type": "change",
        "z": "7ff09422b123e39e",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1770,
        "y": 800,
        "wires": [
            [
                "88686b99d0cf244e"
            ]
        ]
    },
    {
        "id": "b015a7ddf6df15b4",
        "type": "change",
        "z": "7ff09422b123e39e",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1770,
        "y": 840,
        "wires": [
            [
                "5d7856f15b077e03"
            ]
        ]
    },
    {
        "id": "891eb47f7dd8dee9",
        "type": "file",
        "z": "7ff09422b123e39e",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2060,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "581afe224a801c0a",
        "type": "fs-file-lister",
        "z": "7ff09422b123e39e",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1410,
        "y": 820,
        "wires": [
            [
                "f1821c91555ef265"
            ]
        ]
    },
    {
        "id": "4abafabe3744b816",
        "type": "comment",
        "z": "7ff09422b123e39e",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1320,
        "y": 780,
        "wires": []
    },
    {
        "id": "5d7856f15b077e03",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1940,
        "y": 840,
        "wires": [
            [
                "891eb47f7dd8dee9"
            ]
        ]
    },
    {
        "id": "88686b99d0cf244e",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1940,
        "y": 800,
        "wires": [
            [
                "891eb47f7dd8dee9"
            ]
        ]
    },
    {
        "id": "10db1665250faadb",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter16",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1050,
        "y": 820,
        "wires": [
            [
                "19eb205f1af89cd0"
            ]
        ]
    },
    {
        "id": "8829d303b8422373",
        "type": "change",
        "z": "7ff09422b123e39e",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 160,
        "wires": [
            [
                "8047dd0a8f9b69ca"
            ]
        ]
    },
    {
        "id": "e6c69812bee86a20",
        "type": "change",
        "z": "7ff09422b123e39e",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 200,
        "wires": [
            [
                "6b01bebb4ab0f517"
            ]
        ]
    },
    {
        "id": "8047dd0a8f9b69ca",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1530,
        "y": 160,
        "wires": [
            [
                "dc31897807c37936"
            ]
        ]
    },
    {
        "id": "6b01bebb4ab0f517",
        "type": "csv",
        "z": "7ff09422b123e39e",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1530,
        "y": 200,
        "wires": [
            [
                "dc31897807c37936"
            ]
        ]
    },
    {
        "id": "dc31897807c37936",
        "type": "file",
        "z": "7ff09422b123e39e",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1670,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ab92838002b5ed0a",
        "type": "switch",
        "z": "7ff09422b123e39e",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1190,
        "y": 180,
        "wires": [
            [
                "8829d303b8422373"
            ],
            [
                "e6c69812bee86a20"
            ]
        ]
    },
    {
        "id": "40460ef031f9be99",
        "type": "fs-file-lister",
        "z": "7ff09422b123e39e",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1020,
        "y": 180,
        "wires": [
            [
                "ab92838002b5ed0a"
            ]
        ]
    },
    {
        "id": "ad7468acf4a0622e",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "COOLING TOWER",
        "info": "",
        "x": 350,
        "y": 120,
        "wires": []
    },
    {
        "id": "1b45899ce8c0ab34",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp1",
        "links": [
            "183885ecbb36dc02",
            "8c77a8f48bdc34b5"
        ],
        "x": 1865,
        "y": 340,
        "wires": []
    },
    {
        "id": "55c391600481e245",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp2",
        "links": [
            "3d8a21493f2ac0d3",
            "493b0a8828f2660d"
        ],
        "x": 1865,
        "y": 500,
        "wires": []
    },
    {
        "id": "c6aa1762b93ab2fa",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "PARAMETER: TEMPERATURE",
        "info": "",
        "x": 390,
        "y": 280,
        "wires": []
    },
    {
        "id": "7a455bfa246179d3",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1390,
        "y": 340,
        "wires": [
            [
                "c0f81c9d9a3f9648"
            ]
        ]
    },
    {
        "id": "c0f81c9d9a3f9648",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1560,
        "y": 340,
        "wires": [
            [
                "4b2514be44624a2d"
            ]
        ]
    },
    {
        "id": "4b2514be44624a2d",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no12",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1740,
        "y": 340,
        "wires": [
            [
                "1b45899ce8c0ab34",
                "a4f053bca07f021f"
            ]
        ]
    },
    {
        "id": "972747c40a48a50a",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1295,
        "y": 300,
        "wires": [
            [
                "7a455bfa246179d3"
            ]
        ]
    },
    {
        "id": "c18c576787106abc",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1100,
        "y": 100,
        "wires": [
            [
                "6ea50b7767add655"
            ]
        ]
    },
    {
        "id": "6ea50b7767add655",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "972747c40a48a50a",
            "64eff1789a4e422f",
            "7da3ef12c29b83d4",
            "e25338046b8d50cb",
            "21fdb59871bd196d",
            "e9f482abb629db38",
            "179ea84885a93244",
            "3b104c7ed9737371",
            "1ff3081dc81553c5",
            "26356c3f5cb85b70",
            "747d9c2cbe37235e",
            "2bae841ad339f0bd"
        ],
        "x": 1275,
        "y": 100,
        "wires": []
    },
    {
        "id": "43a359da8d034829",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1370,
        "y": 500,
        "wires": [
            [
                "bef186eaa2611ad2"
            ]
        ]
    },
    {
        "id": "bef186eaa2611ad2",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1520,
        "y": 500,
        "wires": [
            [
                "e6c03ce2a3050585"
            ]
        ]
    },
    {
        "id": "e6c03ce2a3050585",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no13",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1720,
        "y": 500,
        "wires": [
            [
                "55c391600481e245",
                "72cced3b22033d38"
            ]
        ]
    },
    {
        "id": "64eff1789a4e422f",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1285,
        "y": 420,
        "wires": [
            [
                "43a359da8d034829"
            ]
        ]
    },
    {
        "id": "4f4caa7c5bdc4961",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T14-TEMP6",
        "diff": false,
        "name": "",
        "x": 330,
        "y": 340,
        "wires": [
            [
                "d31ae9457d5f5aae"
            ]
        ]
    },
    {
        "id": "58d09a24a9df4839",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T15-TEMP5",
        "diff": false,
        "name": "",
        "x": 290,
        "y": 500,
        "wires": [
            [
                "de2c82e82e4e6b60"
            ]
        ]
    },
    {
        "id": "45b183be2c8cf873",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp3",
        "links": [
            "0eccea2f397c6c32",
            "f127977b73def872"
        ],
        "x": 2085,
        "y": 620,
        "wires": []
    },
    {
        "id": "efd2ba0c2e94a92f",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp4",
        "links": [
            "3bd2afb8dcebeb3a",
            "859d1c0bcc7542d2"
        ],
        "x": 1875,
        "y": 780,
        "wires": []
    },
    {
        "id": "52309ed4f26e2166",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1550,
        "y": 620,
        "wires": [
            [
                "96959aadf92a6a93"
            ]
        ]
    },
    {
        "id": "96959aadf92a6a93",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1720,
        "y": 620,
        "wires": [
            [
                "4e3be733f045f5bb"
            ]
        ]
    },
    {
        "id": "4e3be733f045f5bb",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no14",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1910,
        "y": 620,
        "wires": [
            [
                "45b183be2c8cf873",
                "cb73edac4e6dedea"
            ]
        ]
    },
    {
        "id": "e25338046b8d50cb",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1425,
        "y": 580,
        "wires": [
            [
                "52309ed4f26e2166"
            ]
        ]
    },
    {
        "id": "19f647584fcce652",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1380,
        "y": 780,
        "wires": [
            [
                "2cf9570cde678568"
            ]
        ]
    },
    {
        "id": "2cf9570cde678568",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1530,
        "y": 780,
        "wires": [
            [
                "2b7debd55314aa3f"
            ]
        ]
    },
    {
        "id": "2b7debd55314aa3f",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no15",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 780,
        "wires": [
            [
                "efd2ba0c2e94a92f",
                "f5751d17430e8184"
            ]
        ]
    },
    {
        "id": "21fdb59871bd196d",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1295,
        "y": 700,
        "wires": [
            [
                "19f647584fcce652"
            ]
        ]
    },
    {
        "id": "1297d80fddc1b328",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T16-TEMP4",
        "diff": false,
        "name": "",
        "x": 310,
        "y": 620,
        "wires": [
            [
                "621f91e670a49062"
            ]
        ]
    },
    {
        "id": "6b4e93d9a96e6ebc",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T17-TEMP3",
        "diff": false,
        "name": "",
        "x": 340,
        "y": 780,
        "wires": [
            [
                "bf9d9c0749e5fd02"
            ]
        ]
    },
    {
        "id": "abf931947b0449e6",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp5",
        "links": [
            "0627d0498b1a26a8",
            "c1b536f72f7e1ad1"
        ],
        "x": 1875,
        "y": 920,
        "wires": []
    },
    {
        "id": "91f040053275022e",
        "type": "link out",
        "z": "89d7652b77b92b2b",
        "name": "temp6",
        "links": [
            "dfa797b5b3c8996f",
            "8c52b82b846454a3"
        ],
        "x": 1875,
        "y": 1080,
        "wires": []
    },
    {
        "id": "7f89cc6d0d31c95c",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1400,
        "y": 920,
        "wires": [
            [
                "72f9a985e9c19bb9"
            ]
        ]
    },
    {
        "id": "72f9a985e9c19bb9",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1570,
        "y": 920,
        "wires": [
            [
                "79971461faa31e9c"
            ]
        ]
    },
    {
        "id": "79971461faa31e9c",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no16",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1750,
        "y": 920,
        "wires": [
            [
                "abf931947b0449e6",
                "b2451eb74ece0716"
            ]
        ]
    },
    {
        "id": "e9f482abb629db38",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1275,
        "y": 880,
        "wires": [
            [
                "7f89cc6d0d31c95c"
            ]
        ]
    },
    {
        "id": "1f0b86b293dd5b80",
        "type": "counter",
        "z": "89d7652b77b92b2b",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1380,
        "y": 1080,
        "wires": [
            [
                "2bdceabefadda5fc"
            ]
        ]
    },
    {
        "id": "2bdceabefadda5fc",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1530,
        "y": 1080,
        "wires": [
            [
                "429b6af6a628aec3"
            ]
        ]
    },
    {
        "id": "429b6af6a628aec3",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no17",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 1080,
        "wires": [
            [
                "91f040053275022e"
            ]
        ]
    },
    {
        "id": "179ea84885a93244",
        "type": "link in",
        "z": "89d7652b77b92b2b",
        "name": "",
        "links": [
            "6ea50b7767add655"
        ],
        "x": 1295,
        "y": 1000,
        "wires": [
            [
                "1f0b86b293dd5b80"
            ]
        ]
    },
    {
        "id": "0c9ea3c9f3e50e4d",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T18-TEMP2",
        "diff": false,
        "name": "",
        "x": 310,
        "y": 920,
        "wires": [
            [
                "2872b31e9eb4f539"
            ]
        ]
    },
    {
        "id": "75301e3030f8ff38",
        "type": "s7 in",
        "z": "89d7652b77b92b2b",
        "endpoint": "3a120e71bc3f848e",
        "mode": "single",
        "variable": "T19-TEMP1",
        "diff": false,
        "name": "",
        "x": 310,
        "y": 1080,
        "wires": [
            [
                "193e4e0108c43f0d"
            ]
        ]
    },
    {
        "id": "bcf6b321d8e57bdb",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 340,
        "wires": [
            [
                "7a455bfa246179d3"
            ]
        ]
    },
    {
        "id": "f6daf6383f78e266",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 500,
        "wires": [
            [
                "43a359da8d034829"
            ]
        ]
    },
    {
        "id": "cfaa38ef0a457d51",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 620,
        "wires": [
            [
                "52309ed4f26e2166"
            ]
        ]
    },
    {
        "id": "c9b16e45bc64c472",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1210,
        "y": 780,
        "wires": [
            [
                "19f647584fcce652"
            ]
        ]
    },
    {
        "id": "786005892b75949c",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 920,
        "wires": [
            [
                "7f89cc6d0d31c95c"
            ]
        ]
    },
    {
        "id": "70b2dd61d8cbd62a",
        "type": "change",
        "z": "89d7652b77b92b2b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1190,
        "y": 1080,
        "wires": [
            [
                "1f0b86b293dd5b80"
            ]
        ]
    },
    {
        "id": "804d617a591d2853",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "29.8",
        "payloadType": "num",
        "x": 630,
        "y": 400,
        "wires": [
            [
                "48583c3ddc4835a3"
            ]
        ]
    },
    {
        "id": "2057eb0390f5d1e1",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "445",
        "payloadType": "num",
        "x": 630,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "2384107da3a0a447",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "23.9",
        "payloadType": "num",
        "x": 890,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "b5eba6b604c3fb9c",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "245",
        "payloadType": "num",
        "x": 630,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "b7580216fbc60287",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "28.9",
        "payloadType": "num",
        "x": 630,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "7a3676bdb040a530",
        "type": "inject",
        "z": "89d7652b77b92b2b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "098",
        "payloadType": "num",
        "x": 650,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "a4f053bca07f021f",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1820,
        "y": 400,
        "wires": []
    },
    {
        "id": "72cced3b22033d38",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 560,
        "wires": []
    },
    {
        "id": "cb73edac4e6dedea",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2030,
        "y": 680,
        "wires": []
    },
    {
        "id": "f5751d17430e8184",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1880,
        "y": 860,
        "wires": []
    },
    {
        "id": "b2451eb74ece0716",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1860,
        "y": 980,
        "wires": []
    },
    {
        "id": "bc691cf5b4d9448b",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 660,
        "y": 1080,
        "wires": [
            [
                "d7d85b43fdce41c4"
            ]
        ]
    },
    {
        "id": "ca8f5ecf7a5a228a",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 920,
        "wires": [
            [
                "75fc04ef1e69fd0e"
            ]
        ]
    },
    {
        "id": "39797e6a233f874a",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 700,
        "y": 780,
        "wires": [
            [
                "6c38dec12aebc61b"
            ]
        ]
    },
    {
        "id": "1a7a08b3357e7bab",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 850,
        "y": 620,
        "wires": [
            [
                "0187a47d8c63ad81"
            ]
        ]
    },
    {
        "id": "0cbef62ffd74590b",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 680,
        "y": 500,
        "wires": [
            [
                "1141ab1ece55a84c"
            ]
        ]
    },
    {
        "id": "a5605fb2a52a2215",
        "type": "delay",
        "z": "89d7652b77b92b2b",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 700,
        "y": 340,
        "wires": [
            [
                "48583c3ddc4835a3"
            ]
        ]
    },
    {
        "id": "d31ae9457d5f5aae",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 340,
        "wires": [
            [
                "a5605fb2a52a2215",
                "1ae6761e27b3594f"
            ]
        ]
    },
    {
        "id": "de2c82e82e4e6b60",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 500,
        "wires": [
            [
                "0cbef62ffd74590b",
                "d7d990b9ba67ab4b"
            ]
        ]
    },
    {
        "id": "47273a6b86d35170",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 620,
        "wires": [
            [
                "1a7a08b3357e7bab",
                "067ab54dbb07f5ab"
            ]
        ]
    },
    {
        "id": "bf9d9c0749e5fd02",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 780,
        "wires": [
            [
                "39797e6a233f874a"
            ]
        ]
    },
    {
        "id": "2872b31e9eb4f539",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 920,
        "wires": [
            [
                "ca8f5ecf7a5a228a"
            ]
        ]
    },
    {
        "id": "193e4e0108c43f0d",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1080,
        "wires": [
            [
                "bc691cf5b4d9448b"
            ]
        ]
    },
    {
        "id": "1ae6761e27b3594f",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 400,
        "wires": []
    },
    {
        "id": "d7d990b9ba67ab4b",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 540,
        "wires": []
    },
    {
        "id": "067ab54dbb07f5ab",
        "type": "debug",
        "z": "89d7652b77b92b2b",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 680,
        "wires": []
    },
    {
        "id": "48583c3ddc4835a3",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 340,
        "wires": [
            [
                "17e9f777595ea113"
            ]
        ]
    },
    {
        "id": "1141ab1ece55a84c",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 500,
        "wires": [
            [
                "852360d126d20f15"
            ]
        ]
    },
    {
        "id": "6c38dec12aebc61b",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 870,
        "y": 780,
        "wires": [
            [
                "5eb8595cdfe8b5f7"
            ]
        ]
    },
    {
        "id": "75fc04ef1e69fd0e",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 920,
        "wires": [
            [
                "040e59056019b0ef"
            ]
        ]
    },
    {
        "id": "d7d85b43fdce41c4",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 830,
        "y": 1080,
        "wires": [
            [
                "f63e8170e3604379"
            ]
        ]
    },
    {
        "id": "621f91e670a49062",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "function 1",
        "func": "msg.payload = msg.payload - 63860\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 620,
        "wires": [
            [
                "47273a6b86d35170"
            ]
        ]
    },
    {
        "id": "d744a866b030cb99",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T14-CT1 OUT",
        "info": "",
        "x": 170,
        "y": 340,
        "wires": []
    },
    {
        "id": "79c1676c7dbf2d67",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T15-CT1 IN",
        "info": "",
        "x": 130,
        "y": 500,
        "wires": []
    },
    {
        "id": "50fa32951056fa31",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T16-CT2 OUT",
        "info": "",
        "x": 150,
        "y": 620,
        "wires": []
    },
    {
        "id": "4155688e25c820c1",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T17-CT2 IN",
        "info": "",
        "x": 190,
        "y": 780,
        "wires": []
    },
    {
        "id": "88e9c58cb58189e4",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T18-CT3 OUT",
        "info": "",
        "x": 150,
        "y": 920,
        "wires": []
    },
    {
        "id": "f802fff147d70b90",
        "type": "comment",
        "z": "89d7652b77b92b2b",
        "name": "T19-CT3 IN",
        "info": "",
        "x": 150,
        "y": 1080,
        "wires": []
    },
    {
        "id": "17e9f777595ea113",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 340,
        "wires": [
            [
                "bcf6b321d8e57bdb"
            ]
        ]
    },
    {
        "id": "852360d126d20f15",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 500,
        "wires": [
            [
                "f6daf6383f78e266"
            ]
        ]
    },
    {
        "id": "3d3a194e5fedb273",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 620,
        "wires": [
            [
                "cfaa38ef0a457d51"
            ]
        ]
    },
    {
        "id": "5eb8595cdfe8b5f7",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 780,
        "wires": [
            [
                "c9b16e45bc64c472"
            ]
        ]
    },
    {
        "id": "040e59056019b0ef",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 920,
        "wires": [
            [
                "786005892b75949c"
            ]
        ]
    },
    {
        "id": "f63e8170e3604379",
        "type": "function",
        "z": "89d7652b77b92b2b",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 1080,
        "wires": [
            [
                "70b2dd61d8cbd62a"
            ]
        ]
    },
    {
        "id": "0187a47d8c63ad81",
        "type": "switch",
        "z": "89d7652b77b92b2b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 620,
        "wires": [
            [
                "3d3a194e5fedb273"
            ]
        ]
    },
    {
        "id": "23ccd764eef7a63c",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 300,
        "wires": []
    },
    {
        "id": "8c77a8f48bdc34b5",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP1",
        "links": [
            "1b45899ce8c0ab34"
        ],
        "x": 135,
        "y": 240,
        "wires": [
            [
                "04da24c37e107a40"
            ]
        ]
    },
    {
        "id": "0a1a2e77deb9503b",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP1",
        "info": "This will only give analog value.",
        "x": 170,
        "y": 180,
        "wires": []
    },
    {
        "id": "04da24c37e107a40",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 240,
        "wires": [
            [
                "34ea1261a053c57f",
                "e6a98c2398aa968d"
            ]
        ]
    },
    {
        "id": "1b7ab1f9c4d084e8",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "COOLING TOWER",
        "info": "",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "7d6c1b07798e1875",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 1;\nmsg.parameter1 = 1;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no12=id+\"_\"+msg.parameter1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no12+\"_\"+msg.type2;\n\nmsg.payload = {\n\n        \"data\": {\n            \"date_time\":msg.dt_mc,\n            \"unique_id\":id,\n            \"parameter\":msg.parameter1,\n            \"value\":value,\n            \"msg_no\": msg.msg_no12,\n            \"type\":msg.type2\n        },\n}\n\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 240,
        "wires": [
            [
                "23ccd764eef7a63c",
                "0b1d2f2b54db3d22",
                "9ae3ce28eca07611"
            ]
        ]
    },
    {
        "id": "0b1d2f2b54db3d22",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp1_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/cttemp1/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 240,
        "wires": [
            [
                "aefaeebdd0b0e953"
            ]
        ]
    },
    {
        "id": "9e38c9abd81b9377",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 240,
        "wires": [
            [
                "53b9c52606259281"
            ],
            [
                "df2a430ef68dbca3"
            ]
        ]
    },
    {
        "id": "53b9c52606259281",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 220,
        "wires": [
            [
                "6ad25ea3abfb6f55"
            ]
        ]
    },
    {
        "id": "df2a430ef68dbca3",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 260,
        "wires": [
            [
                "d003c60184314955"
            ]
        ]
    },
    {
        "id": "6ad25ea3abfb6f55",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 220,
        "wires": [
            [
                "1933a061b33f14e8"
            ]
        ]
    },
    {
        "id": "d003c60184314955",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 260,
        "wires": [
            [
                "1933a061b33f14e8"
            ]
        ]
    },
    {
        "id": "aefaeebdd0b0e953",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1220,
        "y": 240,
        "wires": [
            [
                "9e38c9abd81b9377"
            ]
        ]
    },
    {
        "id": "901c8ee8bb0c2754",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1100,
        "y": 200,
        "wires": []
    },
    {
        "id": "dd51cc3e525f6ebb",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T5",
        "links": [
            "77e9e2c1ca0304e8"
        ],
        "x": 835,
        "y": 2200,
        "wires": []
    },
    {
        "id": "75b1464570e9fae4",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 780,
        "wires": []
    },
    {
        "id": "493b0a8828f2660d",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP2",
        "links": [
            "55c391600481e245"
        ],
        "x": 135,
        "y": 720,
        "wires": [
            [
                "b8b1d508280e4cac"
            ]
        ]
    },
    {
        "id": "c32581fb5178e9f9",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP2",
        "info": "This will only give analog value.",
        "x": 170,
        "y": 660,
        "wires": []
    },
    {
        "id": "b8b1d508280e4cac",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 260,
        "y": 720,
        "wires": [
            [
                "e030ccdd49ea88c5"
            ]
        ]
    },
    {
        "id": "0fefdbe51a374d81",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 1;\nmsg.parameter2 = 2;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no13=id+\"_\"+msg.parameter2+\"_\"+msg.dt_mc+\"_\"+msg.msg_no13+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter2,\n        \"value\":value,\n        \"msg_no\": msg.msg_no13,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 720,
        "wires": [
            [
                "75b1464570e9fae4",
                "d4eed9c10165368b",
                "78306022ec84a9db"
            ]
        ]
    },
    {
        "id": "d4eed9c10165368b",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp2_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/cttemp2/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 720,
        "wires": [
            [
                "f2c39431739a0ca9"
            ]
        ]
    },
    {
        "id": "080267378855f1a7",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 720,
        "wires": [
            [
                "8aee07685073f2dd"
            ],
            [
                "2783ab7b5f618e30"
            ]
        ]
    },
    {
        "id": "8aee07685073f2dd",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 700,
        "wires": [
            [
                "d0350b9e3f38ca89"
            ]
        ]
    },
    {
        "id": "2783ab7b5f618e30",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 740,
        "wires": [
            [
                "b9d144f14b250453"
            ]
        ]
    },
    {
        "id": "d0350b9e3f38ca89",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 700,
        "wires": [
            [
                "1c5622d5e0fdf801"
            ]
        ]
    },
    {
        "id": "b9d144f14b250453",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 740,
        "wires": [
            [
                "1c5622d5e0fdf801"
            ]
        ]
    },
    {
        "id": "1c5622d5e0fdf801",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1870,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "f2c39431739a0ca9",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1220,
        "y": 720,
        "wires": [
            [
                "080267378855f1a7"
            ]
        ]
    },
    {
        "id": "fedcf443c8cf724d",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1100,
        "y": 680,
        "wires": []
    },
    {
        "id": "96c70869e82fa138",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 1320,
        "wires": []
    },
    {
        "id": "f127977b73def872",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP3",
        "links": [
            "45b183be2c8cf873"
        ],
        "x": 135,
        "y": 1260,
        "wires": [
            [
                "ad9d1081b2f60677"
            ]
        ]
    },
    {
        "id": "ac37b18ffab6af41",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP3",
        "info": "This will only give analog value.",
        "x": 170,
        "y": 1200,
        "wires": []
    },
    {
        "id": "ad9d1081b2f60677",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 260,
        "y": 1260,
        "wires": [
            [
                "6d7b4ac739142a77"
            ]
        ]
    },
    {
        "id": "c5ed3d192fbed7d5",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x = msg.payload;\nconst id = 1;\nmsg.parameter3 = 3;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no14 = id+\"_\"+msg.parameter3+\"_\"+ msg.dt_mc+\"_\"+msg.msg_no14+\"_\"+msg.type2;\n\nmsg.payload = {\n    \"data\": {\n        \"date_time\": msg.dt_mc,\n        \"unique_id\": id,\n        \"parameter\": msg.parameter3,\n        \"value\": value,\n        \"msg_no\": msg.msg_no14,\n        \"type\": msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 1260,
        "wires": [
            [
                "96c70869e82fa138",
                "e746946f42d2cf0c",
                "dc60abea29ee5fda"
            ]
        ]
    },
    {
        "id": "e746946f42d2cf0c",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp3_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/cttemp3/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 1260,
        "wires": [
            [
                "4acf28c0c68f284c"
            ]
        ]
    },
    {
        "id": "8b1d54047adceb65",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1390,
        "y": 1260,
        "wires": [
            [
                "1d7ca070a7fa5701"
            ],
            [
                "494d396622d92fee"
            ]
        ]
    },
    {
        "id": "1d7ca070a7fa5701",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 1240,
        "wires": [
            [
                "8cd33332cc9696ca"
            ]
        ]
    },
    {
        "id": "494d396622d92fee",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1580,
        "y": 1280,
        "wires": [
            [
                "57eb577d2b3bd9b9"
            ]
        ]
    },
    {
        "id": "8cd33332cc9696ca",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 1240,
        "wires": [
            [
                "9032d99a274d6ef0"
            ]
        ]
    },
    {
        "id": "57eb577d2b3bd9b9",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1730,
        "y": 1280,
        "wires": [
            [
                "9032d99a274d6ef0"
            ]
        ]
    },
    {
        "id": "9032d99a274d6ef0",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1870,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "4acf28c0c68f284c",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1220,
        "y": 1260,
        "wires": [
            [
                "8b1d54047adceb65"
            ]
        ]
    },
    {
        "id": "509c9c87d4a0611b",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1100,
        "y": 1220,
        "wires": []
    },
    {
        "id": "474d7d1a38183630",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 1800,
        "wires": []
    },
    {
        "id": "859d1c0bcc7542d2",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP4",
        "links": [
            "efd2ba0c2e94a92f"
        ],
        "x": 175,
        "y": 1740,
        "wires": [
            [
                "e73fb81dd6c478c4"
            ]
        ]
    },
    {
        "id": "4dc33f2a6ebc415c",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP4",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 1680,
        "wires": []
    },
    {
        "id": "e73fb81dd6c478c4",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 1740,
        "wires": [
            [
                "369026bd825e6087"
            ]
        ]
    },
    {
        "id": "7c87b6f80dd1af24",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 1;\nmsg.parameter4 = 4;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no15=id+\"_\"+msg.parameter4+\"_\"+msg.dt_mc+\"_\"+msg.msg_no15+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter4,\n        \"value\":value,\n        \"msg_no\": msg.msg_no15,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1740,
        "wires": [
            [
                "474d7d1a38183630",
                "35fb527a97f7ac10",
                "288f11fb2577c8b4"
            ]
        ]
    },
    {
        "id": "35fb527a97f7ac10",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp4_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/cttemp4/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 1740,
        "wires": [
            [
                "7e79916d4622c72a"
            ]
        ]
    },
    {
        "id": "5499ca60080d8d31",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 1740,
        "wires": [
            [
                "23f3cbf5185122a5"
            ],
            [
                "a307074d79f31243"
            ]
        ]
    },
    {
        "id": "23f3cbf5185122a5",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 1720,
        "wires": [
            [
                "fc2d77c45e9a5f41"
            ]
        ]
    },
    {
        "id": "a307074d79f31243",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 1760,
        "wires": [
            [
                "fde0fcbc595cf545"
            ]
        ]
    },
    {
        "id": "fc2d77c45e9a5f41",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1720,
        "wires": [
            [
                "ed965499537ef161"
            ]
        ]
    },
    {
        "id": "fde0fcbc595cf545",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1760,
        "wires": [
            [
                "ed965499537ef161"
            ]
        ]
    },
    {
        "id": "ed965499537ef161",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 1740,
        "wires": [
            []
        ]
    },
    {
        "id": "7e79916d4622c72a",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 1740,
        "wires": [
            [
                "5499ca60080d8d31"
            ]
        ]
    },
    {
        "id": "7119dd3f95a8e9a0",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 1700,
        "wires": []
    },
    {
        "id": "93fafefa667dfe29",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 2200,
        "wires": []
    },
    {
        "id": "c1b536f72f7e1ad1",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP5",
        "links": [
            "abf931947b0449e6"
        ],
        "x": 155,
        "y": 2140,
        "wires": [
            [
                "64e54e6c683e613e"
            ]
        ]
    },
    {
        "id": "60817bd0f3fa7e56",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP5",
        "info": "This will only give analog value.",
        "x": 190,
        "y": 2080,
        "wires": []
    },
    {
        "id": "64e54e6c683e613e",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 280,
        "y": 2140,
        "wires": [
            [
                "c72dee8fde649249"
            ]
        ]
    },
    {
        "id": "a01746b73aeb2179",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 1;\nmsg.parameter5 = 5;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no16=id+\"_\"+msg.parameter5+\"_\"+msg.dt_mc+\"_\"+msg.msg_no16+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter5,\n        \"value\":value,\n        \"msg_no\": msg.msg_no16,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 2140,
        "wires": [
            [
                "93fafefa667dfe29",
                "8799ca061ffcb82a",
                "dd51cc3e525f6ebb"
            ]
        ]
    },
    {
        "id": "8799ca061ffcb82a",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp5_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/cttemp5/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 2140,
        "wires": [
            [
                "726c956be817d1fc"
            ]
        ]
    },
    {
        "id": "de658ad820ea5716",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1410,
        "y": 2140,
        "wires": [
            [
                "43b8224f49cd82a7"
            ],
            [
                "5e55c5ad1f2dbaa7"
            ]
        ]
    },
    {
        "id": "43b8224f49cd82a7",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 2120,
        "wires": [
            [
                "91298c208800a9f8"
            ]
        ]
    },
    {
        "id": "5e55c5ad1f2dbaa7",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 2160,
        "wires": [
            [
                "607a5def4c2fd338"
            ]
        ]
    },
    {
        "id": "91298c208800a9f8",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1750,
        "y": 2120,
        "wires": [
            [
                "bf12a77dea4dd3a5"
            ]
        ]
    },
    {
        "id": "607a5def4c2fd338",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1750,
        "y": 2160,
        "wires": [
            [
                "bf12a77dea4dd3a5"
            ]
        ]
    },
    {
        "id": "bf12a77dea4dd3a5",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1890,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "726c956be817d1fc",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1240,
        "y": 2140,
        "wires": [
            [
                "de658ad820ea5716"
            ]
        ]
    },
    {
        "id": "bae169b93444852b",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1120,
        "y": 2100,
        "wires": []
    },
    {
        "id": "e6f4b5931365c022",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 2660,
        "wires": []
    },
    {
        "id": "8c52b82b846454a3",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "TEMP6",
        "links": [
            "91f040053275022e"
        ],
        "x": 175,
        "y": 2600,
        "wires": [
            [
                "20089aa2ecfd65a7"
            ]
        ]
    },
    {
        "id": "ed2d65e83c7ce522",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "TEMP6",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 2540,
        "wires": []
    },
    {
        "id": "20089aa2ecfd65a7",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 2600,
        "wires": [
            [
                "ab34fe0148813d8f"
            ]
        ]
    },
    {
        "id": "2e08c258ca403f21",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 1;\nmsg.parameter6 = 6;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no17=id+\"_\"+msg.parameter6+\"_\"+msg.dt_mc+\"_\"+msg.msg_no17+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter6,\n        \"value\":value,\n        \"msg_no\": msg.msg_no17,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 2600,
        "wires": [
            [
                "e6f4b5931365c022",
                "46ff4825f14575e3",
                "a8730927a095ddf3"
            ]
        ]
    },
    {
        "id": "46ff4825f14575e3",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_cttemp6_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename = \"/home/root/MES_SYS/\" + mm + yyyy + \"/cttemp6/\" + msg.fname;\n\n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value': msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = { \"pattern\": msg.fname };\n\nnode.status({ fill: \"blue\", shape: \"ring\", text: msg.fname });\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 2600,
        "wires": [
            [
                "e49bbb9dba7fe0c0"
            ]
        ]
    },
    {
        "id": "55cf7a1a6f42578f",
        "type": "switch",
        "z": "e35140c4f71a9479",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 2600,
        "wires": [
            [
                "5b66053182a07266"
            ],
            [
                "271d8a2a7d5ac020"
            ]
        ]
    },
    {
        "id": "5b66053182a07266",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 2580,
        "wires": [
            [
                "f1846d90bc0860cf"
            ]
        ]
    },
    {
        "id": "271d8a2a7d5ac020",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 2620,
        "wires": [
            [
                "fc8ce54e5682df6e"
            ]
        ]
    },
    {
        "id": "f1846d90bc0860cf",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 2580,
        "wires": [
            [
                "569b021255a860c1"
            ]
        ]
    },
    {
        "id": "fc8ce54e5682df6e",
        "type": "csv",
        "z": "e35140c4f71a9479",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 2620,
        "wires": [
            [
                "569b021255a860c1"
            ]
        ]
    },
    {
        "id": "569b021255a860c1",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "e49bbb9dba7fe0c0",
        "type": "fs-file-lister",
        "z": "e35140c4f71a9479",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 2600,
        "wires": [
            [
                "55cf7a1a6f42578f"
            ]
        ]
    },
    {
        "id": "2fb0c5044df9745d",
        "type": "comment",
        "z": "e35140c4f71a9479",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 2560,
        "wires": []
    },
    {
        "id": "9ae3ce28eca07611",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T1",
        "links": [
            "3bf3da0e23233acc"
        ],
        "x": 835,
        "y": 340,
        "wires": []
    },
    {
        "id": "78306022ec84a9db",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T2",
        "links": [
            "0ba816b64243f449"
        ],
        "x": 845,
        "y": 780,
        "wires": []
    },
    {
        "id": "dc60abea29ee5fda",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T3",
        "links": [
            "67c93dea1db3ed3c"
        ],
        "x": 855,
        "y": 1320,
        "wires": []
    },
    {
        "id": "288f11fb2577c8b4",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T4",
        "links": [
            "d8f0501fafcbfe2e"
        ],
        "x": 885,
        "y": 1800,
        "wires": []
    },
    {
        "id": "a8730927a095ddf3",
        "type": "link out",
        "z": "e35140c4f71a9479",
        "name": "DATA-T6",
        "links": [
            "3b1da4e92b647f2c"
        ],
        "x": 845,
        "y": 2660,
        "wires": []
    },
    {
        "id": "bca38c4cb6a69932",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "a662a52049352287"
        ],
        "x": 1035,
        "y": 2680,
        "wires": [
            [
                "5e8a9bae84228932",
                "ee14b8cbf94a28ea",
                "dd3cad6ef9406a7b"
            ]
        ]
    },
    {
        "id": "ee14b8cbf94a28ea",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp6",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1550,
        "y": 2680,
        "wires": []
    },
    {
        "id": "ad3467bf406caefb",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp5",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1550,
        "y": 2220,
        "wires": []
    },
    {
        "id": "8c72a51d2596d762",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "02b9c57bc072ddf7"
        ],
        "x": 1015,
        "y": 2220,
        "wires": [
            [
                "ef89f0aa242e47d2",
                "ad3467bf406caefb",
                "585dab4674039fb6"
            ]
        ]
    },
    {
        "id": "dc2dd2c75336ae64",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp4",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1570,
        "y": 1800,
        "wires": []
    },
    {
        "id": "65b6a3828f52cc9f",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "c5c5570736f930ba"
        ],
        "x": 1075,
        "y": 1800,
        "wires": [
            [
                "480cc689e3a642a4",
                "dc2dd2c75336ae64",
                "440c39ed6a953a63"
            ]
        ]
    },
    {
        "id": "3ff2952f54d70b5a",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1590,
        "y": 1340,
        "wires": []
    },
    {
        "id": "1784c65e914b4aa9",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "5f6545f881e88bb7"
        ],
        "x": 1025,
        "y": 1340,
        "wires": [
            [
                "86b4e3c407a68fc5",
                "3ff2952f54d70b5a",
                "dc87384ea4115a24"
            ]
        ]
    },
    {
        "id": "eb853bed40b1cef7",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1550,
        "y": 800,
        "wires": []
    },
    {
        "id": "1ae9584056b87be0",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "48f02e0d723eab7b"
        ],
        "x": 1035,
        "y": 800,
        "wires": [
            [
                "e0d55c826832436b",
                "eb853bed40b1cef7",
                "58a8013cf7025984"
            ]
        ]
    },
    {
        "id": "928b1d14aeed21ab",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1550,
        "y": 380,
        "wires": []
    },
    {
        "id": "ce98a2b675847607",
        "type": "link in",
        "z": "e35140c4f71a9479",
        "name": "",
        "links": [
            "647a76f0ab1d1d18"
        ],
        "x": 1075,
        "y": 320,
        "wires": [
            [
                "64e76e69297f7525",
                "928b1d14aeed21ab",
                "bd853f668f4375ef"
            ]
        ]
    },
    {
        "id": "64e76e69297f7525",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter1",
                "pt": "global",
                "to": "parameter1",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que12",
                "pt": "global",
                "to": "msg_no12",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 360,
        "wires": [
            [
                "c8dd8c2a30bfdc68"
            ]
        ]
    },
    {
        "id": "e0d55c826832436b",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter2",
                "pt": "global",
                "to": "parameter2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que13",
                "pt": "global",
                "to": "msg_no13",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "86b4e3c407a68fc5",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter3",
                "pt": "global",
                "to": "parameter3",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que14",
                "pt": "global",
                "to": "msg_no14",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 1380,
        "wires": [
            [
                "1f2e6c6339e5a43c"
            ]
        ]
    },
    {
        "id": "480cc689e3a642a4",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter4",
                "pt": "global",
                "to": "parameter4",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que15",
                "pt": "global",
                "to": "msg_no15",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "ef89f0aa242e47d2",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter5",
                "pt": "global",
                "to": "parameter5",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que16",
                "pt": "global",
                "to": "msg_no16",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "5e8a9bae84228932",
        "type": "change",
        "z": "e35140c4f71a9479",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter6",
                "pt": "global",
                "to": "parameter6",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que17",
                "pt": "global",
                "to": "msg_no17",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1200,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "1f2e6c6339e5a43c",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 1420,
        "wires": []
    },
    {
        "id": "c8dd8c2a30bfdc68",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 440,
        "wires": []
    },
    {
        "id": "34ea1261a053c57f",
        "type": "debug",
        "z": "e35140c4f71a9479",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 290,
        "y": 320,
        "wires": []
    },
    {
        "id": "e6a98c2398aa968d",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 240,
        "wires": [
            [
                "7d6c1b07798e1875"
            ]
        ]
    },
    {
        "id": "e030ccdd49ea88c5",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 680,
        "wires": [
            [
                "0fefdbe51a374d81"
            ]
        ]
    },
    {
        "id": "6d7b4ac739142a77",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1220,
        "wires": [
            [
                "c5ed3d192fbed7d5"
            ]
        ]
    },
    {
        "id": "369026bd825e6087",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1700,
        "wires": [
            [
                "7c87b6f80dd1af24"
            ]
        ]
    },
    {
        "id": "c72dee8fde649249",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 2100,
        "wires": [
            [
                "a01746b73aeb2179"
            ]
        ]
    },
    {
        "id": "ab34fe0148813d8f",
        "type": "function",
        "z": "e35140c4f71a9479",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 2560,
        "wires": [
            [
                "2e08c258ca403f21"
            ]
        ]
    },
    {
        "id": "1933a061b33f14e8",
        "type": "file",
        "z": "e35140c4f71a9479",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1890,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "bd853f668f4375ef",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ct/temp1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1590,
        "y": 320,
        "wires": []
    },
    {
        "id": "58a8013cf7025984",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1510,
        "y": 860,
        "wires": []
    },
    {
        "id": "dc87384ea4115a24",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1569.5078125,
        "y": 1409.5234375,
        "wires": []
    },
    {
        "id": "440c39ed6a953a63",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp4",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1550,
        "y": 1880,
        "wires": []
    },
    {
        "id": "585dab4674039fb6",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp5",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1550,
        "y": 2280,
        "wires": []
    },
    {
        "id": "dd3cad6ef9406a7b",
        "type": "mqtt out",
        "z": "e35140c4f71a9479",
        "name": "",
        "topic": "hvacgmi/ct/temp6",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1550,
        "y": 2760,
        "wires": []
    },
    {
        "id": "bd52dc9869e964d4",
        "type": "inject",
        "z": "e35140c4f71a9479",
        "name": "",
        "props": [
            {
                "p": "msg_no12",
                "v": "1_1_2024-05-17 09:42:09_39_2",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 970,
        "y": 460,
        "wires": [
            [
                "64e76e69297f7525"
            ]
        ]
    },
    {
        "id": "56a45992e59df808",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 340,
        "y": 600,
        "wires": [
            [
                "0ecf4b61f2165280"
            ]
        ]
    },
    {
        "id": "0ecf4b61f2165280",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 530,
        "y": 600,
        "wires": [
            [
                "e3a171aa155cfb21",
                "b80b6132fe70b214"
            ]
        ]
    },
    {
        "id": "5aab7011ace9e197",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 640,
        "wires": [
            [
                "ef0fe2cd579dbdcb"
            ]
        ]
    },
    {
        "id": "83791ca319bec27b",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1430,
        "y": 780,
        "wires": [
            [
                "8d2b4bec2b763863"
            ]
        ]
    },
    {
        "id": "8d2b4bec2b763863",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1670,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "5f95abdbb83fdb98",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 180,
        "y": 600,
        "wires": [
            [
                "56a45992e59df808"
            ]
        ]
    },
    {
        "id": "8e14ea36210ea843",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1070,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "b80b6132fe70b214",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 600,
        "wires": [
            [
                "5aab7011ace9e197",
                "5de6c2197d1c5b01",
                "a65a3fcea7b8e83d"
            ],
            [
                "7a1b74aae1fd6a35"
            ]
        ]
    },
    {
        "id": "1216be5ae36bbe6d",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 210,
        "y": 1180,
        "wires": [
            [
                "8e14ea36210ea843"
            ]
        ]
    },
    {
        "id": "fe4f476958e852f3",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 360,
        "y": 1060,
        "wires": [
            [
                "383e2b5928cce2ac"
            ]
        ]
    },
    {
        "id": "383e2b5928cce2ac",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 560,
        "y": 1060,
        "wires": [
            [
                "08a567be1d4945fe"
            ]
        ]
    },
    {
        "id": "ac43bad2a822058f",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 1060,
        "wires": [
            [
                "fe4f476958e852f3"
            ]
        ]
    },
    {
        "id": "74220f523129b508",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 190,
        "y": 1140,
        "wires": []
    },
    {
        "id": "3c6d2996924a825c",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 540,
        "y": 560,
        "wires": []
    },
    {
        "id": "14dfd74ea7ba0712",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 250,
        "y": 1020,
        "wires": []
    },
    {
        "id": "c85b45ad9b77b393",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 380,
        "y": 180,
        "wires": []
    },
    {
        "id": "83856c7c38049af2",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 640,
        "wires": []
    },
    {
        "id": "e3a171aa155cfb21",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 550,
        "y": 640,
        "wires": []
    },
    {
        "id": "5de6c2197d1c5b01",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 520,
        "wires": []
    },
    {
        "id": "7a1b74aae1fd6a35",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 680,
        "wires": []
    },
    {
        "id": "2572a6c696fc0451",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T1CT",
        "links": [
            "44539b4e20b46d21",
            "4e108cef6a605d30"
        ],
        "x": 235,
        "y": 800,
        "wires": [
            [
                "0e1b817f55a683c3",
                "e801d98309f6b1b8"
            ]
        ]
    },
    {
        "id": "3215b284dfb39dd9",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1450,
        "y": 660,
        "wires": [
            [
                "f39c3dac112438f7",
                "eff552549e6f322f"
            ]
        ]
    },
    {
        "id": "f39c3dac112438f7",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1580,
        "y": 600,
        "wires": [
            [
                "83856c7c38049af2",
                "647a76f0ab1d1d18"
            ]
        ]
    },
    {
        "id": "eff552549e6f322f",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1630,
        "y": 680,
        "wires": []
    },
    {
        "id": "ef0fe2cd579dbdcb",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter1= msg.payload.col3;\nmsg.msg_no12= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 600,
        "wires": [
            [
                "f39c3dac112438f7"
            ]
        ]
    },
    {
        "id": "0e1b817f55a683c3",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 390,
        "y": 800,
        "wires": [
            [
                "e6ecf915f1e0d558",
                "2014576b37e19297"
            ],
            [
                "2014576b37e19297"
            ],
            []
        ]
    },
    {
        "id": "e6ecf915f1e0d558",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 773,
        "wires": []
    },
    {
        "id": "c3542eb2c1594aa4",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 300,
        "y": 860,
        "wires": [
            [
                "0e1b817f55a683c3"
            ]
        ]
    },
    {
        "id": "2014576b37e19297",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 620,
        "y": 820,
        "wires": [
            [
                "38f0dd30ead00960"
            ]
        ]
    },
    {
        "id": "38f0dd30ead00960",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 810,
        "y": 820,
        "wires": [
            [
                "520a8f7fa6f3d94c"
            ]
        ]
    },
    {
        "id": "520a8f7fa6f3d94c",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 820,
        "wires": [
            [
                "d363e78834a3b9de"
            ]
        ]
    },
    {
        "id": "d363e78834a3b9de",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1270,
        "y": 820,
        "wires": [
            [
                "83791ca319bec27b"
            ],
            [
                "75d5cc385bea24fa"
            ]
        ]
    },
    {
        "id": "75d5cc385bea24fa",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1530,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "f0d50aa0d5876d14",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 320,
        "y": 280,
        "wires": []
    },
    {
        "id": "46ffd93f1d1414b1",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 320,
        "wires": [
            [
                "2408b01dd4818aac",
                "385b4bdbd70e7978"
            ]
        ]
    },
    {
        "id": "2408b01dd4818aac",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 320,
        "wires": []
    },
    {
        "id": "ad3d4fc79220e1dc",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 480,
        "y": 320,
        "wires": [
            [
                "731dfcc08f7e18fd",
                "3be312a2857d027c"
            ]
        ]
    },
    {
        "id": "731dfcc08f7e18fd",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a4bfdd4898256280",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 250,
        "y": 560,
        "wires": []
    },
    {
        "id": "2ca9fb7360bc520d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 370,
        "y": 733,
        "wires": []
    },
    {
        "id": "db392dde500317a9",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 360,
        "y": 980,
        "wires": []
    },
    {
        "id": "6ac24d0e645ce107",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1650,
        "y": 560,
        "wires": []
    },
    {
        "id": "8e3b68c5ba46756d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 400,
        "y": 900,
        "wires": []
    },
    {
        "id": "3bf3da0e23233acc",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T1",
        "links": [
            "9ae3ce28eca07611"
        ],
        "x": 275,
        "y": 220,
        "wires": [
            [
                "385b4bdbd70e7978"
            ]
        ]
    },
    {
        "id": "385b4bdbd70e7978",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T1CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 220,
        "wires": [
            [
                "b5fe64e9d1cfc96a",
                "fa3b57c3f2be3434"
            ]
        ]
    },
    {
        "id": "de7e7baabfdfb154",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 870,
        "y": 220,
        "wires": [
            [
                "465cf760bb34eeb6"
            ],
            [
                "8107eca0defafd07"
            ]
        ]
    },
    {
        "id": "465cf760bb34eeb6",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 200,
        "wires": [
            [
                "af18420330ac6822"
            ]
        ]
    },
    {
        "id": "8107eca0defafd07",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 240,
        "wires": [
            [
                "f9478bdfeb6bee88"
            ]
        ]
    },
    {
        "id": "af18420330ac6822",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1210,
        "y": 200,
        "wires": [
            [
                "0d123e1cfd563151"
            ]
        ]
    },
    {
        "id": "f9478bdfeb6bee88",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1210,
        "y": 240,
        "wires": [
            [
                "0d123e1cfd563151"
            ]
        ]
    },
    {
        "id": "b5fe64e9d1cfc96a",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 700,
        "y": 220,
        "wires": [
            [
                "de7e7baabfdfb154"
            ]
        ]
    },
    {
        "id": "647a76f0ab1d1d18",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T1CT",
        "links": [
            "ce98a2b675847607"
        ],
        "x": 1835,
        "y": 600,
        "wires": []
    },
    {
        "id": "d0f822bf40df4a37",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 260,
        "y": 400,
        "wires": [
            [
                "ad3d4fc79220e1dc"
            ]
        ]
    },
    {
        "id": "fcc7d748919bd66b",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 260,
        "y": 440,
        "wires": [
            [
                "ad3d4fc79220e1dc"
            ]
        ]
    },
    {
        "id": "517c79d11fa9968a",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 250,
        "y": 320,
        "wires": [
            [
                "ad3d4fc79220e1dc"
            ]
        ]
    },
    {
        "id": "02b10296dac6228b",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 250,
        "y": 360,
        "wires": [
            [
                "ad3d4fc79220e1dc"
            ]
        ]
    },
    {
        "id": "7174d3ab4ea3cf61",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1130,
        "y": 600,
        "wires": [
            [
                "ef0fe2cd579dbdcb"
            ]
        ]
    },
    {
        "id": "fa3b57c3f2be3434",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "a65a3fcea7b8e83d",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 600,
        "wires": [
            [
                "7174d3ab4ea3cf61"
            ]
        ]
    },
    {
        "id": "3be312a2857d027c",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 400,
        "wires": []
    },
    {
        "id": "a5392b2dd4c35605",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 390,
        "y": 700,
        "wires": []
    },
    {
        "id": "53e97c7262bb0098",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 350,
        "y": 140,
        "wires": []
    },
    {
        "id": "08a567be1d4945fe",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 740,
        "y": 1060,
        "wires": [
            [
                "0e1b817f55a683c3"
            ]
        ]
    },
    {
        "id": "7b111e3a3281e14a",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 360,
        "y": 1840,
        "wires": [
            [
                "4e09ad1d840d5106"
            ]
        ]
    },
    {
        "id": "4e09ad1d840d5106",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 550,
        "y": 1840,
        "wires": [
            [
                "5339c37d3ca616b4",
                "a3f5fc56d94f8f4a"
            ]
        ]
    },
    {
        "id": "1c18c492b0c876f5",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 1880,
        "wires": [
            [
                "66345e07443ad0cc"
            ]
        ]
    },
    {
        "id": "2d9a0070aa164680",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1450,
        "y": 2020,
        "wires": [
            [
                "a911ac1e086e71dd"
            ]
        ]
    },
    {
        "id": "a911ac1e086e71dd",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1690,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "e06bef91a9e6636f",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 200,
        "y": 1840,
        "wires": [
            [
                "7b111e3a3281e14a"
            ]
        ]
    },
    {
        "id": "b0217b02eac2e2f2",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1090,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "a3f5fc56d94f8f4a",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 1840,
        "wires": [
            [
                "1c18c492b0c876f5",
                "729bf01d8c770c73",
                "af739d572bc96ee2"
            ],
            [
                "447cbe4b7e65ac63"
            ]
        ]
    },
    {
        "id": "7b8d5ca9b5bc3e35",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 230,
        "y": 2420,
        "wires": [
            [
                "b0217b02eac2e2f2"
            ]
        ]
    },
    {
        "id": "36da55c2fee77692",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 380,
        "y": 2300,
        "wires": [
            [
                "35ca661e4a52f264"
            ]
        ]
    },
    {
        "id": "35ca661e4a52f264",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 580,
        "y": 2300,
        "wires": [
            [
                "520fe3ae4b9cb582"
            ]
        ]
    },
    {
        "id": "9d8681f2ee6de1c3",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 220,
        "y": 2300,
        "wires": [
            [
                "36da55c2fee77692"
            ]
        ]
    },
    {
        "id": "5a85c31f819f06bf",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 210,
        "y": 2380,
        "wires": []
    },
    {
        "id": "1c74bb6dec62fbd7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 560,
        "y": 1800,
        "wires": []
    },
    {
        "id": "73cf9dfe13295d4f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 270,
        "y": 2260,
        "wires": []
    },
    {
        "id": "c81e9c02ca0928cd",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 400,
        "y": 1420,
        "wires": []
    },
    {
        "id": "0fe917b8b0da4468",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 1880,
        "wires": []
    },
    {
        "id": "5339c37d3ca616b4",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 1880,
        "wires": []
    },
    {
        "id": "729bf01d8c770c73",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 1760,
        "wires": []
    },
    {
        "id": "447cbe4b7e65ac63",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 1920,
        "wires": []
    },
    {
        "id": "ab0ad6ce658f6d14",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T2CT",
        "links": [
            "85af772867325ba2",
            "2c5ebbd6d5885721"
        ],
        "x": 255,
        "y": 2040,
        "wires": [
            [
                "7857f6d8c0f8fd0b",
                "09ad8f575552eaf6"
            ]
        ]
    },
    {
        "id": "242a17c0c842dc93",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1470,
        "y": 1900,
        "wires": [
            [
                "e6f8e273b055cfdd",
                "827d4398d8f98f3e"
            ]
        ]
    },
    {
        "id": "e6f8e273b055cfdd",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 1840,
        "wires": [
            [
                "0fe917b8b0da4468",
                "48f02e0d723eab7b"
            ]
        ]
    },
    {
        "id": "827d4398d8f98f3e",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 1920,
        "wires": []
    },
    {
        "id": "66345e07443ad0cc",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter2= msg.payload.col3;\nmsg.msg_no13= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 1840,
        "wires": [
            [
                "e6f8e273b055cfdd"
            ]
        ]
    },
    {
        "id": "7857f6d8c0f8fd0b",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 410,
        "y": 2040,
        "wires": [
            [
                "3b90a6c0ebeaabbe",
                "0b8cd4967886ab9e"
            ],
            [
                "0b8cd4967886ab9e"
            ],
            []
        ]
    },
    {
        "id": "3b90a6c0ebeaabbe",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 2013,
        "wires": []
    },
    {
        "id": "dceadbb505831533",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 320,
        "y": 2100,
        "wires": [
            [
                "7857f6d8c0f8fd0b"
            ]
        ]
    },
    {
        "id": "0b8cd4967886ab9e",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 640,
        "y": 2060,
        "wires": [
            [
                "4a96e74ece548eb8"
            ]
        ]
    },
    {
        "id": "4a96e74ece548eb8",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 830,
        "y": 2060,
        "wires": [
            [
                "49dc29c702dee8a5"
            ]
        ]
    },
    {
        "id": "49dc29c702dee8a5",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 2060,
        "wires": [
            [
                "5e16220f6d6b4b60"
            ]
        ]
    },
    {
        "id": "5e16220f6d6b4b60",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 2060,
        "wires": [
            [
                "2d9a0070aa164680"
            ],
            [
                "0aa8489429bf67ab"
            ]
        ]
    },
    {
        "id": "0aa8489429bf67ab",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1550,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "096402e7ed76e9f0",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 340,
        "y": 1520,
        "wires": []
    },
    {
        "id": "7bb35b104bdae50a",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1560,
        "wires": [
            [
                "658d9088a45873ca",
                "dfd409bedcc68ac3"
            ]
        ]
    },
    {
        "id": "658d9088a45873ca",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 1560,
        "wires": []
    },
    {
        "id": "c68ba9107fe01c7a",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 500,
        "y": 1560,
        "wires": [
            [
                "427c5c2b4dbf27a7",
                "3cb4d1ee81d318a3"
            ]
        ]
    },
    {
        "id": "427c5c2b4dbf27a7",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "aa2ed13a0aa6d469",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 270,
        "y": 1800,
        "wires": []
    },
    {
        "id": "e1c7cad40d01a1fc",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 390,
        "y": 1973,
        "wires": []
    },
    {
        "id": "55016d55403c0387",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 380,
        "y": 2220,
        "wires": []
    },
    {
        "id": "8e73ed0c068510b7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1670,
        "y": 1800,
        "wires": []
    },
    {
        "id": "037ccdb705be7757",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 420,
        "y": 2140,
        "wires": []
    },
    {
        "id": "0ba816b64243f449",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T2",
        "links": [
            "78306022ec84a9db"
        ],
        "x": 295,
        "y": 1460,
        "wires": [
            [
                "dfd409bedcc68ac3"
            ]
        ]
    },
    {
        "id": "dfd409bedcc68ac3",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T2CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1460,
        "wires": [
            [
                "eca7c5dc229405d2",
                "6e673756fa746037"
            ]
        ]
    },
    {
        "id": "3ae38a83ec462205",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 1460,
        "wires": [
            [
                "60dd254a5574c27f"
            ],
            [
                "d2c2f17581a2712f"
            ]
        ]
    },
    {
        "id": "60dd254a5574c27f",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 1440,
        "wires": [
            [
                "52e246fb70bb9f49"
            ]
        ]
    },
    {
        "id": "d2c2f17581a2712f",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 1480,
        "wires": [
            [
                "5864c6f011e35c85"
            ]
        ]
    },
    {
        "id": "52e246fb70bb9f49",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 1440,
        "wires": [
            [
                "33ab9f80859904cd"
            ]
        ]
    },
    {
        "id": "5864c6f011e35c85",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 1480,
        "wires": [
            [
                "33ab9f80859904cd"
            ]
        ]
    },
    {
        "id": "eca7c5dc229405d2",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 720,
        "y": 1460,
        "wires": [
            [
                "3ae38a83ec462205"
            ]
        ]
    },
    {
        "id": "48f02e0d723eab7b",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T2CT",
        "links": [
            "1ae9584056b87be0"
        ],
        "x": 1855,
        "y": 1840,
        "wires": []
    },
    {
        "id": "6136227c6d5b5e54",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 1640,
        "wires": [
            [
                "c68ba9107fe01c7a"
            ]
        ]
    },
    {
        "id": "8c6c09e322023acb",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 1680,
        "wires": [
            [
                "c68ba9107fe01c7a"
            ]
        ]
    },
    {
        "id": "f740a280233ca791",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 1560,
        "wires": [
            [
                "c68ba9107fe01c7a"
            ]
        ]
    },
    {
        "id": "a6d5087acbf5fdce",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 1600,
        "wires": [
            [
                "c68ba9107fe01c7a"
            ]
        ]
    },
    {
        "id": "202abb95ebf60f61",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1150,
        "y": 1840,
        "wires": [
            [
                "66345e07443ad0cc"
            ]
        ]
    },
    {
        "id": "6e673756fa746037",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 1420,
        "wires": []
    },
    {
        "id": "af739d572bc96ee2",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1840,
        "wires": [
            [
                "202abb95ebf60f61"
            ]
        ]
    },
    {
        "id": "3cb4d1ee81d318a3",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 1640,
        "wires": []
    },
    {
        "id": "e5776f76b0a1223d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 410,
        "y": 1940,
        "wires": []
    },
    {
        "id": "edeb8aaebfb7636e",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 370,
        "y": 1380,
        "wires": []
    },
    {
        "id": "520fe3ae4b9cb582",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 760,
        "y": 2300,
        "wires": [
            [
                "7857f6d8c0f8fd0b"
            ]
        ]
    },
    {
        "id": "a080fbedca5fc0a1",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 360,
        "y": 3020,
        "wires": [
            [
                "ef2058cc84acfe61"
            ]
        ]
    },
    {
        "id": "ef2058cc84acfe61",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 550,
        "y": 3020,
        "wires": [
            [
                "b2a920b719a4440b",
                "445a85c1796e32bd"
            ]
        ]
    },
    {
        "id": "422dbb32ab094cf0",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 3060,
        "wires": [
            [
                "9495328fb0f8055b"
            ]
        ]
    },
    {
        "id": "969734efdc41e481",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1450,
        "y": 3200,
        "wires": [
            [
                "79442dc3228967c4"
            ]
        ]
    },
    {
        "id": "79442dc3228967c4",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1690,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "69879372800af562",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 200,
        "y": 3020,
        "wires": [
            [
                "a080fbedca5fc0a1"
            ]
        ]
    },
    {
        "id": "fefd453ada7b3483",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1090,
        "y": 3600,
        "wires": [
            []
        ]
    },
    {
        "id": "445a85c1796e32bd",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 3020,
        "wires": [
            [
                "422dbb32ab094cf0",
                "c7d579f2fa28d763",
                "709f5c6b101a0ee1"
            ],
            [
                "4c730543fedbd925"
            ]
        ]
    },
    {
        "id": "a574eb5bd2118c23",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 230,
        "y": 3600,
        "wires": [
            [
                "fefd453ada7b3483"
            ]
        ]
    },
    {
        "id": "cd3d8b3d2d2a0a74",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 380,
        "y": 3480,
        "wires": [
            [
                "d790e4f898907d27"
            ]
        ]
    },
    {
        "id": "d790e4f898907d27",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 580,
        "y": 3480,
        "wires": [
            [
                "ef3534ed61b5b84f"
            ]
        ]
    },
    {
        "id": "cee5849e88a4203e",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 220,
        "y": 3480,
        "wires": [
            [
                "cd3d8b3d2d2a0a74"
            ]
        ]
    },
    {
        "id": "788bd701fb4b3a22",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 210,
        "y": 3560,
        "wires": []
    },
    {
        "id": "2839b670c930a3a6",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 560,
        "y": 2980,
        "wires": []
    },
    {
        "id": "37b0edae3a2f0ae9",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 270,
        "y": 3440,
        "wires": []
    },
    {
        "id": "50995230798e6e33",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 400,
        "y": 2600,
        "wires": []
    },
    {
        "id": "e1d165e79c2806c2",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 3060,
        "wires": []
    },
    {
        "id": "b2a920b719a4440b",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 3060,
        "wires": []
    },
    {
        "id": "c7d579f2fa28d763",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 2940,
        "wires": []
    },
    {
        "id": "4c730543fedbd925",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 3100,
        "wires": []
    },
    {
        "id": "9ac044dcd9b95341",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T3CT",
        "links": [
            "ea121f3ac3fc9add",
            "1f4024a3a9858ebb"
        ],
        "x": 255,
        "y": 3220,
        "wires": [
            [
                "ddf5bf32a4f65a49",
                "feb458e969e3ef31"
            ]
        ]
    },
    {
        "id": "41ed8487fff60c31",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1470,
        "y": 3080,
        "wires": [
            [
                "51fd91c67d452dec",
                "78cf08a9516ad7a6"
            ]
        ]
    },
    {
        "id": "51fd91c67d452dec",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 3020,
        "wires": [
            [
                "e1d165e79c2806c2",
                "5f6545f881e88bb7"
            ]
        ]
    },
    {
        "id": "78cf08a9516ad7a6",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 3100,
        "wires": []
    },
    {
        "id": "9495328fb0f8055b",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter3= msg.payload.col3;\nmsg.msg_no14= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 3020,
        "wires": [
            [
                "51fd91c67d452dec"
            ]
        ]
    },
    {
        "id": "ddf5bf32a4f65a49",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 410,
        "y": 3220,
        "wires": [
            [
                "100d3989bafb3387",
                "8de2b89afbccdcd2"
            ],
            [
                "8de2b89afbccdcd2"
            ],
            []
        ]
    },
    {
        "id": "100d3989bafb3387",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 3193,
        "wires": []
    },
    {
        "id": "81b9da3259603756",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 320,
        "y": 3280,
        "wires": [
            [
                "ddf5bf32a4f65a49"
            ]
        ]
    },
    {
        "id": "8de2b89afbccdcd2",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 640,
        "y": 3240,
        "wires": [
            [
                "1e97ac52f6b5c5bc"
            ]
        ]
    },
    {
        "id": "1e97ac52f6b5c5bc",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 830,
        "y": 3240,
        "wires": [
            [
                "efd6a805c43476f4"
            ]
        ]
    },
    {
        "id": "efd6a805c43476f4",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 3240,
        "wires": [
            [
                "5dd44d465bf4393b"
            ]
        ]
    },
    {
        "id": "5dd44d465bf4393b",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 3240,
        "wires": [
            [
                "969734efdc41e481"
            ],
            [
                "d0975e869bc50791"
            ]
        ]
    },
    {
        "id": "d0975e869bc50791",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1550,
        "y": 3260,
        "wires": [
            []
        ]
    },
    {
        "id": "f64c473f2555035b",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 340,
        "y": 2700,
        "wires": []
    },
    {
        "id": "cd04cf56c3fac040",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 2740,
        "wires": [
            [
                "20bb0352f4683b24",
                "ac9119c9d2848722"
            ]
        ]
    },
    {
        "id": "20bb0352f4683b24",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 2740,
        "wires": []
    },
    {
        "id": "b94f0abd5108fde2",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 500,
        "y": 2740,
        "wires": [
            [
                "60a3614dad5529c0",
                "c2307df38e107870"
            ]
        ]
    },
    {
        "id": "60a3614dad5529c0",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "85b1ef45fc2cdf3f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 270,
        "y": 2980,
        "wires": []
    },
    {
        "id": "72a5ab555d3683bb",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 390,
        "y": 3153,
        "wires": []
    },
    {
        "id": "e01bca476f6c5b3a",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 380,
        "y": 3400,
        "wires": []
    },
    {
        "id": "435ff351f66132a8",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1550,
        "y": 2980,
        "wires": []
    },
    {
        "id": "d8a713b6fa162dbd",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 420,
        "y": 3320,
        "wires": []
    },
    {
        "id": "67c93dea1db3ed3c",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T3",
        "links": [
            "dc60abea29ee5fda"
        ],
        "x": 295,
        "y": 2640,
        "wires": [
            [
                "ac9119c9d2848722"
            ]
        ]
    },
    {
        "id": "ac9119c9d2848722",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T3CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 2640,
        "wires": [
            [
                "922db8a50250ab01",
                "4e07c1bfc06ba735"
            ]
        ]
    },
    {
        "id": "7ff74cb22a4e0935",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 2640,
        "wires": [
            [
                "fe3df86b24545aea"
            ],
            [
                "78e596ca24e74744"
            ]
        ]
    },
    {
        "id": "fe3df86b24545aea",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 2620,
        "wires": [
            [
                "74ee67c3488ca772"
            ]
        ]
    },
    {
        "id": "78e596ca24e74744",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 2660,
        "wires": [
            [
                "66642fc706d8b1c1"
            ]
        ]
    },
    {
        "id": "74ee67c3488ca772",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 2620,
        "wires": [
            [
                "41761854d6211fa2"
            ]
        ]
    },
    {
        "id": "66642fc706d8b1c1",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 2660,
        "wires": [
            [
                "41761854d6211fa2"
            ]
        ]
    },
    {
        "id": "922db8a50250ab01",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 720,
        "y": 2640,
        "wires": [
            [
                "7ff74cb22a4e0935"
            ]
        ]
    },
    {
        "id": "5f6545f881e88bb7",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T3CT",
        "links": [
            "1784c65e914b4aa9"
        ],
        "x": 1755,
        "y": 3020,
        "wires": []
    },
    {
        "id": "c188ea9623a9fac9",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 2820,
        "wires": [
            [
                "b94f0abd5108fde2"
            ]
        ]
    },
    {
        "id": "97ebcdc0c8482516",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 2860,
        "wires": [
            [
                "b94f0abd5108fde2"
            ]
        ]
    },
    {
        "id": "75a0644c2a58a20c",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 2740,
        "wires": [
            [
                "b94f0abd5108fde2"
            ]
        ]
    },
    {
        "id": "fdd2cd721c7db0a2",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 2780,
        "wires": [
            [
                "b94f0abd5108fde2"
            ]
        ]
    },
    {
        "id": "b1b12ad72f5def96",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1150,
        "y": 3020,
        "wires": [
            [
                "9495328fb0f8055b"
            ]
        ]
    },
    {
        "id": "4e07c1bfc06ba735",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 2600,
        "wires": []
    },
    {
        "id": "709f5c6b101a0ee1",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 3020,
        "wires": [
            [
                "b1b12ad72f5def96"
            ]
        ]
    },
    {
        "id": "c2307df38e107870",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 2820,
        "wires": []
    },
    {
        "id": "2b1ff5fbb395d7b4",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 410,
        "y": 3120,
        "wires": []
    },
    {
        "id": "4857a9bad84ebec3",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 370,
        "y": 2560,
        "wires": []
    },
    {
        "id": "ef3534ed61b5b84f",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 760,
        "y": 3480,
        "wires": [
            [
                "ddf5bf32a4f65a49"
            ]
        ]
    },
    {
        "id": "d57161960ef103f6",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 360,
        "y": 4200,
        "wires": [
            [
                "d29f192864eadc59"
            ]
        ]
    },
    {
        "id": "d29f192864eadc59",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 550,
        "y": 4200,
        "wires": [
            [
                "b69088ed4feb5581",
                "d05db99f5609e91f"
            ]
        ]
    },
    {
        "id": "d26b3a9c76a3bf21",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 980,
        "y": 4240,
        "wires": [
            [
                "53d0d79ee7767b2a"
            ]
        ]
    },
    {
        "id": "355d61ece86314d7",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1450,
        "y": 4380,
        "wires": [
            [
                "303b0c99e1a6d491"
            ]
        ]
    },
    {
        "id": "303b0c99e1a6d491",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1690,
        "y": 4380,
        "wires": [
            []
        ]
    },
    {
        "id": "53172c9784c3aed9",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 200,
        "y": 4200,
        "wires": [
            [
                "d57161960ef103f6"
            ]
        ]
    },
    {
        "id": "2b6644f6b9d2d2b4",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1090,
        "y": 4780,
        "wires": [
            []
        ]
    },
    {
        "id": "d05db99f5609e91f",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 4200,
        "wires": [
            [
                "d26b3a9c76a3bf21",
                "7bbce6ea2d6cf6ec",
                "05a950de0ff3db2d"
            ],
            [
                "c840a0671cf2009b"
            ]
        ]
    },
    {
        "id": "92753d5624c9cfe1",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 230,
        "y": 4780,
        "wires": [
            [
                "2b6644f6b9d2d2b4"
            ]
        ]
    },
    {
        "id": "6019947a1966988c",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 380,
        "y": 4660,
        "wires": [
            [
                "ad8c2db0145f5340"
            ]
        ]
    },
    {
        "id": "ad8c2db0145f5340",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 580,
        "y": 4660,
        "wires": [
            [
                "cad0261fc6630957"
            ]
        ]
    },
    {
        "id": "ede7328e0432470b",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 220,
        "y": 4660,
        "wires": [
            [
                "6019947a1966988c"
            ]
        ]
    },
    {
        "id": "6353f4c53e39f3af",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 210,
        "y": 4740,
        "wires": []
    },
    {
        "id": "9f2b50a8596f3779",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 560,
        "y": 4160,
        "wires": []
    },
    {
        "id": "cf3cc95c638129fd",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 270,
        "y": 4620,
        "wires": []
    },
    {
        "id": "4c1706cdd8222975",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 400,
        "y": 3780,
        "wires": []
    },
    {
        "id": "8c57568fb00aab53",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1670,
        "y": 4240,
        "wires": []
    },
    {
        "id": "b69088ed4feb5581",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 4240,
        "wires": []
    },
    {
        "id": "7bbce6ea2d6cf6ec",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 4120,
        "wires": []
    },
    {
        "id": "c840a0671cf2009b",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 4280,
        "wires": []
    },
    {
        "id": "dcac45177a47c016",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T4CT",
        "links": [
            "89d6aae06fffce90",
            "ed372ab2c3a10788"
        ],
        "x": 255,
        "y": 4400,
        "wires": [
            [
                "bed6b586c987eedf",
                "3b45e87da739a804"
            ]
        ]
    },
    {
        "id": "6dea89e509075431",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1470,
        "y": 4260,
        "wires": [
            [
                "f8c227ad986d9a6f",
                "1320cbbdf5eb8141"
            ]
        ]
    },
    {
        "id": "f8c227ad986d9a6f",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1600,
        "y": 4200,
        "wires": [
            [
                "8c57568fb00aab53",
                "c5c5570736f930ba"
            ]
        ]
    },
    {
        "id": "1320cbbdf5eb8141",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 4280,
        "wires": []
    },
    {
        "id": "53d0d79ee7767b2a",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter4= msg.payload.col3;\nmsg.msg_no15= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 4200,
        "wires": [
            [
                "f8c227ad986d9a6f"
            ]
        ]
    },
    {
        "id": "bed6b586c987eedf",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 410,
        "y": 4400,
        "wires": [
            [
                "a9bc90e204ac22fa",
                "8666c12ef298cb40"
            ],
            [
                "8666c12ef298cb40"
            ],
            []
        ]
    },
    {
        "id": "a9bc90e204ac22fa",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 4373,
        "wires": []
    },
    {
        "id": "42794aab5b7b6d99",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 320,
        "y": 4460,
        "wires": [
            [
                "bed6b586c987eedf"
            ]
        ]
    },
    {
        "id": "8666c12ef298cb40",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 640,
        "y": 4420,
        "wires": [
            [
                "7b9612a57d3bd031"
            ]
        ]
    },
    {
        "id": "7b9612a57d3bd031",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 830,
        "y": 4420,
        "wires": [
            [
                "c6c8d772388e705c"
            ]
        ]
    },
    {
        "id": "c6c8d772388e705c",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 4420,
        "wires": [
            [
                "615ef35f4028c2fb"
            ]
        ]
    },
    {
        "id": "615ef35f4028c2fb",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 4420,
        "wires": [
            [
                "355d61ece86314d7"
            ],
            [
                "fb62534a6a3b3175"
            ]
        ]
    },
    {
        "id": "fb62534a6a3b3175",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T4CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1550,
        "y": 4440,
        "wires": [
            []
        ]
    },
    {
        "id": "3949f2fa5f25967d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 340,
        "y": 3880,
        "wires": []
    },
    {
        "id": "9d0364de3f629275",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 3920,
        "wires": [
            [
                "a5c8b34719e78076",
                "4ee73a29e2faa279"
            ]
        ]
    },
    {
        "id": "a5c8b34719e78076",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 3920,
        "wires": []
    },
    {
        "id": "412da4b6baf19d8d",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 500,
        "y": 3920,
        "wires": [
            [
                "41b7b570b0877ae3",
                "e50477584e676d65"
            ]
        ]
    },
    {
        "id": "41b7b570b0877ae3",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 3920,
        "wires": [
            []
        ]
    },
    {
        "id": "3c81382baf8bd8e7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 270,
        "y": 4160,
        "wires": []
    },
    {
        "id": "41f1d937d0ad8f2d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 390,
        "y": 4333,
        "wires": []
    },
    {
        "id": "4726fb95e62cf671",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 380,
        "y": 4580,
        "wires": []
    },
    {
        "id": "26e1e8ef71bc7321",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1670,
        "y": 4160,
        "wires": []
    },
    {
        "id": "7a7d19d12e3f7617",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 420,
        "y": 4500,
        "wires": []
    },
    {
        "id": "d8f0501fafcbfe2e",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T4",
        "links": [
            "288f11fb2577c8b4"
        ],
        "x": 295,
        "y": 3820,
        "wires": [
            [
                "4ee73a29e2faa279"
            ]
        ]
    },
    {
        "id": "4ee73a29e2faa279",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T4CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 3820,
        "wires": [
            [
                "f88eeac2b63b5d3a",
                "87001d8a5e4df8f0"
            ]
        ]
    },
    {
        "id": "5ddd1009b85228d0",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 3820,
        "wires": [
            [
                "4d107e28654e2f30"
            ],
            [
                "befb7d83a2b2f6fb"
            ]
        ]
    },
    {
        "id": "4d107e28654e2f30",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 3800,
        "wires": [
            [
                "da807c1334bc7b50"
            ]
        ]
    },
    {
        "id": "befb7d83a2b2f6fb",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1080,
        "y": 3840,
        "wires": [
            [
                "8f42a48f7a417b64"
            ]
        ]
    },
    {
        "id": "da807c1334bc7b50",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 3800,
        "wires": [
            [
                "8e0011111325b254"
            ]
        ]
    },
    {
        "id": "8f42a48f7a417b64",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1230,
        "y": 3840,
        "wires": [
            [
                "8e0011111325b254"
            ]
        ]
    },
    {
        "id": "f88eeac2b63b5d3a",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 720,
        "y": 3820,
        "wires": [
            [
                "5ddd1009b85228d0"
            ]
        ]
    },
    {
        "id": "c5c5570736f930ba",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T4CT",
        "links": [
            "65b6a3828f52cc9f"
        ],
        "x": 1735,
        "y": 4200,
        "wires": []
    },
    {
        "id": "f33de06f53d181b4",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 4000,
        "wires": [
            [
                "412da4b6baf19d8d"
            ]
        ]
    },
    {
        "id": "7662513a93bb8861",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 4040,
        "wires": [
            [
                "412da4b6baf19d8d"
            ]
        ]
    },
    {
        "id": "f983fbf05bc8f222",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 3920,
        "wires": [
            [
                "412da4b6baf19d8d"
            ]
        ]
    },
    {
        "id": "04dd2f35647b7936",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 270,
        "y": 3960,
        "wires": [
            [
                "412da4b6baf19d8d"
            ]
        ]
    },
    {
        "id": "45a0b4a4f538094c",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1150,
        "y": 4200,
        "wires": [
            [
                "53d0d79ee7767b2a"
            ]
        ]
    },
    {
        "id": "87001d8a5e4df8f0",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 3780,
        "wires": []
    },
    {
        "id": "05a950de0ff3db2d",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 4200,
        "wires": [
            [
                "45a0b4a4f538094c"
            ]
        ]
    },
    {
        "id": "e50477584e676d65",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 4000,
        "wires": []
    },
    {
        "id": "989dec68b64f463c",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 410,
        "y": 4300,
        "wires": []
    },
    {
        "id": "79bbeb185b1a6b8c",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 370,
        "y": 3740,
        "wires": []
    },
    {
        "id": "cad0261fc6630957",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 760,
        "y": 4660,
        "wires": [
            [
                "bed6b586c987eedf"
            ]
        ]
    },
    {
        "id": "a9432990b2a35583",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2460,
        "y": 620,
        "wires": [
            [
                "047977348f3253e6"
            ]
        ]
    },
    {
        "id": "047977348f3253e6",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2650,
        "y": 620,
        "wires": [
            [
                "7f854d6ca1890d37",
                "74424cb38f94ed5c"
            ]
        ]
    },
    {
        "id": "2e2a2ed315e380cd",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3080,
        "y": 660,
        "wires": [
            [
                "087d48821da216ee"
            ]
        ]
    },
    {
        "id": "e721f754b9a28952",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3550,
        "y": 800,
        "wires": [
            [
                "3f02466e2150c2f1"
            ]
        ]
    },
    {
        "id": "3f02466e2150c2f1",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3790,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "e11718d4f4977cd3",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2300,
        "y": 620,
        "wires": [
            [
                "a9432990b2a35583"
            ]
        ]
    },
    {
        "id": "ae955f63fdb3ba33",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3190,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "74424cb38f94ed5c",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2830,
        "y": 620,
        "wires": [
            [
                "2e2a2ed315e380cd",
                "5c3cfc70fb3c7b56",
                "4dfdac7e51dacb8f"
            ],
            [
                "8d882f8701c1e993"
            ]
        ]
    },
    {
        "id": "2a8c255fc0d68798",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2330,
        "y": 1200,
        "wires": [
            [
                "ae955f63fdb3ba33"
            ]
        ]
    },
    {
        "id": "5a8e7bca695a0765",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2480,
        "y": 1080,
        "wires": [
            [
                "a3692c3dadf7c89a"
            ]
        ]
    },
    {
        "id": "a3692c3dadf7c89a",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2680,
        "y": 1080,
        "wires": [
            [
                "a008be3115ea3d4c"
            ]
        ]
    },
    {
        "id": "83e527aea503fa4c",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2320,
        "y": 1080,
        "wires": [
            [
                "5a8e7bca695a0765"
            ]
        ]
    },
    {
        "id": "b3a80619a4f24786",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 2310,
        "y": 1160,
        "wires": []
    },
    {
        "id": "414d5dc91a5ef3d3",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2660,
        "y": 580,
        "wires": []
    },
    {
        "id": "e20f6127d643af66",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2370,
        "y": 1040,
        "wires": []
    },
    {
        "id": "d6e1098bef2a71c1",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2500,
        "y": 200,
        "wires": []
    },
    {
        "id": "becb717b8e9a9bdb",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3770,
        "y": 660,
        "wires": []
    },
    {
        "id": "7f854d6ca1890d37",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2670,
        "y": 660,
        "wires": []
    },
    {
        "id": "5c3cfc70fb3c7b56",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3030,
        "y": 540,
        "wires": []
    },
    {
        "id": "8d882f8701c1e993",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3030,
        "y": 700,
        "wires": []
    },
    {
        "id": "a7f2972025c2b92c",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T5CT",
        "links": [
            "73bb712e082d3005",
            "601293bafe763d5e"
        ],
        "x": 2355,
        "y": 820,
        "wires": [
            [
                "345679addccc7bd3",
                "993aa56c6ba6adb5"
            ]
        ]
    },
    {
        "id": "8d1c31d66c536a2a",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3570,
        "y": 680,
        "wires": [
            [
                "b9257ec4d5272f59",
                "e12eaae2f2a998e6"
            ]
        ]
    },
    {
        "id": "b9257ec4d5272f59",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3700,
        "y": 620,
        "wires": [
            [
                "becb717b8e9a9bdb",
                "02b9c57bc072ddf7"
            ]
        ]
    },
    {
        "id": "e12eaae2f2a998e6",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3750,
        "y": 720,
        "wires": []
    },
    {
        "id": "087d48821da216ee",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter5= msg.payload.col3;\nmsg.msg_no16= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3420,
        "y": 620,
        "wires": [
            [
                "b9257ec4d5272f59"
            ]
        ]
    },
    {
        "id": "345679addccc7bd3",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2510,
        "y": 820,
        "wires": [
            [
                "38a6eb9f5ff6d881",
                "6c85067babd14c6e"
            ],
            [
                "6c85067babd14c6e"
            ],
            []
        ]
    },
    {
        "id": "38a6eb9f5ff6d881",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2710,
        "y": 793,
        "wires": []
    },
    {
        "id": "f920f5244c89a229",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2420,
        "y": 880,
        "wires": [
            [
                "345679addccc7bd3"
            ]
        ]
    },
    {
        "id": "6c85067babd14c6e",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2740,
        "y": 840,
        "wires": [
            [
                "9a76394d593f5531"
            ]
        ]
    },
    {
        "id": "9a76394d593f5531",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2930,
        "y": 840,
        "wires": [
            [
                "c841638b1586c88c"
            ]
        ]
    },
    {
        "id": "c841638b1586c88c",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3160,
        "y": 840,
        "wires": [
            [
                "a4d86ce238267b2f"
            ]
        ]
    },
    {
        "id": "a4d86ce238267b2f",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3390,
        "y": 840,
        "wires": [
            [
                "e721f754b9a28952"
            ],
            [
                "5cfc0e1fca44d64b"
            ]
        ]
    },
    {
        "id": "5cfc0e1fca44d64b",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T5CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3650,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "4cda0234c9d80ad3",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 2440,
        "y": 300,
        "wires": []
    },
    {
        "id": "c8b2017ba5d1a8a5",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3190,
        "y": 340,
        "wires": [
            [
                "95e7a363496bb2ef",
                "7c2f1dcbe6675436"
            ]
        ]
    },
    {
        "id": "95e7a363496bb2ef",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3370,
        "y": 340,
        "wires": []
    },
    {
        "id": "b63139b005a87a1b",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 2600,
        "y": 340,
        "wires": [
            [
                "0e719b521c2f94aa",
                "344ed6ac9ed8089a"
            ]
        ]
    },
    {
        "id": "0e719b521c2f94aa",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2780,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "23c6622396b66fb7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2370,
        "y": 580,
        "wires": []
    },
    {
        "id": "2acd40322d6142cc",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2490,
        "y": 753,
        "wires": []
    },
    {
        "id": "a6729741b152787f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2480,
        "y": 1000,
        "wires": []
    },
    {
        "id": "55271641ebd25e9c",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3770,
        "y": 580,
        "wires": []
    },
    {
        "id": "bd03a3902aaadaad",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2520,
        "y": 920,
        "wires": []
    },
    {
        "id": "77e9e2c1ca0304e8",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T5",
        "links": [
            "dd51cc3e525f6ebb"
        ],
        "x": 2395,
        "y": 240,
        "wires": [
            [
                "7c2f1dcbe6675436"
            ]
        ]
    },
    {
        "id": "7c2f1dcbe6675436",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T5CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2630,
        "y": 240,
        "wires": [
            [
                "18ec92c7b822bc7d",
                "5dd6d82d3d65556f"
            ]
        ]
    },
    {
        "id": "acd941c905ea61f5",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2990,
        "y": 240,
        "wires": [
            [
                "e95e69e79681af77"
            ],
            [
                "e39a0f1f48590e54"
            ]
        ]
    },
    {
        "id": "e95e69e79681af77",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3180,
        "y": 220,
        "wires": [
            [
                "4240a465b29a5a44"
            ]
        ]
    },
    {
        "id": "e39a0f1f48590e54",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3180,
        "y": 260,
        "wires": [
            [
                "cb7c420745eeb4cf"
            ]
        ]
    },
    {
        "id": "4240a465b29a5a44",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3330,
        "y": 220,
        "wires": [
            [
                "720a06beeb609519"
            ]
        ]
    },
    {
        "id": "cb7c420745eeb4cf",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3330,
        "y": 260,
        "wires": [
            [
                "720a06beeb609519"
            ]
        ]
    },
    {
        "id": "18ec92c7b822bc7d",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2820,
        "y": 240,
        "wires": [
            [
                "acd941c905ea61f5"
            ]
        ]
    },
    {
        "id": "02b9c57bc072ddf7",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T5CT",
        "links": [
            "8c72a51d2596d762"
        ],
        "x": 3955,
        "y": 620,
        "wires": []
    },
    {
        "id": "3083aa66a88ba42e",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2380,
        "y": 420,
        "wires": [
            [
                "b63139b005a87a1b"
            ]
        ]
    },
    {
        "id": "6dabf7234b5542fa",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2380,
        "y": 460,
        "wires": [
            [
                "b63139b005a87a1b"
            ]
        ]
    },
    {
        "id": "6af296202f3b3949",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2370,
        "y": 340,
        "wires": [
            [
                "b63139b005a87a1b"
            ]
        ]
    },
    {
        "id": "90c418373e6a7fd4",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2370,
        "y": 380,
        "wires": [
            [
                "b63139b005a87a1b"
            ]
        ]
    },
    {
        "id": "462e0f99773bf94b",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3250,
        "y": 620,
        "wires": [
            [
                "087d48821da216ee"
            ]
        ]
    },
    {
        "id": "5dd6d82d3d65556f",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2810,
        "y": 200,
        "wires": []
    },
    {
        "id": "4dfdac7e51dacb8f",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3060,
        "y": 620,
        "wires": [
            [
                "462e0f99773bf94b"
            ]
        ]
    },
    {
        "id": "344ed6ac9ed8089a",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2790,
        "y": 420,
        "wires": []
    },
    {
        "id": "dc571701982fdc21",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2510,
        "y": 720,
        "wires": []
    },
    {
        "id": "d4be5bf3d330a8bf",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2470,
        "y": 160,
        "wires": []
    },
    {
        "id": "a008be3115ea3d4c",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2860,
        "y": 1080,
        "wires": [
            [
                "345679addccc7bd3"
            ]
        ]
    },
    {
        "id": "f5dfc63cd4cb7549",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2420,
        "y": 1840,
        "wires": [
            [
                "59f34b92219e1059"
            ]
        ]
    },
    {
        "id": "59f34b92219e1059",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2610,
        "y": 1840,
        "wires": [
            [
                "8454dd2c213fb532",
                "2b79ff15e34b4a3d"
            ]
        ]
    },
    {
        "id": "5e70458bbe2c05d1",
        "type": "function",
        "z": "c75d39e13962320f",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3040,
        "y": 1880,
        "wires": [
            [
                "1b2c3a31cc68f4c8"
            ]
        ]
    },
    {
        "id": "718f6066941c30f6",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3510,
        "y": 2020,
        "wires": [
            [
                "f20b0efc1ca13e68"
            ]
        ]
    },
    {
        "id": "f20b0efc1ca13e68",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3750,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "0a80b233bf2c73a3",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2260,
        "y": 1840,
        "wires": [
            [
                "f5dfc63cd4cb7549"
            ]
        ]
    },
    {
        "id": "59b549b6bf1499a4",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3150,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "2b79ff15e34b4a3d",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2790,
        "y": 1840,
        "wires": [
            [
                "5e70458bbe2c05d1",
                "269216f0a31ce4e6",
                "ddd6e4e30eca15e2"
            ],
            [
                "8bd07d68f41a53df"
            ]
        ]
    },
    {
        "id": "2cba7f9d52d71726",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2290,
        "y": 2420,
        "wires": [
            [
                "59b549b6bf1499a4"
            ]
        ]
    },
    {
        "id": "b30ca45820706e0b",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2440,
        "y": 2300,
        "wires": [
            [
                "75d863eb5e89c519"
            ]
        ]
    },
    {
        "id": "75d863eb5e89c519",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2640,
        "y": 2300,
        "wires": [
            [
                "592f5b3e503127c5"
            ]
        ]
    },
    {
        "id": "ebe2564c6ddcb231",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2280,
        "y": 2300,
        "wires": [
            [
                "b30ca45820706e0b"
            ]
        ]
    },
    {
        "id": "72b6603b6199a0cf",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "DELETE FILE",
        "info": "",
        "x": 2270,
        "y": 2380,
        "wires": []
    },
    {
        "id": "d317f24101c69eab",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2620,
        "y": 1800,
        "wires": []
    },
    {
        "id": "1d857dd4dc77d88f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2330,
        "y": 2260,
        "wires": []
    },
    {
        "id": "144420ee8ffd2444",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2460,
        "y": 1420,
        "wires": []
    },
    {
        "id": "c1c92a710f2696fc",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3730,
        "y": 1880,
        "wires": []
    },
    {
        "id": "8454dd2c213fb532",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2630,
        "y": 1880,
        "wires": []
    },
    {
        "id": "269216f0a31ce4e6",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2990,
        "y": 1760,
        "wires": []
    },
    {
        "id": "8bd07d68f41a53df",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2990,
        "y": 1920,
        "wires": []
    },
    {
        "id": "66eeb7a3085874f0",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "receive server respond T6CT",
        "links": [
            "fc7cd403c723c6b3",
            "43ec8aa16aa9500c"
        ],
        "x": 2315,
        "y": 2040,
        "wires": [
            [
                "8ea64a47da498af3",
                "bf9ff3ebaba9b9d0"
            ]
        ]
    },
    {
        "id": "575a853e97dec544",
        "type": "json",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3530,
        "y": 1900,
        "wires": [
            [
                "b7d721755bc38005",
                "ddadc76492e9d6d1"
            ]
        ]
    },
    {
        "id": "b7d721755bc38005",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3660,
        "y": 1840,
        "wires": [
            [
                "c1c92a710f2696fc",
                "a662a52049352287"
            ]
        ]
    },
    {
        "id": "ddadc76492e9d6d1",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3710,
        "y": 1920,
        "wires": []
    },
    {
        "id": "1b2c3a31cc68f4c8",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter6= msg.payload.col3;\nmsg.msg_no17= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3380,
        "y": 1840,
        "wires": [
            [
                "b7d721755bc38005"
            ]
        ]
    },
    {
        "id": "8ea64a47da498af3",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2470,
        "y": 2040,
        "wires": [
            [
                "2cc4991e3044e6df",
                "3aac619ad6d19a60"
            ],
            [
                "3aac619ad6d19a60"
            ],
            []
        ]
    },
    {
        "id": "2cc4991e3044e6df",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2670,
        "y": 2013,
        "wires": []
    },
    {
        "id": "3eb705082e6b73f1",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2380,
        "y": 2100,
        "wires": [
            [
                "8ea64a47da498af3"
            ]
        ]
    },
    {
        "id": "3aac619ad6d19a60",
        "type": "file in",
        "z": "c75d39e13962320f",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2700,
        "y": 2060,
        "wires": [
            [
                "7aad40fe310e5217"
            ]
        ]
    },
    {
        "id": "7aad40fe310e5217",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2890,
        "y": 2060,
        "wires": [
            [
                "48f7da0fdb13de59"
            ]
        ]
    },
    {
        "id": "48f7da0fdb13de59",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3120,
        "y": 2060,
        "wires": [
            [
                "ea618a33414af5b1"
            ]
        ]
    },
    {
        "id": "ea618a33414af5b1",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3350,
        "y": 2060,
        "wires": [
            [
                "718f6066941c30f6"
            ],
            [
                "511f349795b8bcaf"
            ]
        ]
    },
    {
        "id": "511f349795b8bcaf",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T6CT.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3610,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "33d5585987905d82",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "MANUAL",
        "info": " ",
        "x": 2400,
        "y": 1520,
        "wires": []
    },
    {
        "id": "d8db644a2488cd72",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3150,
        "y": 1560,
        "wires": [
            [
                "91ec408e43e2ef1b",
                "da3dc05c49b0d042"
            ]
        ]
    },
    {
        "id": "91ec408e43e2ef1b",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3330,
        "y": 1560,
        "wires": []
    },
    {
        "id": "dae499ed196c665a",
        "type": "counter",
        "z": "c75d39e13962320f",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 2560,
        "y": 1560,
        "wires": [
            [
                "9f623c1c384dee4d",
                "a2c4495557abde48"
            ]
        ]
    },
    {
        "id": "9f623c1c384dee4d",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2740,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "3dd40efd3a08e364",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2330,
        "y": 1800,
        "wires": []
    },
    {
        "id": "a2099aac2c883dd7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2450,
        "y": 1973,
        "wires": []
    },
    {
        "id": "7292329f36722149",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2440,
        "y": 2220,
        "wires": []
    },
    {
        "id": "ee03dc952afef57e",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3730,
        "y": 1800,
        "wires": []
    },
    {
        "id": "2866abc955e1b9af",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2480,
        "y": 2140,
        "wires": []
    },
    {
        "id": "3b1da4e92b647f2c",
        "type": "link in",
        "z": "c75d39e13962320f",
        "name": "INQUEUE-T6",
        "links": [
            "a8730927a095ddf3"
        ],
        "x": 2355,
        "y": 1460,
        "wires": [
            [
                "da3dc05c49b0d042"
            ]
        ]
    },
    {
        "id": "da3dc05c49b0d042",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T6CT.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2590,
        "y": 1460,
        "wires": [
            [
                "2b6472685e7ce19f",
                "1d6e48c03840f1a7"
            ]
        ]
    },
    {
        "id": "b6536d8c773c4eee",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2950,
        "y": 1460,
        "wires": [
            [
                "38e417e815afd79c"
            ],
            [
                "7f9ca218738cf8b8"
            ]
        ]
    },
    {
        "id": "38e417e815afd79c",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3140,
        "y": 1440,
        "wires": [
            [
                "3d52af5a797ae33b"
            ]
        ]
    },
    {
        "id": "7f9ca218738cf8b8",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3140,
        "y": 1480,
        "wires": [
            [
                "39d1658a3a0055fe"
            ]
        ]
    },
    {
        "id": "3d52af5a797ae33b",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3290,
        "y": 1440,
        "wires": [
            [
                "087696893e7746a0"
            ]
        ]
    },
    {
        "id": "39d1658a3a0055fe",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3290,
        "y": 1480,
        "wires": [
            [
                "087696893e7746a0"
            ]
        ]
    },
    {
        "id": "2b6472685e7ce19f",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2780,
        "y": 1460,
        "wires": [
            [
                "b6536d8c773c4eee"
            ]
        ]
    },
    {
        "id": "a662a52049352287",
        "type": "link out",
        "z": "c75d39e13962320f",
        "name": "request to server resp T6CT",
        "links": [
            "bca38c4cb6a69932"
        ],
        "x": 3915,
        "y": 1840,
        "wires": []
    },
    {
        "id": "5ab2c9a51439befb",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2340,
        "y": 1640,
        "wires": [
            [
                "dae499ed196c665a"
            ]
        ]
    },
    {
        "id": "fdcfd6dbb12295c5",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2340,
        "y": 1680,
        "wires": [
            [
                "dae499ed196c665a"
            ]
        ]
    },
    {
        "id": "0f1b5681bd7335ad",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2330,
        "y": 1560,
        "wires": [
            [
                "dae499ed196c665a"
            ]
        ]
    },
    {
        "id": "d28b6eae0243d4dd",
        "type": "inject",
        "z": "c75d39e13962320f",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2330,
        "y": 1600,
        "wires": [
            [
                "dae499ed196c665a"
            ]
        ]
    },
    {
        "id": "f9491fdb193175da",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3210,
        "y": 1840,
        "wires": [
            [
                "1b2c3a31cc68f4c8"
            ]
        ]
    },
    {
        "id": "1d6e48c03840f1a7",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2770,
        "y": 1420,
        "wires": []
    },
    {
        "id": "ddd6e4e30eca15e2",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3020,
        "y": 1840,
        "wires": [
            [
                "f9491fdb193175da"
            ]
        ]
    },
    {
        "id": "a2c4495557abde48",
        "type": "debug",
        "z": "c75d39e13962320f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2750,
        "y": 1640,
        "wires": []
    },
    {
        "id": "f0da1f50673c070f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2470,
        "y": 1940,
        "wires": []
    },
    {
        "id": "574437a04acbd025",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2430,
        "y": 1380,
        "wires": []
    },
    {
        "id": "592f5b3e503127c5",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2820,
        "y": 2300,
        "wires": [
            [
                "8ea64a47da498af3"
            ]
        ]
    },
    {
        "id": "0965a305d7a4b99d",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP1",
        "info": "",
        "x": 110,
        "y": 100,
        "wires": []
    },
    {
        "id": "040a5493de3c723f",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP2",
        "info": "",
        "x": 130,
        "y": 1340,
        "wires": []
    },
    {
        "id": "a2a35a578835f3f4",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP3",
        "info": "",
        "x": 130,
        "y": 2520,
        "wires": []
    },
    {
        "id": "b029b6fb365745ad",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP4",
        "info": "",
        "x": 130,
        "y": 3700,
        "wires": []
    },
    {
        "id": "244304e06ca6d157",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP5",
        "info": "",
        "x": 2230,
        "y": 120,
        "wires": []
    },
    {
        "id": "04dbcbcd93bf5147",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "TEMP6",
        "info": "",
        "x": 2190,
        "y": 1340,
        "wires": []
    },
    {
        "id": "720a06beeb609519",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3490,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "087696893e7746a0",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3450,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "0d123e1cfd563151",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1410,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "33ab9f80859904cd",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1390,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "41761854d6211fa2",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1370,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "8e0011111325b254",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1390,
        "y": 3760,
        "wires": [
            []
        ]
    },
    {
        "id": "f1570963ca2ac601",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp1_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 980,
        "wires": [
            [
                "d3a1d6c8752daa5a"
            ]
        ]
    },
    {
        "id": "cdf19fabea4661d7",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1340,
        "y": 980,
        "wires": [
            [
                "efe63dc28beef807"
            ],
            [
                "f74d9eb3a861e12d"
            ]
        ]
    },
    {
        "id": "efe63dc28beef807",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 960,
        "wires": [
            [
                "60ce29c8e99809c6"
            ]
        ]
    },
    {
        "id": "f74d9eb3a861e12d",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 1000,
        "wires": [
            [
                "2dc2cc420bb50a74"
            ]
        ]
    },
    {
        "id": "9b4e886a782b4bb4",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1820,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "d3a1d6c8752daa5a",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1170,
        "y": 980,
        "wires": [
            [
                "cdf19fabea4661d7"
            ]
        ]
    },
    {
        "id": "6d66d32e3d10b0f2",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1080,
        "y": 940,
        "wires": []
    },
    {
        "id": "2dc2cc420bb50a74",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1700,
        "y": 1000,
        "wires": [
            [
                "9b4e886a782b4bb4"
            ]
        ]
    },
    {
        "id": "60ce29c8e99809c6",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1700,
        "y": 960,
        "wires": [
            [
                "9b4e886a782b4bb4"
            ]
        ]
    },
    {
        "id": "e801d98309f6b1b8",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter1",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 800,
        "y": 900,
        "wires": [
            [
                "f1570963ca2ac601"
            ]
        ]
    },
    {
        "id": "47a750223ecbbb66",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp2_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 2220,
        "wires": [
            [
                "98675a72dbe6660f"
            ]
        ]
    },
    {
        "id": "7f31827e44fcf61d",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1360,
        "y": 2220,
        "wires": [
            [
                "c48f370f91beb317"
            ],
            [
                "87edf88e9b2eeaae"
            ]
        ]
    },
    {
        "id": "c48f370f91beb317",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 2200,
        "wires": [
            [
                "a423ec46350cc513"
            ]
        ]
    },
    {
        "id": "87edf88e9b2eeaae",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 2240,
        "wires": [
            [
                "afc35c50f8869c17"
            ]
        ]
    },
    {
        "id": "9884cd6dccdcc2a2",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1840,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "98675a72dbe6660f",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1190,
        "y": 2220,
        "wires": [
            [
                "7f31827e44fcf61d"
            ]
        ]
    },
    {
        "id": "ba8e9c4308f119a6",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1100,
        "y": 2180,
        "wires": []
    },
    {
        "id": "afc35c50f8869c17",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1720,
        "y": 2240,
        "wires": [
            [
                "9884cd6dccdcc2a2"
            ]
        ]
    },
    {
        "id": "a423ec46350cc513",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1720,
        "y": 2200,
        "wires": [
            [
                "9884cd6dccdcc2a2"
            ]
        ]
    },
    {
        "id": "09ad8f575552eaf6",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter2",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 2140,
        "wires": [
            [
                "47a750223ecbbb66"
            ]
        ]
    },
    {
        "id": "52afe41c3cfd780c",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp3_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 3400,
        "wires": [
            [
                "c6e49536512e7c58"
            ]
        ]
    },
    {
        "id": "2c79df395c260173",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1340,
        "y": 3400,
        "wires": [
            [
                "822f9071b3713fd4"
            ],
            [
                "5e4fe55a7cd15166"
            ]
        ]
    },
    {
        "id": "822f9071b3713fd4",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 3380,
        "wires": [
            [
                "9eb4095cf1d50c51"
            ]
        ]
    },
    {
        "id": "5e4fe55a7cd15166",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 3420,
        "wires": [
            [
                "34abba631bf760ae"
            ]
        ]
    },
    {
        "id": "7864934b6200cd01",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1820,
        "y": 3400,
        "wires": [
            []
        ]
    },
    {
        "id": "c6e49536512e7c58",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1170,
        "y": 3400,
        "wires": [
            [
                "2c79df395c260173"
            ]
        ]
    },
    {
        "id": "b5a69cc2f1622efc",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1080,
        "y": 3360,
        "wires": []
    },
    {
        "id": "34abba631bf760ae",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1700,
        "y": 3420,
        "wires": [
            [
                "7864934b6200cd01"
            ]
        ]
    },
    {
        "id": "9eb4095cf1d50c51",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1700,
        "y": 3380,
        "wires": [
            [
                "7864934b6200cd01"
            ]
        ]
    },
    {
        "id": "feb458e969e3ef31",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter3",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 800,
        "y": 3320,
        "wires": [
            [
                "52afe41c3cfd780c"
            ]
        ]
    },
    {
        "id": "b86221f2cfe0ad0a",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp4_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 4580,
        "wires": [
            [
                "8f4dc6ed9c15c966"
            ]
        ]
    },
    {
        "id": "680ac49c29c9253c",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1360,
        "y": 4580,
        "wires": [
            [
                "d6fdaef9b726a263"
            ],
            [
                "5568e2eaee9f5fbc"
            ]
        ]
    },
    {
        "id": "d6fdaef9b726a263",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 4560,
        "wires": [
            [
                "b2cc22f5d49a9c0e"
            ]
        ]
    },
    {
        "id": "5568e2eaee9f5fbc",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1550,
        "y": 4600,
        "wires": [
            [
                "1bc70de0794700a3"
            ]
        ]
    },
    {
        "id": "7b122962a1a501e4",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1840,
        "y": 4580,
        "wires": [
            []
        ]
    },
    {
        "id": "8f4dc6ed9c15c966",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1190,
        "y": 4580,
        "wires": [
            [
                "680ac49c29c9253c"
            ]
        ]
    },
    {
        "id": "c4ddcd69a71e78b7",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1100,
        "y": 4540,
        "wires": []
    },
    {
        "id": "1bc70de0794700a3",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1720,
        "y": 4600,
        "wires": [
            [
                "7b122962a1a501e4"
            ]
        ]
    },
    {
        "id": "b2cc22f5d49a9c0e",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1720,
        "y": 4560,
        "wires": [
            [
                "7b122962a1a501e4"
            ]
        ]
    },
    {
        "id": "3b45e87da739a804",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter4",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 820,
        "y": 4500,
        "wires": [
            [
                "b86221f2cfe0ad0a"
            ]
        ]
    },
    {
        "id": "e8e68fa3ea3cc379",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp5_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3110,
        "y": 1000,
        "wires": [
            [
                "5605a42e400f4dc2"
            ]
        ]
    },
    {
        "id": "074a3bad31592432",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3460,
        "y": 1000,
        "wires": [
            [
                "d65d0209595b5a54"
            ],
            [
                "34fc204815e3395b"
            ]
        ]
    },
    {
        "id": "d65d0209595b5a54",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3650,
        "y": 980,
        "wires": [
            [
                "58117a1b4a0469a2"
            ]
        ]
    },
    {
        "id": "34fc204815e3395b",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3650,
        "y": 1020,
        "wires": [
            [
                "a052abd4bcf46212"
            ]
        ]
    },
    {
        "id": "c398279c941e6f75",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3940,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "5605a42e400f4dc2",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3290,
        "y": 1000,
        "wires": [
            [
                "074a3bad31592432"
            ]
        ]
    },
    {
        "id": "1a1e18c10f95aa46",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3200,
        "y": 960,
        "wires": []
    },
    {
        "id": "a052abd4bcf46212",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3820,
        "y": 1020,
        "wires": [
            [
                "c398279c941e6f75"
            ]
        ]
    },
    {
        "id": "58117a1b4a0469a2",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3820,
        "y": 980,
        "wires": [
            [
                "c398279c941e6f75"
            ]
        ]
    },
    {
        "id": "993aa56c6ba6adb5",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter5",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2920,
        "y": 920,
        "wires": [
            [
                "e8e68fa3ea3cc379"
            ]
        ]
    },
    {
        "id": "f53ad83eebe44355",
        "type": "function",
        "z": "c75d39e13962320f",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_cttemp6_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3070,
        "y": 2220,
        "wires": [
            [
                "999111b1c0b4b877"
            ]
        ]
    },
    {
        "id": "0513f7e7307aebb0",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3420,
        "y": 2220,
        "wires": [
            [
                "dd8ad040aa42ff64"
            ],
            [
                "d6422b984157d0ea"
            ]
        ]
    },
    {
        "id": "dd8ad040aa42ff64",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3610,
        "y": 2200,
        "wires": [
            [
                "9dbffdf14d4c421c"
            ]
        ]
    },
    {
        "id": "d6422b984157d0ea",
        "type": "change",
        "z": "c75d39e13962320f",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3610,
        "y": 2240,
        "wires": [
            [
                "83f5a37510a667b6"
            ]
        ]
    },
    {
        "id": "9b2f68fed53c931a",
        "type": "file",
        "z": "c75d39e13962320f",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3900,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "999111b1c0b4b877",
        "type": "fs-file-lister",
        "z": "c75d39e13962320f",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3250,
        "y": 2220,
        "wires": [
            [
                "0513f7e7307aebb0"
            ]
        ]
    },
    {
        "id": "637b355bb3a67d6e",
        "type": "comment",
        "z": "c75d39e13962320f",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3160,
        "y": 2180,
        "wires": []
    },
    {
        "id": "83f5a37510a667b6",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3780,
        "y": 2240,
        "wires": [
            [
                "9b2f68fed53c931a"
            ]
        ]
    },
    {
        "id": "9dbffdf14d4c421c",
        "type": "csv",
        "z": "c75d39e13962320f",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3780,
        "y": 2200,
        "wires": [
            [
                "9b2f68fed53c931a"
            ]
        ]
    },
    {
        "id": "bf9ff3ebaba9b9d0",
        "type": "switch",
        "z": "c75d39e13962320f",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter6",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2880,
        "y": 2140,
        "wires": [
            [
                "f53ad83eebe44355"
            ]
        ]
    },
    {
        "id": "ed63d0f484abf9c0",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "READ ME FIRST!!!!!!",
        "info": "**MAKE SURE THE AUTO - RESET IS WORKING. MAKE SURE MACHINE NUMBER IS ALREADY SET FOR THIS PARTICULAR MACHINE AND ASSOCIATED IP ADDRESS. CHECK THE TIMER COUNT FOR MAINTENANCE AND PRODCTION/DIECHANGE STATUS WHETHER IT IS CORRECTLY CONFIGURED e.g. 5min/10min**",
        "x": 440,
        "y": 260,
        "wires": []
    },
    {
        "id": "b663a9fa48c8fa72",
        "type": "ui_template",
        "z": "c06c5b4f567b90fc",
        "group": "4ee4d39fa351df70",
        "name": "",
        "order": 1,
        "width": 10,
        "height": 11,
        "format": "<div style=\"text-align: justify;\"> \n<b style=\"color:red;\">Important Note:</b> <br>\n<b> ENSURE THAT THE MACHINE & ROOM IS ALREADY SET AS GLOBAL VARIABLE</b> <br>\nFirstly, make sure to <b>RESET</b> first. \nIt's already configured to auto - reset (inject once node),it will take few seconds to reset all. \n<br>\n<b>PS = 0 Timer</b><br>\nTimer (period can be changed) will be triggered if 0 input is given by using count. If input 1 is given, the timer will be reset.\n<br>\n<b>PS Status Green</b><br>\nIf there is a signal from machine (changes of 1/0), the Green Lamp/LED will turn on. \n<br>\n<b>PS Status RED</b><br>\nIf there is no signal from machine for a period of time, the Red Lamp/LED will turn on while Green Lamp will turn off.\n<br>\n<b> Temp&hum status</b><br>\nIf click inject random number will be generate for temperature & humidity<br>\n<br>\n<b>Vibration</b><br>\nIf click inject random number will be generate for vibration.<br>\n\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 620,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "cfb16a3c93ed5949",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "CHILLER",
        "info": "",
        "x": 400,
        "y": 160,
        "wires": []
    },
    {
        "id": "e40aac737b65d180",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "temp1",
        "mode": "link",
        "links": [
            "4c1f4816c514bc04",
            "2b0eb0cddda339fe"
        ],
        "x": 2055,
        "y": 380,
        "wires": []
    },
    {
        "id": "52dfe676d60640f2",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "temp2",
        "mode": "link",
        "links": [
            "0c9224a61d7a01bb",
            "f15809ded504029e"
        ],
        "x": 2035,
        "y": 540,
        "wires": []
    },
    {
        "id": "aaa36965bb527808",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "PARAMETER: TEMPERATURE",
        "info": "",
        "x": 470,
        "y": 320,
        "wires": []
    },
    {
        "id": "8a7359475b6b5e80",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1560,
        "y": 380,
        "wires": [
            [
                "060e5c195168783d"
            ]
        ]
    },
    {
        "id": "060e5c195168783d",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1730,
        "y": 380,
        "wires": [
            [
                "77d2f75426a543b7"
            ]
        ]
    },
    {
        "id": "77d2f75426a543b7",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no1",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1910,
        "y": 380,
        "wires": [
            [
                "e40aac737b65d180",
                "6d4cc121ac24b25f"
            ]
        ]
    },
    {
        "id": "988fc8ae54dc80aa",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1435,
        "y": 340,
        "wires": [
            [
                "8a7359475b6b5e80"
            ]
        ]
    },
    {
        "id": "507af2be689c6c1d",
        "type": "inject",
        "z": "c06c5b4f567b90fc",
        "name": "Reset message no.",
        "props": [
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "10 00 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1300,
        "y": 140,
        "wires": [
            [
                "af3b613a3d01125c"
            ]
        ]
    },
    {
        "id": "af3b613a3d01125c",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "RST MSG CH",
        "mode": "link",
        "links": [
            "c1cb0e7b07fbb478",
            "988fc8ae54dc80aa",
            "80abaaf9dad86e64",
            "9b5cfbd4a6c59716",
            "5e81ef9eebff61e4",
            "1dd4294668200d31",
            "db85ed78f062eb51",
            "18de054d9407e2a7",
            "aa9ddb22eb1a265c",
            "f5be89fe297124a7",
            "ffd46f143631806f",
            "562aaff203d91ebe",
            "ac0c5a0d46b09047",
            "cdfe43749f6d711b",
            "6e1e1326d147bef0",
            "cf5d2426e9185d29"
        ],
        "x": 1475,
        "y": 140,
        "wires": []
    },
    {
        "id": "049870cac098dfe2",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1540,
        "y": 540,
        "wires": [
            [
                "66fde2e05c3a1354"
            ]
        ]
    },
    {
        "id": "66fde2e05c3a1354",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1690,
        "y": 540,
        "wires": [
            [
                "c21ca63fb8d5226b"
            ]
        ]
    },
    {
        "id": "c21ca63fb8d5226b",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no2",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1890,
        "y": 540,
        "wires": [
            [
                "52dfe676d60640f2",
                "b335731dd67ab249"
            ]
        ]
    },
    {
        "id": "5e81ef9eebff61e4",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1455,
        "y": 460,
        "wires": [
            [
                "049870cac098dfe2"
            ]
        ]
    },
    {
        "id": "2535e51a0496f92f",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "T11-TEMP3",
        "diff": false,
        "name": "",
        "x": 410,
        "y": 380,
        "wires": [
            [
                "7c162d0fb6d09c73"
            ]
        ]
    },
    {
        "id": "429765440e8a5760",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "T12-TEMP2",
        "diff": false,
        "name": "",
        "x": 410,
        "y": 540,
        "wires": [
            [
                "6d73e50fbc8308e6"
            ]
        ]
    },
    {
        "id": "a847fbfcdc218b7c",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "temp3",
        "mode": "link",
        "links": [
            "41d8b1ba2921bc4f",
            "dc04051a7d3d28b9"
        ],
        "x": 2045,
        "y": 660,
        "wires": []
    },
    {
        "id": "acded58a08502b8e",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1570,
        "y": 660,
        "wires": [
            [
                "6b503c0c60bdc6c6"
            ]
        ]
    },
    {
        "id": "6b503c0c60bdc6c6",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1740,
        "y": 660,
        "wires": [
            [
                "2f7d634ef922d392"
            ]
        ]
    },
    {
        "id": "2f7d634ef922d392",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no3",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1920,
        "y": 660,
        "wires": [
            [
                "a847fbfcdc218b7c"
            ]
        ]
    },
    {
        "id": "1dd4294668200d31",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1445,
        "y": 620,
        "wires": [
            [
                "acded58a08502b8e"
            ]
        ]
    },
    {
        "id": "b3110339553a826f",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "T13-TEMP1",
        "diff": false,
        "name": "",
        "x": 430,
        "y": 660,
        "wires": [
            [
                "e83debd9e0bba6c6"
            ]
        ]
    },
    {
        "id": "feee8355eb594a11",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 380,
        "wires": [
            [
                "8a7359475b6b5e80"
            ]
        ]
    },
    {
        "id": "26bcb0b41db7a3c6",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 540,
        "wires": [
            [
                "049870cac098dfe2"
            ]
        ]
    },
    {
        "id": "7d53a64849d55619",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 660,
        "wires": [
            [
                "acded58a08502b8e"
            ]
        ]
    },
    {
        "id": "6d4cc121ac24b25f",
        "type": "debug",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1970,
        "y": 440,
        "wires": []
    },
    {
        "id": "f422cc982ad87c07",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "flow1",
        "mode": "link",
        "links": [
            "153ca455fd931031",
            "5133f9abbcab8954",
            "3b9cf3f32c7b1a68"
        ],
        "x": 2065,
        "y": 900,
        "wires": []
    },
    {
        "id": "153d205434ae4204",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "flow2",
        "mode": "link",
        "links": [
            "8eda8448a05e6476",
            "843c089200fe66dd",
            "ada235be1efe14f2"
        ],
        "x": 2025,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e93d4f52d31d1c79",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "PARAMETER: FLOW RATE",
        "info": "",
        "x": 260,
        "y": 840,
        "wires": []
    },
    {
        "id": "c0252598623b3f35",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1550,
        "y": 900,
        "wires": [
            [
                "f1ddbec4842ec7b4"
            ]
        ]
    },
    {
        "id": "f1ddbec4842ec7b4",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1720,
        "y": 900,
        "wires": [
            [
                "03e8b3307b72a747"
            ]
        ]
    },
    {
        "id": "03e8b3307b72a747",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no9",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1900,
        "y": 900,
        "wires": [
            [
                "f422cc982ad87c07",
                "7a66e54da66c2fb0"
            ]
        ]
    },
    {
        "id": "aa9ddb22eb1a265c",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1425,
        "y": 860,
        "wires": [
            [
                "c0252598623b3f35"
            ]
        ]
    },
    {
        "id": "f50b6435373eba44",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1530,
        "y": 1060,
        "wires": [
            [
                "baabd7d9b2c6eda7"
            ]
        ]
    },
    {
        "id": "baabd7d9b2c6eda7",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1680,
        "y": 1060,
        "wires": [
            [
                "d436ea15d5a447b8"
            ]
        ]
    },
    {
        "id": "d436ea15d5a447b8",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no10",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1880,
        "y": 1060,
        "wires": [
            [
                "153d205434ae4204"
            ]
        ]
    },
    {
        "id": "c1cb0e7b07fbb478",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1445,
        "y": 980,
        "wires": [
            [
                "f50b6435373eba44"
            ]
        ]
    },
    {
        "id": "d391cf5da66bd4cd",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "F1-CH",
        "diff": false,
        "name": "",
        "x": 190,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "9812af7c03418288",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "F2-CH",
        "diff": false,
        "name": "",
        "x": 190,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "0d24d0d720f9313c",
        "type": "link out",
        "z": "c06c5b4f567b90fc",
        "name": "flow3",
        "mode": "link",
        "links": [
            "a4fa1b6742219bd8",
            "36335df95b9d048f",
            "a4d63ddcdf995cc6"
        ],
        "x": 2035,
        "y": 1180,
        "wires": []
    },
    {
        "id": "b1e7229f7cba8ad5",
        "type": "counter",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "init": "0",
        "step": 1,
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": 1,
        "x": 1560,
        "y": 1180,
        "wires": [
            [
                "d5ffb6bfeffb9c3a"
            ]
        ]
    },
    {
        "id": "d5ffb6bfeffb9c3a",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1730,
        "y": 1180,
        "wires": [
            [
                "8ac3a0d23deca982"
            ]
        ]
    },
    {
        "id": "8ac3a0d23deca982",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "msg_no11",
                "pt": "msg",
                "to": "count",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1910,
        "y": 1180,
        "wires": [
            [
                "0d24d0d720f9313c"
            ]
        ]
    },
    {
        "id": "18de054d9407e2a7",
        "type": "link in",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "links": [
            "af3b613a3d01125c",
            "7ce6298e1afa9578",
            "5b8fba1b7dcc7a7e",
            "c454665a0baf2c5f",
            "e7cd848568f7096e",
            "8907e54582cb1cc4",
            "3341765e48f41419",
            "240b135fd12bb397",
            "87314e0e563538a1",
            "badcf9bccb0a307f",
            "f9d1157eed9a9d30",
            "a15cf84e3be7ed7f",
            "b6fd62aa4fcbf0c9",
            "f25f7e0663454557",
            "404be73765e73e1e",
            "d978b2940a8cd2a4",
            "89a1bbf5f3f6055e",
            "45a1ccc0a54f6c25",
            "d7252af7dfdc6a51",
            "75a14c903d91acff",
            "cb8bbd36c8a110b9",
            "999adf5e952f0e69",
            "c9e461f1c18bc404",
            "921b499f8dda0cbd",
            "fd891500db7851ee",
            "06e08acbf316e257",
            "9b89ddad422bd8cc",
            "2b768a806e09ece6",
            "133668ff1010764d",
            "3ef5291da0ff6cf5",
            "d91e180e3db91fe4",
            "a390b95fdc6d2cee",
            "8d4cbe9803da0e95",
            "a1d5bad96eceb58b",
            "881bbe8df1289a75",
            "b1737738f28588e0",
            "c202e0ee8ce13e02",
            "0e67c4461eaf964f",
            "ffb9080f52899fce",
            "61fafc439aa9c98f",
            "f88a743e8b0283d1",
            "02b19c642ce7a0b3",
            "5ed660dd4b3765e5",
            "3677d90b875fd1e0",
            "a0bc5b6294708588",
            "257159cca080768a",
            "351e71808d3e97f4",
            "c77556b5f8c2c1c9",
            "20bc6f15c2906716",
            "90d8128100ac92af"
        ],
        "x": 1435,
        "y": 1140,
        "wires": [
            [
                "b1e7229f7cba8ad5"
            ]
        ]
    },
    {
        "id": "243d428ad1169f30",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "F3-CH",
        "diff": false,
        "name": "",
        "x": 190,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "5dac5a2b6cf2ada9",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "flow",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 900,
        "wires": [
            [
                "c0252598623b3f35"
            ]
        ]
    },
    {
        "id": "44ba20481ac714bb",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "flow",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1060,
        "wires": [
            [
                "f50b6435373eba44"
            ]
        ]
    },
    {
        "id": "1114b83a5168c988",
        "type": "change",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "flow",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 1180,
        "wires": [
            [
                "b1e7229f7cba8ad5"
            ]
        ]
    },
    {
        "id": "7a66e54da66c2fb0",
        "type": "debug",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1960,
        "y": 960,
        "wires": []
    },
    {
        "id": "c1242d6bd6ce7d55",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 380,
        "wires": [
            [
                "f078cbca85e9a4bc"
            ]
        ]
    },
    {
        "id": "df9f3967c9593380",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 540,
        "wires": [
            [
                "9419531a7658fb0c"
            ]
        ]
    },
    {
        "id": "6f19261212528c2d",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 660,
        "wires": [
            [
                "29ab4ee08c8893f6"
            ]
        ]
    },
    {
        "id": "40aee507f59aa798",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 860,
        "y": 900,
        "wires": [
            [
                "b44784ef793c41e8"
            ]
        ]
    },
    {
        "id": "cf7aefb1129f8d9a",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 860,
        "y": 1060,
        "wires": [
            [
                "351a1fc17fe4f1a2"
            ]
        ]
    },
    {
        "id": "c91e8490a1e9f421",
        "type": "delay",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 860,
        "y": 1180,
        "wires": [
            [
                "d6df839f37301cb8"
            ]
        ]
    },
    {
        "id": "b335731dd67ab249",
        "type": "debug",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1970,
        "y": 600,
        "wires": []
    },
    {
        "id": "7c162d0fb6d09c73",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 380,
        "wires": [
            [
                "c1242d6bd6ce7d55",
                "71d052be8df21e95"
            ]
        ]
    },
    {
        "id": "6d73e50fbc8308e6",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 600,
        "y": 540,
        "wires": [
            [
                "df9f3967c9593380"
            ]
        ]
    },
    {
        "id": "e83debd9e0bba6c6",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "func": "// Convert the number\n//var convertedNumber = msg.payload / 10;\n\n// Format to 2 decimal places and convert back to number\nmsg.payload = Number(msg.payload.toFixed(2));\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 660,
        "wires": [
            [
                "6f19261212528c2d"
            ]
        ]
    },
    {
        "id": "a8be5e182050c842",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "function 1",
        "func": "msg.payload=Number(msg.payload.toFixed(2))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 900,
        "wires": [
            [
                "40aee507f59aa798"
            ]
        ]
    },
    {
        "id": "6376720342733d99",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "function 1",
        "func": "msg.payload=Number(msg.payload.toFixed(2))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1060,
        "wires": [
            [
                "cf7aefb1129f8d9a"
            ]
        ]
    },
    {
        "id": "5a7243bf629289f6",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "function 1",
        "func": "msg.payload=Number(msg.payload.toFixed(2))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1180,
        "wires": [
            [
                "c91e8490a1e9f421"
            ]
        ]
    },
    {
        "id": "f078cbca85e9a4bc",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 380,
        "wires": [
            [
                "cda49724b8e18326"
            ]
        ]
    },
    {
        "id": "9419531a7658fb0c",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 540,
        "wires": [
            [
                "a43b1169255e27c4"
            ]
        ]
    },
    {
        "id": "29ab4ee08c8893f6",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 660,
        "wires": [
            [
                "d0972ab5f5e8f911"
            ]
        ]
    },
    {
        "id": "b44784ef793c41e8",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 900,
        "wires": [
            [
                "cc910e1a763a4b4a"
            ]
        ]
    },
    {
        "id": "351a1fc17fe4f1a2",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 1060,
        "wires": [
            [
                "a89e453511b30330"
            ]
        ]
    },
    {
        "id": "d6df839f37301cb8",
        "type": "switch",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NaN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1050,
        "y": 1180,
        "wires": [
            [
                "b3ef0b3cd45636a8"
            ]
        ]
    },
    {
        "id": "f79b6b03dde81bf3",
        "type": "inject",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "12",
        "payloadType": "num",
        "x": 750,
        "y": 760,
        "wires": [
            [
                "9419531a7658fb0c",
                "f078cbca85e9a4bc",
                "29ab4ee08c8893f6",
                "b44784ef793c41e8",
                "351a1fc17fe4f1a2",
                "d6df839f37301cb8"
            ]
        ]
    },
    {
        "id": "5d78b3e9773b1490",
        "type": "debug",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1250,
        "y": 960,
        "wires": []
    },
    {
        "id": "9a12a247a8eafa88",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "DB_F1",
        "diff": false,
        "name": "",
        "x": 430,
        "y": 900,
        "wires": [
            [
                "a8be5e182050c842"
            ]
        ]
    },
    {
        "id": "6b723d48a7cf7534",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "DB_F2",
        "diff": false,
        "name": "",
        "x": 430,
        "y": 1060,
        "wires": [
            [
                "6376720342733d99"
            ]
        ]
    },
    {
        "id": "b40829f5757e2285",
        "type": "s7 in",
        "z": "c06c5b4f567b90fc",
        "endpoint": "8f47a73cc311edee",
        "mode": "single",
        "variable": "DB_F3",
        "diff": false,
        "name": "",
        "x": 430,
        "y": 1180,
        "wires": [
            [
                "5a7243bf629289f6"
            ]
        ]
    },
    {
        "id": "18bdde524e5df201",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "T11-CH1 IN",
        "info": "",
        "x": 250,
        "y": 380,
        "wires": []
    },
    {
        "id": "93ee717f730f1b49",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "T12-CH2 IN",
        "info": "",
        "x": 250,
        "y": 540,
        "wires": []
    },
    {
        "id": "724891051fd687aa",
        "type": "comment",
        "z": "c06c5b4f567b90fc",
        "name": "T13-CH3 IN",
        "info": "",
        "x": 270,
        "y": 660,
        "wires": []
    },
    {
        "id": "71d052be8df21e95",
        "type": "debug",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 460,
        "wires": []
    },
    {
        "id": "cc910e1a763a4b4a",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 900,
        "wires": [
            [
                "5dac5a2b6cf2ada9",
                "5d78b3e9773b1490"
            ]
        ]
    },
    {
        "id": "a89e453511b30330",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 1060,
        "wires": [
            [
                "44ba20481ac714bb"
            ]
        ]
    },
    {
        "id": "b3ef0b3cd45636a8",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 1180,
        "wires": [
            [
                "1114b83a5168c988"
            ]
        ]
    },
    {
        "id": "cda49724b8e18326",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 380,
        "wires": [
            [
                "feee8355eb594a11"
            ]
        ]
    },
    {
        "id": "a43b1169255e27c4",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 540,
        "wires": [
            [
                "26bcb0b41db7a3c6"
            ]
        ]
    },
    {
        "id": "d0972ab5f5e8f911",
        "type": "function",
        "z": "c06c5b4f567b90fc",
        "name": "filter 0",
        "func": "// Retrieve the last sent value from the context.\nlet lastValue = context.get('lastValue');\n\n// Check if the current payload is different from the last value or if the last value wasn't 0.\nif(msg.payload !== lastValue || lastValue !== 0) {\n    // Update the last value in the context to the current payload.\n    context.set('lastValue', msg.payload);\n    // Forward the message since it's either not a 0, or it's a 0 following a non-0 value.\n    return msg;\n}\n// If the current payload is 0 and the last value was also 0, do nothing (block the message).\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 660,
        "wires": [
            [
                "7d53a64849d55619"
            ]
        ]
    },
    {
        "id": "ad378702c55e6125",
        "type": "inject",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 830,
        "y": 960,
        "wires": [
            [
                "b44784ef793c41e8"
            ]
        ]
    },
    {
        "id": "c2cf100809cafd69",
        "type": "inject",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 790,
        "y": 1120,
        "wires": [
            [
                "351a1fc17fe4f1a2"
            ]
        ]
    },
    {
        "id": "19084c132071fb8b",
        "type": "inject",
        "z": "c06c5b4f567b90fc",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 790,
        "y": 1240,
        "wires": [
            [
                "d6df839f37301cb8"
            ]
        ]
    },
    {
        "id": "b2a76e96632b54e1",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 380,
        "wires": []
    },
    {
        "id": "2b0eb0cddda339fe",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP1",
        "links": [
            "e40aac737b65d180"
        ],
        "x": 175,
        "y": 320,
        "wires": [
            [
                "0d4e8fa845231654"
            ]
        ]
    },
    {
        "id": "c023c968f08a0fe6",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP1",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 260,
        "wires": []
    },
    {
        "id": "0d4e8fa845231654",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 320,
        "wires": [
            [
                "ad87753ed8f6b104"
            ]
        ]
    },
    {
        "id": "4ed91ed2cbc68a0e",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "CHILLER",
        "info": "",
        "x": 220,
        "y": 180,
        "wires": []
    },
    {
        "id": "53934260316c82d1",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 2;\nmsg.parameter1 = 1;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no1=id+\"_\"+msg.parameter1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter1,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 320,
        "wires": [
            [
                "b2a76e96632b54e1",
                "beeacee29f06bfef",
                "79cff8e4d327ee91"
            ]
        ]
    },
    {
        "id": "beeacee29f06bfef",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chtemp1_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chtemp1/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 320,
        "wires": [
            [
                "31099015adab4405"
            ]
        ]
    },
    {
        "id": "4e3c67d970fbd950",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 320,
        "wires": [
            [
                "31fc884803dd7336"
            ],
            [
                "9e37b02e883737c2"
            ]
        ]
    },
    {
        "id": "31fc884803dd7336",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 300,
        "wires": [
            [
                "b618308c07e9b8e5"
            ]
        ]
    },
    {
        "id": "9e37b02e883737c2",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 340,
        "wires": [
            [
                "301b20a703806efb"
            ]
        ]
    },
    {
        "id": "b618308c07e9b8e5",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 300,
        "wires": [
            [
                "55cecbe41f5847ed"
            ]
        ]
    },
    {
        "id": "301b20a703806efb",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 340,
        "wires": [
            [
                "55cecbe41f5847ed"
            ]
        ]
    },
    {
        "id": "31099015adab4405",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 320,
        "wires": [
            [
                "4e3c67d970fbd950"
            ]
        ]
    },
    {
        "id": "e7c2febbb5d83815",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 280,
        "wires": []
    },
    {
        "id": "65f79feca3e329d0",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 680,
        "wires": []
    },
    {
        "id": "f15809ded504029e",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP2",
        "links": [
            "52dfe676d60640f2"
        ],
        "x": 175,
        "y": 620,
        "wires": [
            [
                "978b015dc6bae857"
            ]
        ]
    },
    {
        "id": "75ae1d1ab0c401c8",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP2",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 560,
        "wires": []
    },
    {
        "id": "978b015dc6bae857",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 620,
        "wires": [
            [
                "93132fc74d0f140c"
            ]
        ]
    },
    {
        "id": "bb3778d7626581a0",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 2;\nmsg.parameter2 = 2;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no2=id+\"_\"+msg.parameter2+\"_\"+msg.dt_mc+\"_\"+msg.msg_no2+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter2,\n        \"value\":value,\n        \"msg_no\": msg.msg_no2,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 620,
        "wires": [
            [
                "65f79feca3e329d0",
                "0bd229edc83f7309",
                "e71877ae9c671891"
            ]
        ]
    },
    {
        "id": "0bd229edc83f7309",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chtemp2_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chtemp2/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 620,
        "wires": [
            [
                "63b6b7418bf37037"
            ]
        ]
    },
    {
        "id": "629bd3a9cfc3adb4",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 620,
        "wires": [
            [
                "b8d8da4fed657621"
            ],
            [
                "6cc169725065624d"
            ]
        ]
    },
    {
        "id": "b8d8da4fed657621",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 600,
        "wires": [
            [
                "0a8ad7117a0756f0"
            ]
        ]
    },
    {
        "id": "6cc169725065624d",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 640,
        "wires": [
            [
                "ef2b05cb214df589"
            ]
        ]
    },
    {
        "id": "0a8ad7117a0756f0",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 600,
        "wires": [
            [
                "129282f215ba28dd"
            ]
        ]
    },
    {
        "id": "ef2b05cb214df589",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 640,
        "wires": [
            [
                "129282f215ba28dd"
            ]
        ]
    },
    {
        "id": "129282f215ba28dd",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "63b6b7418bf37037",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 620,
        "wires": [
            [
                "629bd3a9cfc3adb4"
            ]
        ]
    },
    {
        "id": "2ca123fc4cec8d78",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 580,
        "wires": []
    },
    {
        "id": "f68bd621127de568",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 980,
        "wires": []
    },
    {
        "id": "dc04051a7d3d28b9",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP3",
        "links": [
            "a847fbfcdc218b7c"
        ],
        "x": 175,
        "y": 920,
        "wires": [
            [
                "d29a1a6a3839299a"
            ]
        ]
    },
    {
        "id": "a8b39de0d3ec6a26",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "TEMP3",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 860,
        "wires": []
    },
    {
        "id": "d29a1a6a3839299a",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 920,
        "wires": [
            [
                "1f19f08724e94394"
            ]
        ]
    },
    {
        "id": "9db933d65a316107",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x=msg.payload;\nconst id = 2;\nmsg.parameter3 = 3;\nconst value = msg.temp;\nmsg.type2 = 2;\nmsg.msg_no3=id+\"_\"+msg.parameter3+\"_\"+msg.dt_mc+\"_\"+msg.msg_no3+\"_\"+msg.type2;\n\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":id,\n        \"parameter\":msg.parameter3,\n        \"value\":value,\n        \"msg_no\": msg.msg_no3,\n        \"type\":msg.type2\n    }\n}\nreturn msg;\n\n//const id = 1;\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//const type = 2; //1 if area, 2 if machine\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 920,
        "wires": [
            [
                "f68bd621127de568",
                "f39c1542bb0c9c96",
                "0606d5b6cb1f13ae"
            ]
        ]
    },
    {
        "id": "f39c1542bb0c9c96",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chtemp3_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chtemp3/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 920,
        "wires": [
            [
                "9de7d4319b4ac7d2"
            ]
        ]
    },
    {
        "id": "a94841abd47b36f6",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 920,
        "wires": [
            [
                "a34cd1c52f8a5e53"
            ],
            [
                "0526b586a5980276"
            ]
        ]
    },
    {
        "id": "a34cd1c52f8a5e53",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 900,
        "wires": [
            [
                "e52d1c97c2653ff9"
            ]
        ]
    },
    {
        "id": "0526b586a5980276",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 940,
        "wires": [
            [
                "25fab287b615d324"
            ]
        ]
    },
    {
        "id": "e52d1c97c2653ff9",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 900,
        "wires": [
            [
                "1fb9be2284405b22"
            ]
        ]
    },
    {
        "id": "25fab287b615d324",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 940,
        "wires": [
            [
                "1fb9be2284405b22"
            ]
        ]
    },
    {
        "id": "1fb9be2284405b22",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "9de7d4319b4ac7d2",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 920,
        "wires": [
            [
                "a94841abd47b36f6"
            ]
        ]
    },
    {
        "id": "bb0d31a750e8ee20",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 880,
        "wires": []
    },
    {
        "id": "79cff8e4d327ee91",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-T1CH",
        "mode": "link",
        "links": [
            "03615bbda748d6a8"
        ],
        "x": 865,
        "y": 380,
        "wires": []
    },
    {
        "id": "e71877ae9c671891",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-T2CH",
        "mode": "link",
        "links": [
            "5287b910dbfafb57"
        ],
        "x": 885,
        "y": 680,
        "wires": []
    },
    {
        "id": "0606d5b6cb1f13ae",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-T3CH",
        "mode": "link",
        "links": [
            "e9cac7ceaf318fe8"
        ],
        "x": 855,
        "y": 980,
        "wires": []
    },
    {
        "id": "41c6c9900aa2b5df",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/temp1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1450,
        "y": 400,
        "wires": []
    },
    {
        "id": "2f859e71e4463122",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "2f9e573b9f50ee56",
            "da0f283b41bee462"
        ],
        "x": 955,
        "y": 400,
        "wires": [
            [
                "41c6c9900aa2b5df",
                "7b3cef006b9c5efe",
                "34a5269c8d8669ae",
                "abf30835a768b6eb"
            ]
        ]
    },
    {
        "id": "e5c6214d2d05bb59",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/temp2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1530,
        "y": 700,
        "wires": []
    },
    {
        "id": "b03dc23085c11f47",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "e3a61d6791e44d71",
            "5912936c291884dc"
        ],
        "x": 1045,
        "y": 700,
        "wires": [
            [
                "e5c6214d2d05bb59",
                "eed0061fe8c8333d",
                "4f7dbabda18d0882",
                "a54ba85e826b4f4c"
            ]
        ]
    },
    {
        "id": "074d8d66c7c2857d",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/temp3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1530,
        "y": 1000,
        "wires": []
    },
    {
        "id": "9b0e62d3183e2c9f",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "3f7d749f682ae02c",
            "262fa6fa6c841a81"
        ],
        "x": 1035,
        "y": 1000,
        "wires": [
            [
                "074d8d66c7c2857d",
                "c89cbeecca2e326b",
                "175f886617c24d8e",
                "13b281f63b1cfdf6"
            ]
        ]
    },
    {
        "id": "7b3cef006b9c5efe",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter1",
                "pt": "global",
                "to": "parameter1",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que1",
                "pt": "global",
                "to": "msg_no1",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "eed0061fe8c8333d",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter2",
                "pt": "global",
                "to": "parameter2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que2",
                "pt": "global",
                "to": "msg_no2",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "c89cbeecca2e326b",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter3",
                "pt": "global",
                "to": "parameter3",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que3",
                "pt": "global",
                "to": "msg_no3",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1180,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "ad87753ed8f6b104",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 320,
        "wires": [
            [
                "53934260316c82d1"
            ]
        ]
    },
    {
        "id": "93132fc74d0f140c",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 580,
        "wires": [
            [
                "bb3778d7626581a0"
            ]
        ]
    },
    {
        "id": "1f19f08724e94394",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 880,
        "wires": [
            [
                "9db933d65a316107"
            ]
        ]
    },
    {
        "id": "34a5269c8d8669ae",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 500,
        "wires": []
    },
    {
        "id": "4f7dbabda18d0882",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 800,
        "wires": []
    },
    {
        "id": "175f886617c24d8e",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 1100,
        "wires": []
    },
    {
        "id": "55cecbe41f5847ed",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1920,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "abf30835a768b6eb",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/temp1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1450,
        "y": 460,
        "wires": []
    },
    {
        "id": "a54ba85e826b4f4c",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/temp2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1530,
        "y": 760,
        "wires": []
    },
    {
        "id": "13b281f63b1cfdf6",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/temp3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1530,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a8d045c635f938d6",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 1360,
        "wires": []
    },
    {
        "id": "3b9cf3f32c7b1a68",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW1",
        "links": [
            "f422cc982ad87c07"
        ],
        "x": 155,
        "y": 1300,
        "wires": [
            [
                "34ecbcdafe15edb3"
            ]
        ]
    },
    {
        "id": "41a8d37053d18e2e",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW1",
        "info": "This will only give analog value.",
        "x": 190,
        "y": 1240,
        "wires": []
    },
    {
        "id": "34ecbcdafe15edb3",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 1300,
        "wires": [
            [
                "dfed5c35eb9c623a"
            ]
        ]
    },
    {
        "id": "63c4ac4594b9dac4",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x = msg.payload;\nconst id = 2;\nmsg.parameter9 = 9;\nconst value = msg.flow;\nmsg.type2 = 2; //1 if area, 2 if machine\nmsg.msg_no9 = id+\"_\"+msg.parameter9 + \"_\" + msg.dt_mc + \"_\" + msg.msg_no9 + \"_\" + msg.type2;\n\nmsg.payload = {\n    \"data\": {\n        \"date_time\": msg.dt_mc,\n        \"unique_id\": id,\n        \"parameter\": msg.parameter9,\n        \"value\": value,\n        \"msg_no\": msg.msg_no9,\n        \"type\": msg.type2\n    }\n}\nreturn msg;\n\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1300,
        "wires": [
            [
                "a8d045c635f938d6",
                "faeb15d20fa320e1",
                "68d3e2ae55b97f02"
            ]
        ]
    },
    {
        "id": "faeb15d20fa320e1",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chflow1_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chflow1/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1300,
        "wires": [
            [
                "18fb0f6035b909ee"
            ]
        ]
    },
    {
        "id": "b49a636db3a8e9ad",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1410,
        "y": 1300,
        "wires": [
            [
                "365bd34849619ae9"
            ],
            [
                "f4aa220d86b5a323"
            ]
        ]
    },
    {
        "id": "365bd34849619ae9",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1280,
        "wires": [
            [
                "ea8baa6ff0676c9d"
            ]
        ]
    },
    {
        "id": "f4aa220d86b5a323",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 1320,
        "wires": [
            [
                "d8a806e428f30e0a"
            ]
        ]
    },
    {
        "id": "ea8baa6ff0676c9d",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1750,
        "y": 1280,
        "wires": [
            [
                "9c4be8540bf01c1c"
            ]
        ]
    },
    {
        "id": "d8a806e428f30e0a",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1750,
        "y": 1320,
        "wires": [
            [
                "9c4be8540bf01c1c"
            ]
        ]
    },
    {
        "id": "9c4be8540bf01c1c",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1890,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "18fb0f6035b909ee",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1240,
        "y": 1300,
        "wires": [
            [
                "b49a636db3a8e9ad"
            ]
        ]
    },
    {
        "id": "aa421893a6add010",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1120,
        "y": 1260,
        "wires": []
    },
    {
        "id": "4a3ee1ceda4f3525",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 1640,
        "wires": []
    },
    {
        "id": "ada235be1efe14f2",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW2",
        "links": [
            "153d205434ae4204"
        ],
        "x": 175,
        "y": 1580,
        "wires": [
            [
                "65764aa9fb078fa5"
            ]
        ]
    },
    {
        "id": "440827a4554c4517",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW2",
        "info": "This will only give analog value.",
        "x": 210,
        "y": 1520,
        "wires": []
    },
    {
        "id": "65764aa9fb078fa5",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 300,
        "y": 1580,
        "wires": [
            [
                "26d6b4e3f5910f03"
            ]
        ]
    },
    {
        "id": "331b5949a3975cd7",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x = msg.payload;\nconst id = 2;\nmsg.parameter10 = 10;\nconst value = msg.flow;\nmsg.type2 = 2; //1 if area, 2 if machine\nmsg.msg_no10 = id+\"_\"+msg.parameter10 + \"_\" + msg.dt_mc + \"_\" + msg.msg_no10 + \"_\" + msg.type2;\n\nmsg.payload = {\n    \"data\": {\n        \"date_time\": msg.dt_mc,\n        \"unique_id\": id,\n        \"parameter\": msg.parameter10,\n        \"value\": value,\n        \"msg_no\": msg.msg_no10,\n        \"type\": msg.type2\n    }\n}\nreturn msg;\n\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 1580,
        "wires": [
            [
                "4a3ee1ceda4f3525",
                "5eead6837974418e",
                "6b00d377748655df"
            ]
        ]
    },
    {
        "id": "5eead6837974418e",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chflow2_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chflow2/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 1580,
        "wires": [
            [
                "a4b34721861fc09e"
            ]
        ]
    },
    {
        "id": "544c67fb362168cf",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 1580,
        "wires": [
            [
                "94295687279f8fdd"
            ],
            [
                "1829a9f7db29549c"
            ]
        ]
    },
    {
        "id": "94295687279f8fdd",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 1560,
        "wires": [
            [
                "752ce54144aafe36"
            ]
        ]
    },
    {
        "id": "1829a9f7db29549c",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 1600,
        "wires": [
            [
                "a5d345478563fb96"
            ]
        ]
    },
    {
        "id": "752ce54144aafe36",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1560,
        "wires": [
            [
                "d0265bbd8da9346c"
            ]
        ]
    },
    {
        "id": "a5d345478563fb96",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1770,
        "y": 1600,
        "wires": [
            [
                "d0265bbd8da9346c"
            ]
        ]
    },
    {
        "id": "d0265bbd8da9346c",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "a4b34721861fc09e",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 1580,
        "wires": [
            [
                "544c67fb362168cf"
            ]
        ]
    },
    {
        "id": "fcca4c26b3aa3f25",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1140,
        "y": 1540,
        "wires": []
    },
    {
        "id": "7ff5327fbc3fa030",
        "type": "debug",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 730,
        "y": 1980,
        "wires": []
    },
    {
        "id": "a4d63ddcdf995cc6",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW3",
        "links": [
            "0d24d0d720f9313c"
        ],
        "x": 195,
        "y": 1920,
        "wires": [
            [
                "5f5b0dc7b9e92192"
            ]
        ]
    },
    {
        "id": "f9f4bb650e98e752",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FLOW3",
        "info": "This will only give analog value.",
        "x": 230,
        "y": 1860,
        "wires": []
    },
    {
        "id": "5f5b0dc7b9e92192",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 320,
        "y": 1920,
        "wires": [
            [
                "d58fe834c3070443"
            ]
        ]
    },
    {
        "id": "4c45d6633e8a88d8",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "func": "//get machine value 1/0\nconst x = msg.payload;\nconst id = 2;\nmsg.parameter11 = 11;\nconst value = msg.flow;\nmsg.type2 = 2; //1 if area, 2 if machine\nmsg.msg_no11 = id +\"_\"+msg.parameter11 + \"_\" + msg.dt_mc + \"_\" + msg.msg_no11 + \"_\" + msg.type2;\n\nmsg.payload = {\n    \"data\": {\n        \"date_time\": msg.dt_mc,\n        \"unique_id\": id,\n        \"parameter\": msg.parameter11,\n        \"value\": value,\n        \"msg_no\": msg.msg_no11,\n        \"type\": msg.type2\n    }\n}\nreturn msg;\n\n//const machine = \"cooling_tower\";\n//msg.uniqueid1 = \"001\";\n//msg.package_no1 = 1;\n//msg.msg_no=986599056;\n// @ts-ignore\n//const d = new Date().toLocaleString(\"en-US\", {timeZone: 'Europe/London'});\n//msg.dt_prod = d;\n//production status\n//machine value\n// 1 0 prod\n// 0 1 dc\n// 0 0 downtime\n// 1 1 N/A\n//4 API ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 1920,
        "wires": [
            [
                "7ff5327fbc3fa030",
                "ca53da1ad5539862",
                "06505a68564ed9e3"
            ]
        ]
    },
    {
        "id": "ca53da1ad5539862",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var value = msg.maint;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_chflow3_\"+dd+mm+yyyy+\".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/chflow3/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1920,
        "wires": [
            [
                "ea5a856147ca2a51"
            ]
        ]
    },
    {
        "id": "936ad45fb290ee36",
        "type": "switch",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 1920,
        "wires": [
            [
                "1f89615fc2c5abe3"
            ],
            [
                "b5e2c20d875d4665"
            ]
        ]
    },
    {
        "id": "1f89615fc2c5abe3",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1900,
        "wires": [
            [
                "ecc77be8772d7d03"
            ]
        ]
    },
    {
        "id": "b5e2c20d875d4665",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1940,
        "wires": [
            [
                "939bfea2fec26c14"
            ]
        ]
    },
    {
        "id": "ecc77be8772d7d03",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 1900,
        "wires": [
            [
                "84250b017e2382e4"
            ]
        ]
    },
    {
        "id": "939bfea2fec26c14",
        "type": "csv",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 1940,
        "wires": [
            [
                "84250b017e2382e4"
            ]
        ]
    },
    {
        "id": "84250b017e2382e4",
        "type": "file",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1930,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "ea5a856147ca2a51",
        "type": "fs-file-lister",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1280,
        "y": 1920,
        "wires": [
            [
                "936ad45fb290ee36"
            ]
        ]
    },
    {
        "id": "60284ecbf7dd38fd",
        "type": "comment",
        "z": "6babdaf49ed1a5d7",
        "name": "FOR DATA ANALYSIS - MAINTENANCE",
        "info": "This will only give 1/0 value.",
        "x": 1160,
        "y": 1880,
        "wires": []
    },
    {
        "id": "68d3e2ae55b97f02",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-F1CH",
        "mode": "link",
        "links": [
            "5ea43e5c7a22a73d"
        ],
        "x": 825,
        "y": 1340,
        "wires": []
    },
    {
        "id": "6b00d377748655df",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-F2CH",
        "mode": "link",
        "links": [
            "b358fe4940e9f644"
        ],
        "x": 855,
        "y": 1640,
        "wires": []
    },
    {
        "id": "06505a68564ed9e3",
        "type": "link out",
        "z": "6babdaf49ed1a5d7",
        "name": "DATA-F3CH",
        "mode": "link",
        "links": [
            "c1ab79e1aae7ea06",
            "47a2a27080603ef6"
        ],
        "x": 865,
        "y": 1980,
        "wires": []
    },
    {
        "id": "e1adb35fad60cd5d",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/flow1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1610,
        "y": 1380,
        "wires": []
    },
    {
        "id": "88dc6a5398e726a2",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "42162597a1e23b42",
            "1caccc9ddec84135"
        ],
        "x": 1085,
        "y": 1380,
        "wires": [
            [
                "e1adb35fad60cd5d",
                "251c649a189f012a",
                "480e81c857f1d8a0"
            ]
        ]
    },
    {
        "id": "6d7f129db156b57e",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/flow2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1650,
        "y": 1660,
        "wires": []
    },
    {
        "id": "b8a49cc0c67fb382",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "c97b94f074622a84",
            "3067231fd0781ce2"
        ],
        "x": 1155,
        "y": 1660,
        "wires": [
            [
                "6d7f129db156b57e",
                "935ee222227d71b5",
                "63c03252743eb2ea"
            ]
        ]
    },
    {
        "id": "d29894d70527fd40",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "d": true,
        "name": "",
        "topic": "hvacgmi/ch/flow3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "1b736ae5138d84a2",
        "x": 1630,
        "y": 2000,
        "wires": []
    },
    {
        "id": "827b8628603a361a",
        "type": "link in",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "links": [
            "a5894879ad2e3056",
            "716245f9c235fc26"
        ],
        "x": 1115,
        "y": 2000,
        "wires": [
            [
                "d29894d70527fd40",
                "cd3e82f5544bed50",
                "40791ad0a3deca12"
            ]
        ]
    },
    {
        "id": "251c649a189f012a",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter9",
                "pt": "global",
                "to": "parameter9",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que9",
                "pt": "global",
                "to": "msg_no9",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "935ee222227d71b5",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter10",
                "pt": "global",
                "to": "parameter10",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que10",
                "pt": "global",
                "to": "msg_no10",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1320,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "cd3e82f5544bed50",
        "type": "change",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parameter11",
                "pt": "global",
                "to": "parameter11",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "type_que2",
                "pt": "global",
                "to": "type2",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "msg_no_que11",
                "pt": "global",
                "to": "msg_no11",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "dfed5c35eb9c623a",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 1280,
        "wires": [
            [
                "63c4ac4594b9dac4"
            ]
        ]
    },
    {
        "id": "26d6b4e3f5910f03",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1540,
        "wires": [
            [
                "331b5949a3975cd7"
            ]
        ]
    },
    {
        "id": "d58fe834c3070443",
        "type": "function",
        "z": "6babdaf49ed1a5d7",
        "name": "Date/Time Formatter",
        "func": "var now = new Date();\nvar offset = 8; // MYT is UTC+8\nvar mytTime = new Date(now.getTime() + offset * 3600 * 1000);\nvar mytTimeString = mytTime.toISOString().replace('T', ' ').replace(/\\.\\d+Z$/, '');\nmsg.dt_mc = mytTimeString;\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1880,
        "wires": [
            [
                "4c45d6633e8a88d8"
            ]
        ]
    },
    {
        "id": "480e81c857f1d8a0",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/flow1",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1610,
        "y": 1440,
        "wires": []
    },
    {
        "id": "63c03252743eb2ea",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/flow2",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1630,
        "y": 1720,
        "wires": []
    },
    {
        "id": "40791ad0a3deca12",
        "type": "mqtt out",
        "z": "6babdaf49ed1a5d7",
        "name": "",
        "topic": "hvacgmi/ch/flow3",
        "qos": "1",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "121f64b67d4c0157",
        "x": 1610,
        "y": 2060,
        "wires": []
    },
    {
        "id": "fadc71eb7d3ab420",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 680,
        "wires": [
            [
                "e9a836cbf815c775"
            ]
        ]
    },
    {
        "id": "e9a836cbf815c775",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 680,
        "wires": [
            [
                "b9d2a1b4b4c94daa",
                "ce4f2099f83105ec"
            ]
        ]
    },
    {
        "id": "b7a8a774788e153d",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 720,
        "wires": [
            [
                "d0d95b10990eec79"
            ]
        ]
    },
    {
        "id": "854111d65e482d02",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1530,
        "y": 860,
        "wires": [
            [
                "9a0dd79bd75cc3a4"
            ]
        ]
    },
    {
        "id": "9a0dd79bd75cc3a4",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1770,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "98c0082c2bd1f67a",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 280,
        "y": 680,
        "wires": [
            [
                "fadc71eb7d3ab420"
            ]
        ]
    },
    {
        "id": "da6926ea79e7c87a",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1170,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "ce4f2099f83105ec",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 680,
        "wires": [
            [
                "4cf99394c2885d1f",
                "b7a8a774788e153d",
                "97d02afc3525b48b"
            ],
            [
                "5e831e8550d8e8f4"
            ]
        ]
    },
    {
        "id": "a774708360b6a800",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 310,
        "y": 1260,
        "wires": [
            [
                "da6926ea79e7c87a"
            ]
        ]
    },
    {
        "id": "8b15182f2885cf0d",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 460,
        "y": 1140,
        "wires": [
            [
                "09f0c99f8086f708"
            ]
        ]
    },
    {
        "id": "09f0c99f8086f708",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 660,
        "y": 1140,
        "wires": [
            [
                "de7c4118dcd97fbf"
            ]
        ]
    },
    {
        "id": "9f7fc8d53da062d1",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 300,
        "y": 1140,
        "wires": [
            [
                "8b15182f2885cf0d"
            ]
        ]
    },
    {
        "id": "e404250343dfd1d5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 290,
        "y": 1220,
        "wires": []
    },
    {
        "id": "bd3aae1efb5706a2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 640,
        "y": 640,
        "wires": []
    },
    {
        "id": "0f52937d59ae58a9",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 350,
        "y": 1100,
        "wires": []
    },
    {
        "id": "efa696c371286f6b",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 260,
        "wires": []
    },
    {
        "id": "8b1aa56f0b461372",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1750,
        "y": 720,
        "wires": []
    },
    {
        "id": "b9d2a1b4b4c94daa",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 720,
        "wires": []
    },
    {
        "id": "4cf99394c2885d1f",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 600,
        "wires": []
    },
    {
        "id": "5e831e8550d8e8f4",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 760,
        "wires": []
    },
    {
        "id": "97e8bfc7efbd127a",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond T1CH",
        "links": [
            "d91ac407b36df1a4",
            "050a5d4e0bdab5c7"
        ],
        "x": 335,
        "y": 880,
        "wires": [
            [
                "47b5835c94a76af9",
                "9a1668bd0376c314"
            ]
        ]
    },
    {
        "id": "7b892a752fff8043",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1550,
        "y": 740,
        "wires": [
            [
                "8b86f0268476846f",
                "55757998fdbe5c6e"
            ]
        ]
    },
    {
        "id": "8b86f0268476846f",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 680,
        "wires": [
            [
                "8b1aa56f0b461372",
                "2f9e573b9f50ee56"
            ]
        ]
    },
    {
        "id": "55757998fdbe5c6e",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1730,
        "y": 760,
        "wires": []
    },
    {
        "id": "d0d95b10990eec79",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no1= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 680,
        "wires": [
            [
                "8b86f0268476846f"
            ]
        ]
    },
    {
        "id": "47b5835c94a76af9",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 880,
        "wires": [
            [
                "b9a6fccecf195943",
                "6519c1efb1831d88"
            ],
            [
                "6519c1efb1831d88"
            ],
            []
        ]
    },
    {
        "id": "b9a6fccecf195943",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 853,
        "wires": []
    },
    {
        "id": "cc4d6cf1f8f60848",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 400,
        "y": 940,
        "wires": [
            [
                "47b5835c94a76af9"
            ]
        ]
    },
    {
        "id": "6519c1efb1831d88",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 900,
        "wires": [
            [
                "b7df6af8b7c5b6dc"
            ]
        ]
    },
    {
        "id": "b7df6af8b7c5b6dc",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 910,
        "y": 900,
        "wires": [
            [
                "e80fcca4bdb05b2e"
            ]
        ]
    },
    {
        "id": "e80fcca4bdb05b2e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 900,
        "wires": [
            [
                "af586551c8fef45f"
            ]
        ]
    },
    {
        "id": "af586551c8fef45f",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1370,
        "y": 900,
        "wires": [
            [
                "854111d65e482d02"
            ],
            [
                "6feacfa34b6c8a44"
            ]
        ]
    },
    {
        "id": "6feacfa34b6c8a44",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T1CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1630,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "cd743cd9f663d5b2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 420,
        "y": 360,
        "wires": []
    },
    {
        "id": "89591ac80d096122",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 400,
        "wires": [
            [
                "ad7a0a57e9f184cd",
                "b9ae09d8964e7c4e"
            ]
        ]
    },
    {
        "id": "ad7a0a57e9f184cd",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 400,
        "wires": []
    },
    {
        "id": "c99d2b02aee19e7a",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 580,
        "y": 400,
        "wires": [
            [
                "690c58c8c6263ba8",
                "ca65fa8024f8ebae"
            ]
        ]
    },
    {
        "id": "690c58c8c6263ba8",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e18a36efa505ea4b",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 350,
        "y": 640,
        "wires": []
    },
    {
        "id": "12a9d5819be538d5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 470,
        "y": 813,
        "wires": []
    },
    {
        "id": "3376a825a00b250f",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e4e355283895ecef",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1750,
        "y": 640,
        "wires": []
    },
    {
        "id": "c755bfce5a27069a",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 500,
        "y": 980,
        "wires": []
    },
    {
        "id": "03615bbda748d6a8",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-T1",
        "links": [
            "3372758f6c3e42c2",
            "79cff8e4d327ee91"
        ],
        "x": 375,
        "y": 300,
        "wires": [
            [
                "b9ae09d8964e7c4e"
            ]
        ]
    },
    {
        "id": "b9ae09d8964e7c4e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T1CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 300,
        "wires": [
            [
                "ee32f8f9007efc9f",
                "8131fe0de29034da"
            ]
        ]
    },
    {
        "id": "8c4113754ff1f66e",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 300,
        "wires": [
            [
                "e6d35c85a929320c"
            ],
            [
                "3f8c988d75b97ead"
            ]
        ]
    },
    {
        "id": "e6d35c85a929320c",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 280,
        "wires": [
            [
                "c627c747aaab49d5"
            ]
        ]
    },
    {
        "id": "3f8c988d75b97ead",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 320,
        "wires": [
            [
                "e513b64e1c09a995"
            ]
        ]
    },
    {
        "id": "c627c747aaab49d5",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 280,
        "wires": [
            [
                "a0963245a37771ea"
            ]
        ]
    },
    {
        "id": "e513b64e1c09a995",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 320,
        "wires": [
            [
                "a0963245a37771ea"
            ]
        ]
    },
    {
        "id": "ee32f8f9007efc9f",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 800,
        "y": 300,
        "wires": [
            [
                "8c4113754ff1f66e"
            ]
        ]
    },
    {
        "id": "2f9e573b9f50ee56",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp T1CH",
        "mode": "link",
        "links": [
            "19d745c4aa5ceb13",
            "2f859e71e4463122"
        ],
        "x": 1935,
        "y": 680,
        "wires": []
    },
    {
        "id": "e71944c628e0d0ea",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 360,
        "y": 480,
        "wires": [
            [
                "c99d2b02aee19e7a"
            ]
        ]
    },
    {
        "id": "a1543c87dd7dcf50",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 360,
        "y": 520,
        "wires": [
            [
                "c99d2b02aee19e7a"
            ]
        ]
    },
    {
        "id": "efe6c64ad57f29ee",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 350,
        "y": 400,
        "wires": [
            [
                "c99d2b02aee19e7a"
            ]
        ]
    },
    {
        "id": "67edee470cf52671",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 350,
        "y": 440,
        "wires": [
            [
                "c99d2b02aee19e7a"
            ]
        ]
    },
    {
        "id": "72a5ec1923c77938",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1230,
        "y": 680,
        "wires": [
            [
                "d0d95b10990eec79"
            ]
        ]
    },
    {
        "id": "8131fe0de29034da",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 260,
        "wires": []
    },
    {
        "id": "97d02afc3525b48b",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 680,
        "wires": [
            [
                "72a5ec1923c77938"
            ]
        ]
    },
    {
        "id": "ca65fa8024f8ebae",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 480,
        "wires": []
    },
    {
        "id": "561071a0725c6029",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 490,
        "y": 780,
        "wires": []
    },
    {
        "id": "c0857802a7f6e7bd",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 220,
        "wires": []
    },
    {
        "id": "de7c4118dcd97fbf",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 1140,
        "wires": [
            [
                "47b5835c94a76af9"
            ]
        ]
    },
    {
        "id": "97a78e8d054ff671",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "TEMP1",
        "info": "",
        "x": 210,
        "y": 180,
        "wires": []
    },
    {
        "id": "95326baab8d43d3d",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chtemp1_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1060,
        "wires": [
            [
                "fdfeb8eea59d6449"
            ]
        ]
    },
    {
        "id": "8f9388d52f6c42cb",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 1060,
        "wires": [
            [
                "dd504fd6a4ba7e71"
            ],
            [
                "a53133c8aa6c2dac"
            ]
        ]
    },
    {
        "id": "dd504fd6a4ba7e71",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1040,
        "wires": [
            [
                "7e0acd7c99e9c3c1"
            ]
        ]
    },
    {
        "id": "a53133c8aa6c2dac",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1640,
        "y": 1080,
        "wires": [
            [
                "face9f5aef4c633e"
            ]
        ]
    },
    {
        "id": "32e91b76f421f120",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1930,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "fdfeb8eea59d6449",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1280,
        "y": 1060,
        "wires": [
            [
                "8f9388d52f6c42cb"
            ]
        ]
    },
    {
        "id": "dbba803825010d9b",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1190,
        "y": 1020,
        "wires": []
    },
    {
        "id": "face9f5aef4c633e",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 1080,
        "wires": [
            [
                "32e91b76f421f120"
            ]
        ]
    },
    {
        "id": "7e0acd7c99e9c3c1",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1810,
        "y": 1040,
        "wires": [
            [
                "32e91b76f421f120"
            ]
        ]
    },
    {
        "id": "9a1668bd0376c314",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter1",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 900,
        "y": 960,
        "wires": [
            [
                "95326baab8d43d3d"
            ]
        ]
    },
    {
        "id": "a0963245a37771ea",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1b71d52952c0fda8",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 1920,
        "wires": [
            [
                "ca6abc947125d56c"
            ]
        ]
    },
    {
        "id": "ca6abc947125d56c",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 1920,
        "wires": [
            [
                "536c2d0124b57fb2",
                "7a836b595034d531"
            ]
        ]
    },
    {
        "id": "d07db260fac414e3",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1060,
        "y": 1960,
        "wires": [
            [
                "7a34179832c80e79"
            ]
        ]
    },
    {
        "id": "9832957924f83c39",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1530,
        "y": 2100,
        "wires": [
            [
                "c26e6a79f48e59da"
            ]
        ]
    },
    {
        "id": "c26e6a79f48e59da",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1770,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "a59807f980342553",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 280,
        "y": 1920,
        "wires": [
            [
                "1b71d52952c0fda8"
            ]
        ]
    },
    {
        "id": "7a836b595034d531",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 1920,
        "wires": [
            [
                "cd6067b38595fc10",
                "d07db260fac414e3",
                "6737ed56337710ee"
            ],
            [
                "ba456230f7f85f90"
            ]
        ]
    },
    {
        "id": "2e6065b6f3329fcf",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 460,
        "y": 2380,
        "wires": [
            [
                "abbb785777921aee"
            ]
        ]
    },
    {
        "id": "abbb785777921aee",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 660,
        "y": 2380,
        "wires": [
            [
                "e2dd3e9849d958b4"
            ]
        ]
    },
    {
        "id": "1dcc4bbd31ef42f1",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 300,
        "y": 2380,
        "wires": [
            [
                "2e6065b6f3329fcf"
            ]
        ]
    },
    {
        "id": "b86a5671330ed410",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 640,
        "y": 1880,
        "wires": []
    },
    {
        "id": "689da95bba2c984a",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 350,
        "y": 2340,
        "wires": []
    },
    {
        "id": "00273e869b945495",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 1500,
        "wires": []
    },
    {
        "id": "ed7a89ec03315527",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1750,
        "y": 1960,
        "wires": []
    },
    {
        "id": "536c2d0124b57fb2",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1960,
        "wires": []
    },
    {
        "id": "cd6067b38595fc10",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1840,
        "wires": []
    },
    {
        "id": "ba456230f7f85f90",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 2000,
        "wires": []
    },
    {
        "id": "7170b0e8042b66ab",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond T2CH",
        "links": [
            "35ef0b6543304abb",
            "b908080bec515f64"
        ],
        "x": 335,
        "y": 2120,
        "wires": [
            [
                "cc448997b3c129c4",
                "7f12b02e404428a6"
            ]
        ]
    },
    {
        "id": "17eb7c698bf4bed5",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1550,
        "y": 1980,
        "wires": [
            [
                "a347234cb811ca01",
                "441615aaecb486fd"
            ]
        ]
    },
    {
        "id": "a347234cb811ca01",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 1920,
        "wires": [
            [
                "ed7a89ec03315527",
                "e3a61d6791e44d71"
            ]
        ]
    },
    {
        "id": "441615aaecb486fd",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1730,
        "y": 2000,
        "wires": []
    },
    {
        "id": "7a34179832c80e79",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no2= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1400,
        "y": 1920,
        "wires": [
            [
                "a347234cb811ca01"
            ]
        ]
    },
    {
        "id": "cc448997b3c129c4",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 2120,
        "wires": [
            [
                "53a0ceec80139e36",
                "eaec6321a3eddf2d"
            ],
            [
                "eaec6321a3eddf2d"
            ],
            []
        ]
    },
    {
        "id": "53a0ceec80139e36",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 2093,
        "wires": []
    },
    {
        "id": "36f7dd5ab33f3dc5",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 400,
        "y": 2180,
        "wires": [
            [
                "cc448997b3c129c4"
            ]
        ]
    },
    {
        "id": "eaec6321a3eddf2d",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 2140,
        "wires": [
            [
                "57b55bc7bcc57b39"
            ]
        ]
    },
    {
        "id": "57b55bc7bcc57b39",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 910,
        "y": 2140,
        "wires": [
            [
                "7103cce935318548"
            ]
        ]
    },
    {
        "id": "7103cce935318548",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1140,
        "y": 2140,
        "wires": [
            [
                "5e9e62ee98f142ff"
            ]
        ]
    },
    {
        "id": "5e9e62ee98f142ff",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1370,
        "y": 2140,
        "wires": [
            [
                "9832957924f83c39"
            ],
            [
                "3cff8a4368b3e0f1"
            ]
        ]
    },
    {
        "id": "3cff8a4368b3e0f1",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1630,
        "y": 2160,
        "wires": [
            []
        ]
    },
    {
        "id": "8fea01a4c5145cb8",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 420,
        "y": 1600,
        "wires": []
    },
    {
        "id": "36268292a5b60c96",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 1640,
        "wires": [
            [
                "ab22800dab5923fd",
                "81028da6f22acb29"
            ]
        ]
    },
    {
        "id": "ab22800dab5923fd",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 1640,
        "wires": []
    },
    {
        "id": "b40a32d4da074973",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 580,
        "y": 1640,
        "wires": [
            [
                "8efbbf63f6574338",
                "535059a89fed3527"
            ]
        ]
    },
    {
        "id": "8efbbf63f6574338",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "33ae9c7f937ecab8",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 350,
        "y": 1880,
        "wires": []
    },
    {
        "id": "6617a2d3fdad20ae",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 470,
        "y": 2053,
        "wires": []
    },
    {
        "id": "858bc85a916e93bf",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 2300,
        "wires": []
    },
    {
        "id": "83fe8d2df3f1b97d",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1750,
        "y": 1880,
        "wires": []
    },
    {
        "id": "e07435e493247689",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 500,
        "y": 2220,
        "wires": []
    },
    {
        "id": "5287b910dbfafb57",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-T2",
        "links": [
            "b04e5ce0ade4250b",
            "e71877ae9c671891"
        ],
        "x": 375,
        "y": 1540,
        "wires": [
            [
                "81028da6f22acb29"
            ]
        ]
    },
    {
        "id": "81028da6f22acb29",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T2CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1540,
        "wires": [
            [
                "5af9e4a3a8c46b5e",
                "735e6a9fe880b404"
            ]
        ]
    },
    {
        "id": "ac0bd98c9fdbaebf",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1540,
        "wires": [
            [
                "710e97a78076c004"
            ],
            [
                "c46f2c763a733cec"
            ]
        ]
    },
    {
        "id": "710e97a78076c004",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1520,
        "wires": [
            [
                "5ad70f531730a503"
            ]
        ]
    },
    {
        "id": "c46f2c763a733cec",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1160,
        "y": 1560,
        "wires": [
            [
                "47908ff5e4033f4b"
            ]
        ]
    },
    {
        "id": "5ad70f531730a503",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1520,
        "wires": [
            [
                "6a817f61ddc59a1f"
            ]
        ]
    },
    {
        "id": "47908ff5e4033f4b",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1310,
        "y": 1560,
        "wires": [
            [
                "6a817f61ddc59a1f"
            ]
        ]
    },
    {
        "id": "5af9e4a3a8c46b5e",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 800,
        "y": 1540,
        "wires": [
            [
                "ac0bd98c9fdbaebf"
            ]
        ]
    },
    {
        "id": "e3a61d6791e44d71",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp T2CH",
        "mode": "link",
        "links": [
            "3677893dec9ec7cc",
            "b03dc23085c11f47"
        ],
        "x": 1935,
        "y": 1920,
        "wires": []
    },
    {
        "id": "a721f73d08cbaa6f",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 360,
        "y": 1720,
        "wires": [
            [
                "b40a32d4da074973"
            ]
        ]
    },
    {
        "id": "1a8d18bf6016ff3a",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 360,
        "y": 1760,
        "wires": [
            [
                "b40a32d4da074973"
            ]
        ]
    },
    {
        "id": "e509cdd13f2aefed",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 350,
        "y": 1640,
        "wires": [
            [
                "b40a32d4da074973"
            ]
        ]
    },
    {
        "id": "1d9cd0fc8e1cdbcd",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 350,
        "y": 1680,
        "wires": [
            [
                "b40a32d4da074973"
            ]
        ]
    },
    {
        "id": "aed6924bfef702f1",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1230,
        "y": 1920,
        "wires": [
            [
                "7a34179832c80e79"
            ]
        ]
    },
    {
        "id": "735e6a9fe880b404",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1500,
        "wires": []
    },
    {
        "id": "6737ed56337710ee",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1920,
        "wires": [
            [
                "aed6924bfef702f1"
            ]
        ]
    },
    {
        "id": "535059a89fed3527",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 1720,
        "wires": []
    },
    {
        "id": "66eaf5a235447b11",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 490,
        "y": 2020,
        "wires": []
    },
    {
        "id": "c1f696500660b70c",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 450,
        "y": 1460,
        "wires": []
    },
    {
        "id": "e2dd3e9849d958b4",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 840,
        "y": 2380,
        "wires": [
            [
                "cc448997b3c129c4"
            ]
        ]
    },
    {
        "id": "a80b47e60ac96b7f",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "TEMP2",
        "info": "",
        "x": 210,
        "y": 1420,
        "wires": []
    },
    {
        "id": "c9e0e4cb4ba6b361",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T2CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1150,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "f7ab2f4d63be1967",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 2500,
        "wires": [
            [
                "c9e0e4cb4ba6b361"
            ]
        ]
    },
    {
        "id": "06088ac0faaf7873",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 270,
        "y": 2460,
        "wires": []
    },
    {
        "id": "dc011325cf371077",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chtemp2_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 2320,
        "wires": [
            [
                "0e4a3fba400f00d9"
            ]
        ]
    },
    {
        "id": "b883b708c80a57c8",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1470,
        "y": 2320,
        "wires": [
            [
                "70c91f78b5d71bc2"
            ],
            [
                "a7e87276a696d253"
            ]
        ]
    },
    {
        "id": "70c91f78b5d71bc2",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 2300,
        "wires": [
            [
                "c039105b855f60f7"
            ]
        ]
    },
    {
        "id": "a7e87276a696d253",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1660,
        "y": 2340,
        "wires": [
            [
                "c72fa2420da268d9"
            ]
        ]
    },
    {
        "id": "0fe85a92f2fcae99",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1950,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "0e4a3fba400f00d9",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1300,
        "y": 2320,
        "wires": [
            [
                "b883b708c80a57c8"
            ]
        ]
    },
    {
        "id": "e3f2279a248ef416",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1210,
        "y": 2280,
        "wires": []
    },
    {
        "id": "c72fa2420da268d9",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 2340,
        "wires": [
            [
                "0fe85a92f2fcae99"
            ]
        ]
    },
    {
        "id": "c039105b855f60f7",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1830,
        "y": 2300,
        "wires": [
            [
                "0fe85a92f2fcae99"
            ]
        ]
    },
    {
        "id": "7f12b02e404428a6",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter2",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 2220,
        "wires": [
            [
                "dc011325cf371077"
            ]
        ]
    },
    {
        "id": "6a817f61ddc59a1f",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1480,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "cfc7bfbf22419955",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 3200,
        "wires": [
            [
                "8e7d023ca5826e38"
            ]
        ]
    },
    {
        "id": "8e7d023ca5826e38",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 610,
        "y": 3200,
        "wires": [
            [
                "a7d69de031794a07",
                "44d531e7daa3dd4c"
            ]
        ]
    },
    {
        "id": "7d4d42790d8b88e8",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1040,
        "y": 3240,
        "wires": [
            [
                "527c53ab7d9af8be"
            ]
        ]
    },
    {
        "id": "29f8b2881481bae6",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1510,
        "y": 3380,
        "wires": [
            [
                "7530fe8bf021aef6"
            ]
        ]
    },
    {
        "id": "7530fe8bf021aef6",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1750,
        "y": 3380,
        "wires": [
            []
        ]
    },
    {
        "id": "2344d627de8ef0f5",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 260,
        "y": 3200,
        "wires": [
            [
                "cfc7bfbf22419955"
            ]
        ]
    },
    {
        "id": "53346f5923b702a6",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1150,
        "y": 3780,
        "wires": [
            []
        ]
    },
    {
        "id": "44d531e7daa3dd4c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 3200,
        "wires": [
            [
                "0771d9ec7cbbaf7b",
                "7d4d42790d8b88e8",
                "91cdea835ff34813"
            ],
            [
                "86d3dbf651379342"
            ]
        ]
    },
    {
        "id": "85f49d991b8ffc2d",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 290,
        "y": 3780,
        "wires": [
            [
                "53346f5923b702a6"
            ]
        ]
    },
    {
        "id": "0eb8a70f41c9e15e",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 440,
        "y": 3660,
        "wires": [
            [
                "a1bf76b506235c47"
            ]
        ]
    },
    {
        "id": "a1bf76b506235c47",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 640,
        "y": 3660,
        "wires": [
            [
                "f57d450af80b309e"
            ]
        ]
    },
    {
        "id": "b14912b60526f97d",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 280,
        "y": 3660,
        "wires": [
            [
                "0eb8a70f41c9e15e"
            ]
        ]
    },
    {
        "id": "f1453b02c173e455",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 270,
        "y": 3740,
        "wires": []
    },
    {
        "id": "b61dfeb45f4f5175",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 620,
        "y": 3160,
        "wires": []
    },
    {
        "id": "244f20ae4ee47e4d",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 330,
        "y": 3620,
        "wires": []
    },
    {
        "id": "c6d8f0bd7a0746fa",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 460,
        "y": 2780,
        "wires": []
    },
    {
        "id": "6798c879d867eb72",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 3240,
        "wires": []
    },
    {
        "id": "a7d69de031794a07",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 3240,
        "wires": []
    },
    {
        "id": "0771d9ec7cbbaf7b",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 3120,
        "wires": []
    },
    {
        "id": "86d3dbf651379342",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 3280,
        "wires": []
    },
    {
        "id": "8207b6efaea82b4e",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond T3CH",
        "links": [
            "6751d67882b37a3e",
            "bca862e180818a48"
        ],
        "x": 315,
        "y": 3400,
        "wires": [
            [
                "950bbbd112183c59",
                "ba479194435de5a9"
            ]
        ]
    },
    {
        "id": "d28f8a5f1ea7a64f",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1530,
        "y": 3260,
        "wires": [
            [
                "b512f3109a44d11a",
                "9f812dbb31380bc4"
            ]
        ]
    },
    {
        "id": "b512f3109a44d11a",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 3200,
        "wires": [
            [
                "6798c879d867eb72",
                "3f7d749f682ae02c"
            ]
        ]
    },
    {
        "id": "9f812dbb31380bc4",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1710,
        "y": 3280,
        "wires": []
    },
    {
        "id": "527c53ab7d9af8be",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no3= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 3200,
        "wires": [
            [
                "b512f3109a44d11a"
            ]
        ]
    },
    {
        "id": "950bbbd112183c59",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 470,
        "y": 3400,
        "wires": [
            [
                "f63443b520daf904",
                "b9cf40af91aeb0cc"
            ],
            [
                "b9cf40af91aeb0cc"
            ],
            []
        ]
    },
    {
        "id": "f63443b520daf904",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 3373,
        "wires": []
    },
    {
        "id": "543a3fda70322641",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 380,
        "y": 3460,
        "wires": [
            [
                "950bbbd112183c59"
            ]
        ]
    },
    {
        "id": "b9cf40af91aeb0cc",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 3420,
        "wires": [
            [
                "022b64fd35d27102"
            ]
        ]
    },
    {
        "id": "022b64fd35d27102",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 890,
        "y": 3420,
        "wires": [
            [
                "d8fd038fa5e2f9f8"
            ]
        ]
    },
    {
        "id": "d8fd038fa5e2f9f8",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1120,
        "y": 3420,
        "wires": [
            [
                "103ae588ff4b8869"
            ]
        ]
    },
    {
        "id": "103ae588ff4b8869",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1350,
        "y": 3420,
        "wires": [
            [
                "29f8b2881481bae6"
            ],
            [
                "e20baa80c9bc30ea"
            ]
        ]
    },
    {
        "id": "e20baa80c9bc30ea",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_T3CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 1610,
        "y": 3440,
        "wires": [
            []
        ]
    },
    {
        "id": "ed7d4177863645f1",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 400,
        "y": 2880,
        "wires": []
    },
    {
        "id": "e86fb078be75fe61",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 2920,
        "wires": [
            [
                "62c94234f350e41a",
                "3131098e24a6c752"
            ]
        ]
    },
    {
        "id": "62c94234f350e41a",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 2920,
        "wires": []
    },
    {
        "id": "151404d644e8a00b",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 560,
        "y": 2920,
        "wires": [
            [
                "73f757403ed5b914",
                "a759403dc2d818e0"
            ]
        ]
    },
    {
        "id": "73f757403ed5b914",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 2920,
        "wires": [
            []
        ]
    },
    {
        "id": "39865fdef0716c99",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 330,
        "y": 3160,
        "wires": []
    },
    {
        "id": "5244f483ad448b21",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 450,
        "y": 3333,
        "wires": []
    },
    {
        "id": "ec0187f37fc69003",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 440,
        "y": 3580,
        "wires": []
    },
    {
        "id": "80113265a7db1723",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 1610,
        "y": 3160,
        "wires": []
    },
    {
        "id": "2969f69ef0380e7e",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 480,
        "y": 3500,
        "wires": []
    },
    {
        "id": "e9cac7ceaf318fe8",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-T3",
        "links": [
            "5ca4bb54d93d6c1c",
            "0606d5b6cb1f13ae"
        ],
        "x": 355,
        "y": 2820,
        "wires": [
            [
                "3131098e24a6c752"
            ]
        ]
    },
    {
        "id": "3131098e24a6c752",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_T3CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 2820,
        "wires": [
            [
                "f91635d380714ee7",
                "d065142404b71373"
            ]
        ]
    },
    {
        "id": "2e42e5190163b09c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 2820,
        "wires": [
            [
                "4d0b5f195971ea2d"
            ],
            [
                "a69e47ff4061e8e5"
            ]
        ]
    },
    {
        "id": "4d0b5f195971ea2d",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 2800,
        "wires": [
            [
                "4051a9eb3033671a"
            ]
        ]
    },
    {
        "id": "a69e47ff4061e8e5",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 2840,
        "wires": [
            [
                "34c6fa771b9c21ad"
            ]
        ]
    },
    {
        "id": "4051a9eb3033671a",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 2800,
        "wires": [
            [
                "9a8cdfbaa85c113e"
            ]
        ]
    },
    {
        "id": "34c6fa771b9c21ad",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1290,
        "y": 2840,
        "wires": [
            [
                "9a8cdfbaa85c113e"
            ]
        ]
    },
    {
        "id": "f91635d380714ee7",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 780,
        "y": 2820,
        "wires": [
            [
                "2e42e5190163b09c"
            ]
        ]
    },
    {
        "id": "3f7d749f682ae02c",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp T3CH",
        "mode": "link",
        "links": [
            "114f424f35a2c6c8",
            "9b0e62d3183e2c9f"
        ],
        "x": 1815,
        "y": 3200,
        "wires": []
    },
    {
        "id": "f2ab92cdd3c7caac",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 340,
        "y": 3000,
        "wires": [
            [
                "151404d644e8a00b"
            ]
        ]
    },
    {
        "id": "ccccbdad9b37abbd",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 340,
        "y": 3040,
        "wires": [
            [
                "151404d644e8a00b"
            ]
        ]
    },
    {
        "id": "bd47f199eb666320",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 330,
        "y": 2920,
        "wires": [
            [
                "151404d644e8a00b"
            ]
        ]
    },
    {
        "id": "8661eff3a34bee3a",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 330,
        "y": 2960,
        "wires": [
            [
                "151404d644e8a00b"
            ]
        ]
    },
    {
        "id": "9aa54be81033fa55",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1210,
        "y": 3200,
        "wires": [
            [
                "527c53ab7d9af8be"
            ]
        ]
    },
    {
        "id": "d065142404b71373",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 2780,
        "wires": []
    },
    {
        "id": "91cdea835ff34813",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 3200,
        "wires": [
            [
                "9aa54be81033fa55"
            ]
        ]
    },
    {
        "id": "a759403dc2d818e0",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 3000,
        "wires": []
    },
    {
        "id": "4dddc3a4911ea9f5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 470,
        "y": 3300,
        "wires": []
    },
    {
        "id": "bc8141fb1f10969d",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 430,
        "y": 2740,
        "wires": []
    },
    {
        "id": "f57d450af80b309e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 3660,
        "wires": [
            [
                "950bbbd112183c59"
            ]
        ]
    },
    {
        "id": "8dbdfc2f33d0d606",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "TEMP3",
        "info": "",
        "x": 190,
        "y": 2700,
        "wires": []
    },
    {
        "id": "312981fffc050fac",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chtemp3_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 3600,
        "wires": [
            [
                "4ca8e6f8d3b90de3"
            ]
        ]
    },
    {
        "id": "a9a3c17e62296de1",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1430,
        "y": 3600,
        "wires": [
            [
                "39499e5b31e0d924"
            ],
            [
                "9099c5ea513e8eaf"
            ]
        ]
    },
    {
        "id": "39499e5b31e0d924",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 3580,
        "wires": [
            [
                "f59492cf08144ba5"
            ]
        ]
    },
    {
        "id": "9099c5ea513e8eaf",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1620,
        "y": 3620,
        "wires": [
            [
                "9ed377a7385b58fa"
            ]
        ]
    },
    {
        "id": "0c2d6a8876018013",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1910,
        "y": 3600,
        "wires": [
            []
        ]
    },
    {
        "id": "4ca8e6f8d3b90de3",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 1260,
        "y": 3600,
        "wires": [
            [
                "a9a3c17e62296de1"
            ]
        ]
    },
    {
        "id": "86d24906d477d6e2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 1170,
        "y": 3560,
        "wires": []
    },
    {
        "id": "9ed377a7385b58fa",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 3620,
        "wires": [
            [
                "0c2d6a8876018013"
            ]
        ]
    },
    {
        "id": "f59492cf08144ba5",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 1790,
        "y": 3580,
        "wires": [
            [
                "0c2d6a8876018013"
            ]
        ]
    },
    {
        "id": "ba479194435de5a9",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter3",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 880,
        "y": 3500,
        "wires": [
            [
                "312981fffc050fac"
            ]
        ]
    },
    {
        "id": "9a8cdfbaa85c113e",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 1460,
        "y": 2760,
        "wires": [
            []
        ]
    },
    {
        "id": "e6c96b38d0921a4f",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2580,
        "y": 680,
        "wires": [
            [
                "1b2b9c2f61e46037"
            ]
        ]
    },
    {
        "id": "1b2b9c2f61e46037",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2770,
        "y": 680,
        "wires": [
            [
                "0bda842f94a0b555",
                "b6460a73cc7ca163"
            ]
        ]
    },
    {
        "id": "80bcf3712c4b3a7f",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3200,
        "y": 720,
        "wires": [
            [
                "2f6f91b00809216b"
            ]
        ]
    },
    {
        "id": "e6459dd9d33468e9",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3610,
        "y": 860,
        "wires": [
            [
                "9eddbd02a3c33161"
            ]
        ]
    },
    {
        "id": "9eddbd02a3c33161",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3850,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "a8475efc17e25170",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2420,
        "y": 680,
        "wires": [
            [
                "e6c96b38d0921a4f"
            ]
        ]
    },
    {
        "id": "0e129212dcb36a1d",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3310,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "b6460a73cc7ca163",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2950,
        "y": 680,
        "wires": [
            [
                "7340730a94be34da",
                "80bcf3712c4b3a7f",
                "869ce6f315699a85"
            ],
            [
                "483c55309231b76e"
            ]
        ]
    },
    {
        "id": "e1e2e0dd39c7c8d1",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2450,
        "y": 1260,
        "wires": [
            [
                "0e129212dcb36a1d"
            ]
        ]
    },
    {
        "id": "4b59daa4645478d2",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2600,
        "y": 1140,
        "wires": [
            [
                "adea010739349b7a"
            ]
        ]
    },
    {
        "id": "adea010739349b7a",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2800,
        "y": 1140,
        "wires": [
            [
                "a028074c7455f64c"
            ]
        ]
    },
    {
        "id": "06efc1507b3ed44b",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2440,
        "y": 1140,
        "wires": [
            [
                "4b59daa4645478d2"
            ]
        ]
    },
    {
        "id": "9266392577c39020",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 2430,
        "y": 1220,
        "wires": []
    },
    {
        "id": "e7a90e88fa886013",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2780,
        "y": 640,
        "wires": []
    },
    {
        "id": "c16635857c441c63",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2490,
        "y": 1100,
        "wires": []
    },
    {
        "id": "8be8028edf284795",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2620,
        "y": 260,
        "wires": []
    },
    {
        "id": "32573be5ee364583",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3830,
        "y": 720,
        "wires": []
    },
    {
        "id": "0bda842f94a0b555",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2790,
        "y": 720,
        "wires": []
    },
    {
        "id": "7340730a94be34da",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3150,
        "y": 600,
        "wires": []
    },
    {
        "id": "483c55309231b76e",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3150,
        "y": 760,
        "wires": []
    },
    {
        "id": "67896cebea62e5c3",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond F1CH",
        "links": [
            "6a9e42334dfbcf0e",
            "9242208ed543c5e0"
        ],
        "x": 2475,
        "y": 880,
        "wires": [
            [
                "a7b16526ded1e33c",
                "eb5e214b5697e58a"
            ]
        ]
    },
    {
        "id": "2501d215f655ad43",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3630,
        "y": 740,
        "wires": [
            [
                "e3534674e56ce691",
                "b178b21a48101cbc"
            ]
        ]
    },
    {
        "id": "e3534674e56ce691",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3760,
        "y": 680,
        "wires": [
            [
                "32573be5ee364583",
                "42162597a1e23b42"
            ]
        ]
    },
    {
        "id": "b178b21a48101cbc",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3810,
        "y": 760,
        "wires": []
    },
    {
        "id": "2f6f91b00809216b",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no9= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3480,
        "y": 680,
        "wires": [
            [
                "e3534674e56ce691"
            ]
        ]
    },
    {
        "id": "a7b16526ded1e33c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2630,
        "y": 880,
        "wires": [
            [
                "2f61eca026ebe566",
                "32c1472c7c359801"
            ],
            [
                "32c1472c7c359801"
            ],
            []
        ]
    },
    {
        "id": "2f61eca026ebe566",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2830,
        "y": 853,
        "wires": []
    },
    {
        "id": "ddb9250e8058db84",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2540,
        "y": 940,
        "wires": [
            [
                "a7b16526ded1e33c"
            ]
        ]
    },
    {
        "id": "32c1472c7c359801",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2860,
        "y": 900,
        "wires": [
            [
                "87021e6c969f83e2"
            ]
        ]
    },
    {
        "id": "87021e6c969f83e2",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3050,
        "y": 900,
        "wires": [
            [
                "7ead8b46474eee33"
            ]
        ]
    },
    {
        "id": "7ead8b46474eee33",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3260,
        "y": 900,
        "wires": [
            [
                "9ba5ec064040e552"
            ]
        ]
    },
    {
        "id": "9ba5ec064040e552",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3450,
        "y": 900,
        "wires": [
            [
                "e6459dd9d33468e9"
            ],
            [
                "06917786e0c1f945"
            ]
        ]
    },
    {
        "id": "06917786e0c1f945",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F1CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3710,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "2b896a9ae2c66c9e",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 2560,
        "y": 360,
        "wires": []
    },
    {
        "id": "f35c22a5d8705cbc",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3310,
        "y": 400,
        "wires": [
            [
                "08f577acfbda458d",
                "bd9418f23640e466"
            ]
        ]
    },
    {
        "id": "08f577acfbda458d",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3490,
        "y": 400,
        "wires": []
    },
    {
        "id": "92845659e8d8a3c4",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 2720,
        "y": 400,
        "wires": [
            [
                "cd7f24b8a416662c",
                "f4f40d9041260477"
            ]
        ]
    },
    {
        "id": "cd7f24b8a416662c",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "0de99afac90d24b5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2490,
        "y": 640,
        "wires": []
    },
    {
        "id": "ba852ac46bcd26f1",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2610,
        "y": 813,
        "wires": []
    },
    {
        "id": "b7dd77754b887dd2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2600,
        "y": 1060,
        "wires": []
    },
    {
        "id": "5bea09ec0a1a16d7",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3830,
        "y": 640,
        "wires": []
    },
    {
        "id": "f4850a9e4530bd46",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2640,
        "y": 980,
        "wires": []
    },
    {
        "id": "5ea43e5c7a22a73d",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-F1",
        "links": [
            "185150ffd8bd7e7c",
            "993bb173a747c010"
        ],
        "x": 2515,
        "y": 300,
        "wires": [
            [
                "bd9418f23640e466"
            ]
        ]
    },
    {
        "id": "bd9418f23640e466",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_F1CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2750,
        "y": 300,
        "wires": [
            [
                "7d4e48d573026f36",
                "f2801a068999fb82"
            ]
        ]
    },
    {
        "id": "eb4be2776d472021",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3110,
        "y": 300,
        "wires": [
            [
                "382a5ab8b8797fb8"
            ],
            [
                "1ac0a62f3f1c3bc1"
            ]
        ]
    },
    {
        "id": "382a5ab8b8797fb8",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3300,
        "y": 280,
        "wires": [
            [
                "cace038f206f4dbf"
            ]
        ]
    },
    {
        "id": "1ac0a62f3f1c3bc1",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3300,
        "y": 320,
        "wires": [
            [
                "66776a1f88b32325"
            ]
        ]
    },
    {
        "id": "cace038f206f4dbf",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3450,
        "y": 280,
        "wires": [
            [
                "42b9de7da497a5a3"
            ]
        ]
    },
    {
        "id": "66776a1f88b32325",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3450,
        "y": 320,
        "wires": [
            [
                "42b9de7da497a5a3"
            ]
        ]
    },
    {
        "id": "7d4e48d573026f36",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2940,
        "y": 300,
        "wires": [
            [
                "eb4be2776d472021"
            ]
        ]
    },
    {
        "id": "42162597a1e23b42",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp F1CH",
        "mode": "link",
        "links": [
            "b66f47936c125294",
            "46c9b3ad3a1db262"
        ],
        "x": 4015,
        "y": 680,
        "wires": []
    },
    {
        "id": "7a4568e07d3b1c7b",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2500,
        "y": 480,
        "wires": [
            [
                "92845659e8d8a3c4"
            ]
        ]
    },
    {
        "id": "502befad14ad897d",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2500,
        "y": 520,
        "wires": [
            [
                "92845659e8d8a3c4"
            ]
        ]
    },
    {
        "id": "8fe631a0abe4ab24",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2490,
        "y": 400,
        "wires": [
            [
                "92845659e8d8a3c4"
            ]
        ]
    },
    {
        "id": "3220267a1f91760f",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2490,
        "y": 440,
        "wires": [
            [
                "92845659e8d8a3c4"
            ]
        ]
    },
    {
        "id": "64438ffb7c7f0f8d",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "9",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3330,
        "y": 680,
        "wires": [
            [
                "2f6f91b00809216b"
            ]
        ]
    },
    {
        "id": "f2801a068999fb82",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2930,
        "y": 260,
        "wires": []
    },
    {
        "id": "869ce6f315699a85",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3180,
        "y": 680,
        "wires": [
            [
                "64438ffb7c7f0f8d"
            ]
        ]
    },
    {
        "id": "f4f40d9041260477",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2910,
        "y": 480,
        "wires": []
    },
    {
        "id": "bc105f2c0849a5e2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2630,
        "y": 780,
        "wires": []
    },
    {
        "id": "10c9523836c257c5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2590,
        "y": 220,
        "wires": []
    },
    {
        "id": "a028074c7455f64c",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2980,
        "y": 1140,
        "wires": [
            [
                "a7b16526ded1e33c"
            ]
        ]
    },
    {
        "id": "b05a508447670913",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FLOW1",
        "info": "",
        "x": 2350,
        "y": 180,
        "wires": []
    },
    {
        "id": "3992a0198f0a0618",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chflow1_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3230,
        "y": 1080,
        "wires": [
            [
                "cfcaf3c17dc2d75e"
            ]
        ]
    },
    {
        "id": "74e1d49575b1c36c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3590,
        "y": 1080,
        "wires": [
            [
                "c52bf464598f3ec1"
            ],
            [
                "063038c0cad9fc92"
            ]
        ]
    },
    {
        "id": "c52bf464598f3ec1",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3780,
        "y": 1060,
        "wires": [
            [
                "1a5cc02f8425f3c3"
            ]
        ]
    },
    {
        "id": "063038c0cad9fc92",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3780,
        "y": 1100,
        "wires": [
            [
                "264cc986ac5a6f26"
            ]
        ]
    },
    {
        "id": "73437880f4e00cca",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4070,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "cfcaf3c17dc2d75e",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3420,
        "y": 1080,
        "wires": [
            [
                "74e1d49575b1c36c"
            ]
        ]
    },
    {
        "id": "aed9be10bc4b46a8",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3330,
        "y": 1040,
        "wires": []
    },
    {
        "id": "264cc986ac5a6f26",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3950,
        "y": 1100,
        "wires": [
            [
                "73437880f4e00cca"
            ]
        ]
    },
    {
        "id": "1a5cc02f8425f3c3",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3950,
        "y": 1060,
        "wires": [
            [
                "73437880f4e00cca"
            ]
        ]
    },
    {
        "id": "eb5e214b5697e58a",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter9",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3040,
        "y": 980,
        "wires": [
            [
                "3992a0198f0a0618"
            ]
        ]
    },
    {
        "id": "42b9de7da497a5a3",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3620,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "c86446ba8b6e4b07",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2580,
        "y": 1920,
        "wires": [
            [
                "d0f90f4fa2bf3681"
            ]
        ]
    },
    {
        "id": "d0f90f4fa2bf3681",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2770,
        "y": 1920,
        "wires": [
            [
                "1284b39d2e2935bd",
                "bbc8e04bbbc8afac"
            ]
        ]
    },
    {
        "id": "125d114dda16e445",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3200,
        "y": 1960,
        "wires": [
            [
                "f258958a4f5484e0"
            ]
        ]
    },
    {
        "id": "72971fb9f5c0ceb7",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3630,
        "y": 2100,
        "wires": [
            [
                "93b271c191257cac"
            ]
        ]
    },
    {
        "id": "93b271c191257cac",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3870,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "7f8f0c1cccda33d7",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2420,
        "y": 1920,
        "wires": [
            [
                "c86446ba8b6e4b07"
            ]
        ]
    },
    {
        "id": "9830bcf7b6c3b566",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3310,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "bbc8e04bbbc8afac",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2950,
        "y": 1920,
        "wires": [
            [
                "6e7b64500f8ad27d",
                "125d114dda16e445",
                "01c604a2febbd21a"
            ],
            [
                "b23def757316b967"
            ]
        ]
    },
    {
        "id": "5582863ad871afd8",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2450,
        "y": 2500,
        "wires": [
            [
                "9830bcf7b6c3b566"
            ]
        ]
    },
    {
        "id": "3a1ea79447de6b3d",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2600,
        "y": 2380,
        "wires": [
            [
                "c9d11a56f669e614"
            ]
        ]
    },
    {
        "id": "c9d11a56f669e614",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2800,
        "y": 2380,
        "wires": [
            [
                "33fea99de36323fa"
            ]
        ]
    },
    {
        "id": "d9b083554ca8a5bf",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2440,
        "y": 2380,
        "wires": [
            [
                "3a1ea79447de6b3d"
            ]
        ]
    },
    {
        "id": "6f43ae350a401dc3",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 2430,
        "y": 2460,
        "wires": []
    },
    {
        "id": "3da5b04de1efec40",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2780,
        "y": 1880,
        "wires": []
    },
    {
        "id": "a7d2afe25f823618",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2490,
        "y": 2340,
        "wires": []
    },
    {
        "id": "c7c8b9b78ab859e5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2620,
        "y": 1500,
        "wires": []
    },
    {
        "id": "069977bf28d17457",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3850,
        "y": 1960,
        "wires": []
    },
    {
        "id": "1284b39d2e2935bd",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2790,
        "y": 1960,
        "wires": []
    },
    {
        "id": "6e7b64500f8ad27d",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3150,
        "y": 1840,
        "wires": []
    },
    {
        "id": "b23def757316b967",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3150,
        "y": 2000,
        "wires": []
    },
    {
        "id": "49d9ba9b0ef3dd83",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond F2CH",
        "links": [
            "cc9e9674037fe0da",
            "450d282160ce6985"
        ],
        "x": 2475,
        "y": 2120,
        "wires": [
            [
                "5476d18ad7f7a490",
                "7464475f17ac4f1e"
            ]
        ]
    },
    {
        "id": "20d202707b0b13fd",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3650,
        "y": 1980,
        "wires": [
            [
                "a210af8b68903fc1",
                "7b33ca62a164903d"
            ]
        ]
    },
    {
        "id": "a210af8b68903fc1",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3780,
        "y": 1920,
        "wires": [
            [
                "069977bf28d17457",
                "c97b94f074622a84"
            ]
        ]
    },
    {
        "id": "7b33ca62a164903d",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3830,
        "y": 2000,
        "wires": []
    },
    {
        "id": "f258958a4f5484e0",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no10= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3500,
        "y": 1920,
        "wires": [
            [
                "a210af8b68903fc1"
            ]
        ]
    },
    {
        "id": "5476d18ad7f7a490",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2630,
        "y": 2120,
        "wires": [
            [
                "602fe1dfd2ed4a2c",
                "126246495e401bd5"
            ],
            [
                "126246495e401bd5"
            ],
            []
        ]
    },
    {
        "id": "602fe1dfd2ed4a2c",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2830,
        "y": 2093,
        "wires": []
    },
    {
        "id": "91f175067b408b97",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2540,
        "y": 2180,
        "wires": [
            [
                "5476d18ad7f7a490"
            ]
        ]
    },
    {
        "id": "126246495e401bd5",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2860,
        "y": 2140,
        "wires": [
            [
                "3d0b1cbf1c859c88"
            ]
        ]
    },
    {
        "id": "3d0b1cbf1c859c88",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3050,
        "y": 2140,
        "wires": [
            [
                "6f80182b8586d7a0"
            ]
        ]
    },
    {
        "id": "6f80182b8586d7a0",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3280,
        "y": 2140,
        "wires": [
            [
                "b063cf6651ce1133"
            ]
        ]
    },
    {
        "id": "b063cf6651ce1133",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3470,
        "y": 2140,
        "wires": [
            [
                "72971fb9f5c0ceb7"
            ],
            [
                "3cba90534353d978"
            ]
        ]
    },
    {
        "id": "3cba90534353d978",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F2CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3730,
        "y": 2160,
        "wires": [
            []
        ]
    },
    {
        "id": "7346d477bbb51092",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 2560,
        "y": 1600,
        "wires": []
    },
    {
        "id": "34eb0aaee4b43cc3",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3310,
        "y": 1640,
        "wires": [
            [
                "6114f90ed4ccd1ae",
                "6d2ab5d21c3d558d"
            ]
        ]
    },
    {
        "id": "6114f90ed4ccd1ae",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3490,
        "y": 1640,
        "wires": []
    },
    {
        "id": "d28504de4910fbe7",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 2720,
        "y": 1640,
        "wires": [
            [
                "066317b96b82e05e",
                "0d6619efa46feb1b"
            ]
        ]
    },
    {
        "id": "066317b96b82e05e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "cf756fc7af8e6077",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2490,
        "y": 1880,
        "wires": []
    },
    {
        "id": "a1846b4c01b2e5d2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2610,
        "y": 2053,
        "wires": []
    },
    {
        "id": "7f50705c9c0f99d5",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2600,
        "y": 2300,
        "wires": []
    },
    {
        "id": "64c473f9ce6b786a",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3850,
        "y": 1880,
        "wires": []
    },
    {
        "id": "b21ec6b4af2523b0",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2640,
        "y": 2220,
        "wires": []
    },
    {
        "id": "b358fe4940e9f644",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-F2",
        "links": [
            "e88933b246ec59e1",
            "aa5fb55ce8dbb569"
        ],
        "x": 2515,
        "y": 1540,
        "wires": [
            [
                "6d2ab5d21c3d558d"
            ]
        ]
    },
    {
        "id": "6d2ab5d21c3d558d",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_F2CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2750,
        "y": 1540,
        "wires": [
            [
                "b12ad491fc386649",
                "e4afaae747d194de"
            ]
        ]
    },
    {
        "id": "42197b444c5b9df3",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3110,
        "y": 1540,
        "wires": [
            [
                "da137a0b582f83e9"
            ],
            [
                "0c2af9c730069a35"
            ]
        ]
    },
    {
        "id": "da137a0b582f83e9",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3300,
        "y": 1520,
        "wires": [
            [
                "5d3e45ac6bce2b29"
            ]
        ]
    },
    {
        "id": "0c2af9c730069a35",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3300,
        "y": 1560,
        "wires": [
            [
                "2a8590a3529d8e63"
            ]
        ]
    },
    {
        "id": "5d3e45ac6bce2b29",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3450,
        "y": 1520,
        "wires": [
            [
                "b6160dff0f2e387e"
            ]
        ]
    },
    {
        "id": "2a8590a3529d8e63",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3450,
        "y": 1560,
        "wires": [
            [
                "b6160dff0f2e387e"
            ]
        ]
    },
    {
        "id": "b12ad491fc386649",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2940,
        "y": 1540,
        "wires": [
            [
                "42197b444c5b9df3"
            ]
        ]
    },
    {
        "id": "c97b94f074622a84",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp F2CH",
        "mode": "link",
        "links": [
            "06dc4eda255d48ba",
            "3f45826873c3d613"
        ],
        "x": 4035,
        "y": 1920,
        "wires": []
    },
    {
        "id": "3c1a4d07e41dcbc2",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2500,
        "y": 1720,
        "wires": [
            [
                "d28504de4910fbe7"
            ]
        ]
    },
    {
        "id": "2e78db057da8603d",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2500,
        "y": 1760,
        "wires": [
            [
                "d28504de4910fbe7"
            ]
        ]
    },
    {
        "id": "8e46ad9f81fc3cca",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2490,
        "y": 1640,
        "wires": [
            [
                "d28504de4910fbe7"
            ]
        ]
    },
    {
        "id": "3c907f282b2d575a",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2490,
        "y": 1680,
        "wires": [
            [
                "d28504de4910fbe7"
            ]
        ]
    },
    {
        "id": "1259a2a61c70e5b3",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "10",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3350,
        "y": 1920,
        "wires": [
            [
                "f258958a4f5484e0"
            ]
        ]
    },
    {
        "id": "e4afaae747d194de",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2930,
        "y": 1500,
        "wires": []
    },
    {
        "id": "01c604a2febbd21a",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3180,
        "y": 1920,
        "wires": [
            [
                "1259a2a61c70e5b3"
            ]
        ]
    },
    {
        "id": "0d6619efa46feb1b",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2910,
        "y": 1720,
        "wires": []
    },
    {
        "id": "3b88aada0df39992",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2630,
        "y": 2020,
        "wires": []
    },
    {
        "id": "a10125a5dd5ae540",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2590,
        "y": 1460,
        "wires": []
    },
    {
        "id": "33fea99de36323fa",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2980,
        "y": 2380,
        "wires": [
            [
                "5476d18ad7f7a490"
            ]
        ]
    },
    {
        "id": "b7d4e126439dfcb9",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FLOW2",
        "info": "",
        "x": 2350,
        "y": 1420,
        "wires": []
    },
    {
        "id": "ca0d0b4544d4b45e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chflow2_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3230,
        "y": 2320,
        "wires": [
            [
                "83baace3116f3df3"
            ]
        ]
    },
    {
        "id": "937a547fa35f9ef1",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3590,
        "y": 2320,
        "wires": [
            [
                "4d436ffc2336a673"
            ],
            [
                "0e14bebea430264a"
            ]
        ]
    },
    {
        "id": "4d436ffc2336a673",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3780,
        "y": 2300,
        "wires": [
            [
                "5269e7025f1ee32b"
            ]
        ]
    },
    {
        "id": "0e14bebea430264a",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3780,
        "y": 2340,
        "wires": [
            [
                "2c0a6a8e29ab475f"
            ]
        ]
    },
    {
        "id": "ed8f1e75afc2ef0a",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4070,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "83baace3116f3df3",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3420,
        "y": 2320,
        "wires": [
            [
                "937a547fa35f9ef1"
            ]
        ]
    },
    {
        "id": "eb46386cb7095858",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3330,
        "y": 2280,
        "wires": []
    },
    {
        "id": "2c0a6a8e29ab475f",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3950,
        "y": 2340,
        "wires": [
            [
                "ed8f1e75afc2ef0a"
            ]
        ]
    },
    {
        "id": "5269e7025f1ee32b",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3950,
        "y": 2300,
        "wires": [
            [
                "ed8f1e75afc2ef0a"
            ]
        ]
    },
    {
        "id": "7464475f17ac4f1e",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter10",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3040,
        "y": 2220,
        "wires": [
            [
                "ca0d0b4544d4b45e"
            ]
        ]
    },
    {
        "id": "b6160dff0f2e387e",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3620,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "38bb824829179654",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2560,
        "y": 3200,
        "wires": [
            [
                "12a94162cd753b04"
            ]
        ]
    },
    {
        "id": "12a94162cd753b04",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2750,
        "y": 3200,
        "wires": [
            [
                "3c14ade8bc4bdb83",
                "1fd11ff551b7599a"
            ]
        ]
    },
    {
        "id": "5735478d6b12a5c0",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "d": true,
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.slicedpayload = a;\nmsg.payload=msg.payload[0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3180,
        "y": 3240,
        "wires": [
            [
                "1028241b0602f31a"
            ]
        ]
    },
    {
        "id": "5b44422bcaeb7b82",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Writer",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "",
        "strings": false,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3610,
        "y": 3380,
        "wires": [
            [
                "d97d274cf1f149e8"
            ]
        ]
    },
    {
        "id": "d97d274cf1f149e8",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 3850,
        "y": 3380,
        "wires": [
            []
        ]
    },
    {
        "id": "edb6766464eb7813",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "35",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2400,
        "y": 3200,
        "wires": [
            [
                "38bb824829179654"
            ]
        ]
    },
    {
        "id": "dcb4e8d41931a0d9",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3290,
        "y": 3780,
        "wires": [
            []
        ]
    },
    {
        "id": "1fd11ff551b7599a",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2930,
        "y": 3200,
        "wires": [
            [
                "afcffb486641fe9b",
                "5735478d6b12a5c0",
                "1d360e7a802e4bd7"
            ],
            [
                "04bebd07aa8bac2c"
            ]
        ]
    },
    {
        "id": "710fbf79dc98c96e",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "Inject 0",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 2430,
        "y": 3780,
        "wires": [
            [
                "dcb4e8d41931a0d9"
            ]
        ]
    },
    {
        "id": "48e31f99c7a41742",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2580,
        "y": 3660,
        "wires": [
            [
                "e23a4c1ebc1e4468"
            ]
        ]
    },
    {
        "id": "e23a4c1ebc1e4468",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "one",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 2780,
        "y": 3660,
        "wires": [
            [
                "4516571ce096e246"
            ]
        ]
    },
    {
        "id": "af2ab405e1872262",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "flush",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2420,
        "y": 3660,
        "wires": [
            [
                "48e31f99c7a41742"
            ]
        ]
    },
    {
        "id": "35486bb952a2e970",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "DELETE FILE",
        "info": "",
        "x": 2410,
        "y": 3740,
        "wires": []
    },
    {
        "id": "7c04367506523ed3",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE QUEUE BY ROW",
        "info": "",
        "x": 2760,
        "y": 3160,
        "wires": []
    },
    {
        "id": "85601231cf56d693",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RELEASE/FLUSH ALL QUEUE",
        "info": "",
        "x": 2470,
        "y": 3620,
        "wires": []
    },
    {
        "id": "b3837d5d7cade45b",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FROM INJECT/HARDWARE",
        "info": "This will only give 1/0 value.",
        "x": 2600,
        "y": 2780,
        "wires": []
    },
    {
        "id": "a60a819af2ef1383",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3830,
        "y": 3240,
        "wires": []
    },
    {
        "id": "3c14ade8bc4bdb83",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2770,
        "y": 3240,
        "wires": []
    },
    {
        "id": "afcffb486641fe9b",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3130,
        "y": 3120,
        "wires": []
    },
    {
        "id": "04bebd07aa8bac2c",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3130,
        "y": 3280,
        "wires": []
    },
    {
        "id": "fc14514f6b56e0bc",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "receive server respond F3CH",
        "links": [
            "824672443667889d",
            "6bd829edd82ac25f"
        ],
        "x": 2455,
        "y": 3400,
        "wires": [
            [
                "4aa08568acb815b3",
                "34eec73d07f7e5f6"
            ]
        ]
    },
    {
        "id": "d9421c187075dbd1",
        "type": "json",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 3630,
        "y": 3260,
        "wires": [
            [
                "f275eaffc036c4f9",
                "1fdd5333fbb627bb"
            ]
        ]
    },
    {
        "id": "f275eaffc036c4f9",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.headers = {};\nmsg.headers={ \n    'Content-Type': 'application/x-www-form-urlencoded'\n    //'Content-Type': 'application/json'\n};\nconst x=msg.payload;\nmsg.payload = {};\nmsg.payload={ \n    'data': x\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3760,
        "y": 3200,
        "wires": [
            [
                "a60a819af2ef1383",
                "a5894879ad2e3056"
            ]
        ]
    },
    {
        "id": "1fdd5333fbb627bb",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3810,
        "y": 3280,
        "wires": []
    },
    {
        "id": "1028241b0602f31a",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.type2= msg.payload.col6;\nmsg.parameter= msg.payload.col3;\nmsg.msg_no11= msg.payload.col5;\nmsg.payload = {\n    'data':{\n        'date_time': msg.payload.col1,\n        'unique_id':msg.payload.col2,\n        'parameter': msg.payload.col3,\n        'value': msg.payload.col4,\n        'msg_no': msg.payload.col5,\n        'type': msg.payload.col6\n\n    }\n};\n\n\n/*\nmsg.id1 = 1;\n\nconst value = msg.temp;\n\nmsg.msg_no1=msg.id1+\"_\"+msg.dt_mc+\"_\"+msg.msg_no1+\"_\"+msg.type2;\nmsg.payload={\n    \"data\":{\n        \"date_time\":msg.dt_mc,\n        \"unique_id\":msg.id1,\n        \"parameter\":parameter,\n        \"value\":value,\n        \"msg_no\": msg.msg_no1,\n        \"type\":msg.type2\n    }\n}\n*/\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3480,
        "y": 3200,
        "wires": [
            [
                "f275eaffc036c4f9"
            ]
        ]
    },
    {
        "id": "4aa08568acb815b3",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "status_code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "400",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 2610,
        "y": 3400,
        "wires": [
            [
                "25b9859619177b7c",
                "8c98f10ac9d6d06c"
            ],
            [
                "8c98f10ac9d6d06c"
            ],
            []
        ]
    },
    {
        "id": "25b9859619177b7c",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2810,
        "y": 3373,
        "wires": []
    },
    {
        "id": "8b1191deb6b5dfbd",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual release (without server response)",
        "props": [
            {
                "p": "status_code",
                "v": "200",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "str",
        "x": 2520,
        "y": 3460,
        "wires": [
            [
                "4aa08568acb815b3"
            ]
        ]
    },
    {
        "id": "8c98f10ac9d6d06c",
        "type": "file in",
        "z": "c00de09a8dc825d9",
        "name": "Read CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2840,
        "y": 3420,
        "wires": [
            [
                "8de93bd58a782b79"
            ]
        ]
    },
    {
        "id": "8de93bd58a782b79",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "CSV Parser",
        "sep": ",",
        "hdrin": "",
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3030,
        "y": 3420,
        "wires": [
            [
                "40df91fc82457170"
            ]
        ]
    },
    {
        "id": "40df91fc82457170",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Remove First Row if 0",
        "func": "var a = msg.payload.slice(1);\nmsg.payload = a;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 3260,
        "y": 3420,
        "wires": [
            [
                "bc35a29c01158c11"
            ]
        ]
    },
    {
        "id": "bc35a29c01158c11",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3450,
        "y": 3420,
        "wires": [
            [
                "5b44422bcaeb7b82"
            ],
            [
                "7f835a302cb1320d"
            ]
        ]
    },
    {
        "id": "7f835a302cb1320d",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "Write Updated CSV File",
        "filename": "/home/root/MES_SYS/GMI_HVAC/queuelogging/DataAnalysis_queuelogging_F3CH.csv",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 3710,
        "y": 3440,
        "wires": [
            []
        ]
    },
    {
        "id": "d77cbe84c82ff2c2",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "MANUAL",
        "info": " ",
        "x": 2540,
        "y": 2880,
        "wires": []
    },
    {
        "id": "42c3fbca1d7a72d5",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "\nmsg.payload = {\n    'data':{\n        \n        'date_time': msg.dt_mc,\n        'machine_id': 'solpactest',\n        'uniqueid': msg.uniqueid,\n        'parameter':{\n            'count':msg.counter,\n            'state':msg.state\n        },\n        'msg_no': \"solpactest_\"+msg.dt_mc+\"_\"+msg.count+\"_\"+msg.uniqueid,\n        'package_no': msg.package_no\n    }\n\n};\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3290,
        "y": 2920,
        "wires": [
            [
                "33803a05bbebb70e",
                "478f121861ad6971"
            ]
        ]
    },
    {
        "id": "33803a05bbebb70e",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 3470,
        "y": 2920,
        "wires": []
    },
    {
        "id": "6963b14a24470f37",
        "type": "counter",
        "z": "c00de09a8dc825d9",
        "name": "",
        "init": "0",
        "step": "1",
        "lower": "",
        "upper": "",
        "mode": "increment",
        "outputs": "1",
        "x": 2700,
        "y": 2920,
        "wires": [
            [
                "aeb46bb95e8bc2d2",
                "18a305ce71d9d7ae"
            ]
        ]
    },
    {
        "id": "aeb46bb95e8bc2d2",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "",
        "func": "msg.dt_mc = new Date().toUTCString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2880,
        "y": 2920,
        "wires": [
            []
        ]
    },
    {
        "id": "66048153f840fc67",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "Inject to send data (from csv) to server",
        "info": "This will only give 1/0 value.",
        "x": 2470,
        "y": 3160,
        "wires": []
    },
    {
        "id": "930c45dd219f1a76",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "If SERVER RESPONSE success then release from que (remove at csv)",
        "info": "This will only give 1/0 value.",
        "x": 2590,
        "y": 3333,
        "wires": []
    },
    {
        "id": "ca0b820ee6d0b7f8",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FOR REF ONLY---------------------------------------------------------------------",
        "info": "This will only give 1/0 value.",
        "x": 2580,
        "y": 3580,
        "wires": []
    },
    {
        "id": "bcd41980c8062413",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 3830,
        "y": 3160,
        "wires": []
    },
    {
        "id": "a0e4eaf4615d77d7",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "if the msg.no/package no/machine no. is same then proceed to check status code",
        "info": "This will only give 1/0 value.",
        "x": 2620,
        "y": 3500,
        "wires": []
    },
    {
        "id": "c1ab79e1aae7ea06",
        "type": "link in",
        "z": "c00de09a8dc825d9",
        "name": "INQUEUE-F3",
        "links": [
            "a3ffe28f987d5a51",
            "42bc47d2a9726e27"
        ],
        "x": 2495,
        "y": 2820,
        "wires": [
            [
                "478f121861ad6971"
            ]
        ]
    },
    {
        "id": "478f121861ad6971",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\n\n// Generate out file name pattern\nmsg.fname = \"DataAnalysis_queuelogging_F3CH.csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/GMI_HVAC/queuelogging/\"+msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    //'serverResponse': global.get(\"statusCode\")\n    'date_time': msg.payload.data.date_time,\n    'unique_id': msg.payload.data.unique_id,\n    'parameter': msg.payload.data.parameter,\n    'value':msg.payload.data.value,\n    'msg_no': msg.payload.data.msg_no,\n    'type': msg.payload.data.type\n};\n\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2730,
        "y": 2820,
        "wires": [
            [
                "cd2662b710e5755c",
                "dfde183f8457f23b"
            ]
        ]
    },
    {
        "id": "2d702ca14a82abfe",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3090,
        "y": 2820,
        "wires": [
            [
                "abb0864b7f42bd12"
            ],
            [
                "49481952a2058906"
            ]
        ]
    },
    {
        "id": "abb0864b7f42bd12",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3280,
        "y": 2800,
        "wires": [
            [
                "e78069d7f5ae7e9b"
            ]
        ]
    },
    {
        "id": "49481952a2058906",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3280,
        "y": 2840,
        "wires": [
            [
                "2a040ea59cc6d114"
            ]
        ]
    },
    {
        "id": "e78069d7f5ae7e9b",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3430,
        "y": 2800,
        "wires": [
            [
                "e49b991b80f27f87"
            ]
        ]
    },
    {
        "id": "2a040ea59cc6d114",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "date_time,unique_id,parameter,value,msg_no,type",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3430,
        "y": 2840,
        "wires": [
            [
                "e49b991b80f27f87"
            ]
        ]
    },
    {
        "id": "cd2662b710e5755c",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 2920,
        "y": 2820,
        "wires": [
            [
                "2d702ca14a82abfe"
            ]
        ]
    },
    {
        "id": "a5894879ad2e3056",
        "type": "link out",
        "z": "c00de09a8dc825d9",
        "name": "request to server resp F3CH",
        "mode": "link",
        "links": [
            "4da3ac25a24c247c",
            "e5908188f5630304"
        ],
        "x": 4015,
        "y": 3200,
        "wires": []
    },
    {
        "id": "d136f9f6996aa8b2",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 no count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2480,
        "y": 3000,
        "wires": [
            [
                "6963b14a24470f37"
            ]
        ]
    },
    {
        "id": "5fc42c577dceb3b0",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 no count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "008",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "1",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2480,
        "y": 3040,
        "wires": [
            [
                "6963b14a24470f37"
            ]
        ]
    },
    {
        "id": "08293029c2a8d26e",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 1 with count",
        "props": [
            {
                "p": "state",
                "v": "1",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "5",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2470,
        "y": 2920,
        "wires": [
            [
                "6963b14a24470f37"
            ]
        ]
    },
    {
        "id": "9dd9a06e62558f7c",
        "type": "inject",
        "z": "c00de09a8dc825d9",
        "name": "manual inject state 0 with count",
        "props": [
            {
                "p": "state",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "uniqueid",
                "v": "009",
                "vt": "str"
            },
            {
                "p": "package_no",
                "v": "2",
                "vt": "num"
            },
            {
                "p": "counter",
                "v": "7",
                "vt": "num"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 2470,
        "y": 2960,
        "wires": [
            [
                "6963b14a24470f37"
            ]
        ]
    },
    {
        "id": "9fc3d8b44e543c4c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "payload.col3",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "11",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3330,
        "y": 3200,
        "wires": [
            [
                "1028241b0602f31a"
            ]
        ]
    },
    {
        "id": "dfde183f8457f23b",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2910,
        "y": 2780,
        "wires": []
    },
    {
        "id": "1d360e7a802e4bd7",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "msg.payload=msg.payload[0]\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3160,
        "y": 3200,
        "wires": [
            [
                "9fc3d8b44e543c4c"
            ]
        ]
    },
    {
        "id": "18a305ce71d9d7ae",
        "type": "debug",
        "z": "c00de09a8dc825d9",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2890,
        "y": 3000,
        "wires": []
    },
    {
        "id": "d0d57c6a65fcf352",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2610,
        "y": 3300,
        "wires": []
    },
    {
        "id": "308b0ae0b87e5392",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "[read me] DETACH this link IF YOU DONT PLAN TO USE IT/SERVER RESPONSE",
        "info": "if you want to use this link, ensure to detach/disable the mqtt node for Counting data package at p1_c3_send data flow. To prevent data from hardware is sent to server during your testing.",
        "x": 2570,
        "y": 2740,
        "wires": []
    },
    {
        "id": "4516571ce096e246",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "send data",
        "func": "if(i=0,i<msg.payload.length,i++){\n    msg.payload=msg.payload[i];\n}\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2960,
        "y": 3660,
        "wires": [
            [
                "4aa08568acb815b3"
            ]
        ]
    },
    {
        "id": "ec96ca3af7ac4249",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "FLOW3",
        "info": "",
        "x": 2330,
        "y": 2700,
        "wires": []
    },
    {
        "id": "7c9148816085a77e",
        "type": "function",
        "z": "c00de09a8dc825d9",
        "name": "Generate  file",
        "func": "//Get the current time and convert it to text\nvar now = new Date();\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\n//var hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\n//var mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\n//var ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n//var sss = now.getMilliseconds();\n//msg.timestamp=now.getTime();\n//datetime=msg.timestamp;\n//var timestamp=dd+\"/\"+mm+\"/\"+yyyy+\",\"+hh+\":\"+mmm+\":\"+ss+\":\"+sss;\n//var data =  global.get(\"machinevalue\");\n//var machine_id = global.get(\"machine\");\n//var machine_value = msg.prod;\nvar datetime = new Date().toLocaleString(\"en-US\", {timeZone: 'Asia/Kuala_Lumpur'});\n\n// Generate out file name pattern\nmsg.fname = \"ResponseLog_chflow3_\" + dd + mm + yyyy + \".csv\";\n// Full filename with path for the file node later\n//msg.filename = \"C:\\\\Users\\\\NAFISAH\\\\Desktop\\\\MES_TEST\\\\\"+ msg.fname;\nmsg.filename =\"/home/root/MES_SYS/\"+mm+yyyy+\"/status/response/\" +msg.fname;\n \n// We save the current payload into a different place on the msg object\n//msg.filecontent = msg.payload;\nmsg.filecontent = {\n    'dt_respond':datetime,\n    'date_time': msg.response.date_time,\n    'unique_id': msg.response.unique_id,\n    'parameter': msg.response.parameter,\n    'value': msg.response.value,\n    'msg_no': msg.response.msg_no,\n    'type': msg.response.type,\n    \"status_code\":msg.response.status_code,\n    \"exception\":msg.response.error_message,\n    //'serverResponse': global.get(\"statusCode\")\n};\n\n// We are passing the file name search pattern to fs node to tell us if the file exists or not\nmsg.payload = {\"pattern\":msg.fname};\n\nnode.status({fill:\"blue\",shape:\"ring\",text:msg.fname});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3210,
        "y": 3600,
        "wires": [
            [
                "82f4aaf9b0682c22"
            ]
        ]
    },
    {
        "id": "43b378891b86442c",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "$count(msg.payload)",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 3570,
        "y": 3600,
        "wires": [
            [
                "55428224725865e2"
            ],
            [
                "3eccb7ceb3091af7"
            ]
        ]
    },
    {
        "id": "55428224725865e2",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3760,
        "y": 3580,
        "wires": [
            [
                "89dd9a5722d6625d"
            ]
        ]
    },
    {
        "id": "3eccb7ceb3091af7",
        "type": "change",
        "z": "c00de09a8dc825d9",
        "name": "Get file content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "filecontent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3760,
        "y": 3620,
        "wires": [
            [
                "a431eab2d5bc8bf0"
            ]
        ]
    },
    {
        "id": "046ca4699ab20121",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 4050,
        "y": 3600,
        "wires": [
            []
        ]
    },
    {
        "id": "82f4aaf9b0682c22",
        "type": "fs-file-lister",
        "z": "c00de09a8dc825d9",
        "name": "",
        "start": "/home/root/MES_SYS",
        "pattern": "*.*",
        "folders": "*",
        "hidden": true,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 3400,
        "y": 3600,
        "wires": [
            [
                "43b378891b86442c"
            ]
        ]
    },
    {
        "id": "1a59a4a75cc251bc",
        "type": "comment",
        "z": "c00de09a8dc825d9",
        "name": "RESPONSE LOG - MACHINE VALUUE",
        "info": "This will only give 1/0 value.",
        "x": 3310,
        "y": 3560,
        "wires": []
    },
    {
        "id": "a431eab2d5bc8bf0",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3930,
        "y": 3620,
        "wires": [
            [
                "046ca4699ab20121"
            ]
        ]
    },
    {
        "id": "89dd9a5722d6625d",
        "type": "csv",
        "z": "c00de09a8dc825d9",
        "name": "",
        "sep": ",",
        "hdrin": false,
        "hdrout": "all",
        "multi": "one",
        "ret": "\\n",
        "temp": "dt_respond,date_time,unique_id,parameter,value, msg_no,type,status_code,exception",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 3930,
        "y": 3580,
        "wires": [
            [
                "046ca4699ab20121"
            ]
        ]
    },
    {
        "id": "34eec73d07f7e5f6",
        "type": "switch",
        "z": "c00de09a8dc825d9",
        "name": "",
        "property": "response.parameter",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "parameter11",
                "vt": "global"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3020,
        "y": 3500,
        "wires": [
            [
                "7c9148816085a77e"
            ]
        ]
    },
    {
        "id": "e49b991b80f27f87",
        "type": "file",
        "z": "c00de09a8dc825d9",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 3600,
        "y": 2820,
        "wires": [
            []
        ]
    }
]
